{"meta":{"title":"Hexo","subtitle":"","description":"","author":"å¼ èˆ’ä¿","url":"http://gladiouszhang.github.io","root":"/"},"pages":[{"title":"ä¹¦å•","date":"2024-11-07T15:47:40.278Z","updated":"2024-07-30T17:49:16.000Z","comments":false,"path":"books/index.html","permalink":"http://gladiouszhang.github.io/books/index.html","excerpt":"","text":""},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2024-11-07T15:47:40.182Z","updated":"2024-07-30T17:49:16.000Z","comments":false,"path":"/404.html","permalink":"http://gladiouszhang.github.io/404.html","excerpt":"","text":""},{"title":"Repositories","date":"2024-11-07T15:47:40.517Z","updated":"2024-07-30T17:49:16.000Z","comments":false,"path":"repository/index.html","permalink":"http://gladiouszhang.github.io/repository/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2024-11-07T15:47:40.301Z","updated":"2024-07-30T17:49:16.000Z","comments":false,"path":"categories/index.html","permalink":"http://gladiouszhang.github.io/categories/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2024-11-07T15:47:40.495Z","updated":"2024-07-30T17:49:16.000Z","comments":true,"path":"links/index.html","permalink":"http://gladiouszhang.github.io/links/index.html","excerpt":"","text":""},{"title":"å…³äº","date":"2025-03-09T14:58:08.266Z","updated":"2025-03-09T14:58:08.266Z","comments":false,"path":"about/index.html","permalink":"http://gladiouszhang.github.io/about/index.html","excerpt":"","text":"çˆ±å¥½å¾’æ­¥ğŸ¥¾ğŸš¶â€â™‚ï¸ğŸŒ²|ä¹¦æ³•âœ’ï¸ğŸ–‹ï¸ğŸ“œ|æ‘„å½±ğŸ“·ğŸï¸ğŸ–¼ï¸|é˜…è¯»ğŸ“šğŸ“–ğŸ”–|ç¼–ç¨‹ğŸ’»ğŸ–¥ï¸ğŸ‘¨â€ğŸ’» æˆ‘çš„å¯¹è±¡ å­¦ä¹ ç»å†2020-2024 æœ¬ç§‘ å°±è¯»äºè¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦ 2024è‡³ä»Š ç¡•å£« å°±è¯»äºè¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦ ç›®å‰å…³æ³¨çš„é¢†åŸŸæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿã€è¾¹ç¼˜è®¡ç®—ã€åŒºå—é“¾æŠ€æœ¯ è®ºæ–‡å‘è¡¨ å­¦ç”ŸäºŒä½œï¼šCortex: Enhancing Resource Utilization in Edge Clusters through Efficient Co-location of LC and BE Workloadsï¼ŒInternet of Things Journal å®ä¹ ç»å†2024å¹´5æœˆ-2024å¹´9æœˆï¼Œè¥¿å®‰è¨€å¤ç§‘æŠ€æœ‰é™è´£ä»»å…¬å¸ï¼Œå…¨æ ˆå¼€å‘ã€‚ ä¸»è¦è·å¥–ç»å† å­¦ç§‘ç«èµ›ï¼š 2021å¹´ï¼š ç¾å›½å¤§å­¦ç”Ÿæ•°å­¦å»ºæ¨¡ç«èµ›ç‰¹ç­‰å¥–æåå¥– æ ¡æ˜Ÿç«æ¯ä¸‰ç­‰å¥– æ ¡åˆ›æ–°åˆ›ä¸šç«èµ›é“œå¥– 2022å¹´ï¼š ç¾å›½å¤§å­¦ç”Ÿæ•°å­¦å»ºæ¨¡ç«èµ›ä¸€ç­‰å¥– æ ¡æ˜Ÿç«æ¯äºŒç­‰å¥– å¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šç«èµ›å›½å®¶çº§ç«‹é¡¹ï¼ˆè´Ÿè´£äººï¼‰ 2023å¹´ï¼š å¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šç«èµ›å›½å®¶çº§ä¼˜ç§€ç»“é¡¹ï¼ˆç¬¬äºŒå®Œæˆäººï¼‰ çœçº§äº’è”ç½‘+é“œå¥– è£èª‰ç§°å· 2021å¹´ï¼š ä¼˜ç§€å…±é’å›¢å‘˜ æ ¡ä¼˜ç§€å­¦ç”Ÿ æ ¡ä¸€ç­‰å¥–å­¦é‡‘ 2022å¹´ï¼š æ ¡åä½³å›¢æ”¯éƒ¨ä¹¦è®° æ ¡ä¼˜ç§€å­¦ç”Ÿ æ ¡äºŒç­‰å¥–å­¦é‡‘ æŒè¶£ç§‘æŠ€å¥–å­¦é‡‘ 2023å¹´ï¼š æ ¡ä¼˜ç§€å­¦ç”Ÿ æ ¡ä¸€ç­‰å¥–å­¦é‡‘ 2024å¹´ï¼š æ ¡ä¼˜ç§€å›¢å¹²éƒ¨ æ¯•ä¸šç”ŸäºŒç­‰å¥–å­¦é‡‘ å¿—æ„¿ç»å†ï¼š è“ä¿¡å°å¿—æ„¿è€… æŠ—ç–«å¿—æ„¿è€…"},{"title":"æ ‡ç­¾","date":"2024-11-07T15:47:40.537Z","updated":"2024-07-30T17:49:16.000Z","comments":false,"path":"tags/index.html","permalink":"http://gladiouszhang.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-hw0","slug":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-hw0","date":"2025-03-09T14:57:13.000Z","updated":"2025-03-09T15:03:34.443Z","comments":true,"path":"2025/03/09/CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-hw0/","permalink":"http://gladiouszhang.github.io/2025/03/09/CMU-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%B3%BB%E7%BB%9F-hw0/","excerpt":"","text":"simple_ml.py simple_ml_ext.py ç”±äºä½œä¸š0å®é™…æ˜¯èµ°ä¸ªè¿‡åœºï¼Œè¿™é‡Œå°±ç®€å•æŠŠä»£ç ä¸€è´´ï¼Œä¸å¤šè§£é‡Š simple_ml.py123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233import structimport numpy as npimport gziptry: from simple_ml_ext import *except: passdef add(x, y): \"\"\" A trivial 'add' function you should implement to get used to the autograder and submission system. The solution to this problem is in the the homework notebook. Args: x (Python number or numpy array) y (Python number or numpy array) Return: Sum of x + y \"\"\" ### BEGIN YOUR CODE return x+y ### END YOUR CODEdef parse_mnist(image_filename, label_filename): \"\"\" Read an images and labels file in MNIST format. See this page: http://yann.lecun.com/exdb/mnist/ for a description of the file format. Args: image_filename (str): name of gzipped images file in MNIST format label_filename (str): name of gzipped labels file in MNIST format Returns: Tuple (X,y): X (numpy.ndarray[np.float32]): 2D numpy array containing the loaded data. The dimensionality of the data should be (num_examples x input_dim) where 'input_dim' is the full dimension of the data, e.g., since MNIST images are 28x28, it will be 784. Values should be of type np.float32, and the data should be normalized to have a minimum value of 0.0 and a maximum value of 1.0 (i.e., scale original values of 0 to 0.0 and 255 to 1.0). y (numpy.ndarray[dtype=np.uint8]): 1D numpy array containing the labels of the examples. Values should be of type np.uint8 and for MNIST will contain the values 0-9. \"\"\" ### BEGIN YOUR CODE # å¤„ç†å›¾ç‰‡æ–‡ä»¶ # å…ˆæ‰“å¼€æ–‡ä»¶ with gzip.open(image_filename,'rb') as f: # è¯»å‡ºæ–‡ä»¶å†…å®¹ï¼Œå…ˆè·å–å‡ºå›¾ç‰‡æ•°é‡ f.seek(4) len = int.from_bytes(f.read(4),byteorder=\"big\",signed=True) f.seek(16) image = f.read() X = np.frombuffer(image,dtype = np.uint8).astype(np.float32) X = X.reshape(len,28*28)/255 with gzip.open(label_filename,'rb') as f1: f1.seek(4) lenth = int.from_bytes(f1.read(4),byteorder=\"big\",signed=True) f1.seek(8) labels = f1.read() y = np.frombuffer(labels,dtype=np.uint8) return X,y ### END YOUR CODEdef softmax_loss(Z, y): \"\"\" Return softmax loss. Note that for the purposes of this assignment, you don't need to worry about \"nicely\" scaling the numerical properties of the log-sum-exp computation, but can just compute this directly. Args: Z (np.ndarray[np.float32]): 2D numpy array of shape (batch_size, num_classes), containing the logit predictions for each class. y (np.ndarray[np.uint8]): 1D numpy array of shape (batch_size, ) containing the true label of each example. Returns: Average softmax loss over the sample. \"\"\" Z_exp=np.exp(Z) Z_exp_sum = np.sum(Z_exp,axis=1) Z_exp_sum_log = np.log(Z_exp_sum) rows = np.arange(Z.shape[0]) Z_y = Z[rows,y] return np.mean(Z_exp_sum_log-Z_y) ### END YOUR CODEdef softmax_regression_epoch(X, y, theta, lr = 0.1, batch=100): \"\"\" Run a single epoch of SGD for softmax regression on the data, using the step size lr and specified batch size. This function should modify the theta matrix in place, and you should iterate through batches in X _without_ randomizing the order. Args: X (np.ndarray[np.float32]): 2D input array of size (num_examples x input_dim). y (np.ndarray[np.uint8]): 1D class label array of size (num_examples,) theta (np.ndarrray[np.float32]): 2D array of softmax regression parameters, of shape (input_dim, num_classes) lr (float): step size (learning rate) for SGD batch (int): size of SGD minibatch Returns: None \"\"\" ### BEGIN YOUR CODE # ä¹Ÿå°±æ˜¯è¯´ï¼Œé’ˆå¯¹è¾“å…¥å’Œæ ‡ç­¾èµ°ä¸€æ­¥ï¼ˆè®­ç»ƒä¸€æ­¥ï¼‰ # æ˜¯ä»Xå’Œyçš„å…¨ä½“ä¸­æŒ‰é¡ºåºå–batchå¤§å° for i in range (0,X.shape[0],batch): end = min(i+batch,X.shape[0]) Z = X[i:end,:] @ theta Z_exp = np.exp(Z) Z_norm = Z_exp/(np.sum(Z_exp,axis=1)[:,np.newaxis]) I_y = np.zeros((end-i,theta.shape[1]),dtype= int) for j in range (end-i): I_y[j,y[i+j]]=1 delta_batch = X[i:end,:].T delta_batch_temp = (Z_norm-I_y) print(delta_batch_temp) delta_batch = delta_batch @ delta_batch_temp delta = delta_batch/batch theta[:] =theta - delta*lr ### END YOUR CODEdef nn_epoch(X, y, W1, W2, lr = 0.1, batch=100): \"\"\" Run a single epoch of SGD for a two-layer neural network defined by the weights W1 and W2 (with no bias terms): logits = ReLU(X * W1) * W2 The function should use the step size lr, and the specified batch size (and again, without randomizing the order of X). It should modify the W1 and W2 matrices in place. Args: X (np.ndarray[np.float32]): 2D input array of size (num_examples x input_dim). y (np.ndarray[np.uint8]): 1D class label array of size (num_examples,) W1 (np.ndarray[np.float32]): 2D array of first layer weights, of shape (input_dim, hidden_dim) W2 (np.ndarray[np.float32]): 2D array of second layer weights, of shape (hidden_dim, num_classes) lr (float): step size (learning rate) for SGD batch (int): size of SGD minibatch Returns: None \"\"\" ### BEGIN YOUR CODE for i in range (0,X.shape[0],batch): end = min(i+batch,X.shape[0]) X_batch = X[i:end,:] y_batch = y[i:end] I_y = np.zeros((len(y_batch),W2.shape[1]),dtype= int) for j in range (len(y_batch)): I_y[j,y_batch[j]]=1 Z_1 = np.maximum(X_batch @ W1,0) G_2 = np.exp(Z_1 @ W2)/(np.sum(np.exp(Z_1 @ W2),axis = 1)[:,np.newaxis])-I_y G_1 = (Z_1&gt;0).astype(int) * (G_2 @ W2.T) delta_W_1 = X_batch.T @ G_1/(end-i) delta_W_2 = Z_1.T @ G_2/(end-i) W1 -= lr*delta_W_1 W2 -= lr*delta_W_2 ### END YOUR CODE### CODE BELOW IS FOR ILLUSTRATION, YOU DO NOT NEED TO EDITdef loss_err(h,y): \"\"\" Helper funciton to compute both loss and error\"\"\" return softmax_loss(h,y), np.mean(h.argmax(axis=1) != y)def train_softmax(X_tr, y_tr, X_te, y_te, epochs=10, lr=0.5, batch=100, cpp=False): \"\"\" Example function to fully train a softmax regression classifier \"\"\" theta = np.zeros((X_tr.shape[1], y_tr.max()+1), dtype=np.float32) print(\"| Epoch | Train Loss | Train Err | Test Loss | Test Err |\") for epoch in range(epochs): if not cpp: softmax_regression_epoch(X_tr, y_tr, theta, lr=lr, batch=batch) else: softmax_regression_epoch_cpp(X_tr, y_tr, theta, lr=lr, batch=batch) train_loss, train_err = loss_err(X_tr @ theta, y_tr) test_loss, test_err = loss_err(X_te @ theta, y_te) print(\"| {:&gt;4} | {:.5f} | {:.5f} | {:.5f} | {:.5f} |\"\\ .format(epoch, train_loss, train_err, test_loss, test_err))def train_nn(X_tr, y_tr, X_te, y_te, hidden_dim = 500, epochs=10, lr=0.5, batch=100): \"\"\" Example function to train two layer neural network \"\"\" n, k = X_tr.shape[1], y_tr.max() + 1 np.random.seed(0) W1 = np.random.randn(n, hidden_dim).astype(np.float32) / np.sqrt(hidden_dim) W2 = np.random.randn(hidden_dim, k).astype(np.float32) / np.sqrt(k) print(\"| Epoch | Train Loss | Train Err | Test Loss | Test Err |\") for epoch in range(epochs): nn_epoch(X_tr, y_tr, W1, W2, lr=lr, batch=batch) train_loss, train_err = loss_err(np.maximum(X_tr@W1,0)@W2, y_tr) test_loss, test_err = loss_err(np.maximum(X_te@W1,0)@W2, y_te) print(\"| {:&gt;4} | {:.5f} | {:.5f} | {:.5f} | {:.5f} |\"\\ .format(epoch, train_loss, train_err, test_loss, test_err))if __name__ == \"__main__\": X_tr, y_tr = parse_mnist(\"data/train-images-idx3-ubyte.gz\", \"data/train-labels-idx1-ubyte.gz\") X_te, y_te = parse_mnist(\"data/t10k-images-idx3-ubyte.gz\", \"data/t10k-labels-idx1-ubyte.gz\") print(\"Training softmax regression\") train_softmax(X_tr, y_tr, X_te, y_te, epochs=10, lr = 0.1) print(\"\\nTraining two layer neural network w/ 100 hidden units\") train_nn(X_tr, y_tr, X_te, y_te, hidden_dim=100, epochs=20, lr = 0.2) simple_ml_ext.pyè¿™ä¸ªåœ°æ–¹ç•¥å‘ï¼Œç”±äºæˆ‘ä¹‹å‰æ²¡ç³»ç»Ÿå­¦è¿‡C++ï¼Œæˆ‘æƒ³å½“ç„¶ä»¥ä¸ºI_y[end-i][k]={0}å°±å¯ä»¥åˆå§‹åŒ–æ•°ç»„ä¸ºå…¨0ï¼Œæ’é”™å¾ˆä¹…ï¼Œå‘ç°C++é‡Œé¢æ²¡æœ‰å¯¹å˜é•¿æ•°ç»„ï¼ˆVLAï¼‰çš„æ ‡å‡†ï¼Œæœ‰äº›ç¼–è¯‘å™¨ï¼ˆæ¯”å¦‚æ­¤å¤„ï¼‰çš„ VLA æ‰©å±•ä¸­ï¼Œä½¿ç”¨ {0} åˆå§‹åŒ–å¯èƒ½ä¸èƒ½ç¡®ä¿æ‰€æœ‰ä½ç½®éƒ½è¢«æ­£ç¡®ç½®é›¶ï¼Œä»è€Œå‡ºç°ä¸€äº›æœªåˆå§‹åŒ–æˆ–åƒåœ¾å€¼ã€‚æ‰€ä»¥å¦‚æœæ²¡æœ‰å¼•å…¥æ¥memsetçš„è¯ï¼Œå»ºè®®è¿˜æ˜¯ç”¨vectoræ•°ç»„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161#include &lt;pybind11/pybind11.h&gt;#include &lt;pybind11/numpy.h&gt;#include &lt;cmath&gt;#include &lt;iostream&gt;namespace py = pybind11;void softmax_regression_epoch_cpp(const float *X, const unsigned char *y, float *theta, size_t m, size_t n, size_t k, float lr, size_t batch){ /** * A C++ version of the softmax regression epoch code. This should run a * single epoch over the data defined by X and y (and sizes m,n,k), and * modify theta in place. Your function will probably want to allocate * (and then delete) some helper arrays to store the logits and gradients. * * Args: * X (const float *): pointer to X data, of size m*n, stored in row * major (C) format * y (const unsigned char *): pointer to y data, of size m * theta (float *): pointer to theta data, of size n*k, stored in row * major (C) format * m (size_t): number of examples * n (size_t): input dimension * k (size_t): number of classes * lr (float): learning rate / SGD step size * batch (int): SGD minibatch size * * Returns: * (None) */ /// BEGIN YOUR CODE for(int i = 0;i &lt;m;i+=batch){ int end = i+batch&gt;m?m:i+batch; std::vector&lt;std::vector&lt;float&gt;&gt; X_batch(end-i,std::vector&lt;float&gt;(n)); for(int j=0;j&lt;end-i;j++){ for(int l=0;l&lt;n;l++){ X_batch[j][l] = X[(i+j)*n+l]; } } std::vector&lt;std::vector&lt;float&gt;&gt; theta_vector(n,std::vector&lt;float&gt;(k)); for(int j=0;j&lt;n;j++){ for(int l=0;l&lt;k;l++){ theta_vector[j][l] = theta[j*k+l]; } } std::vector&lt;std::vector&lt;float&gt;&gt; Z(end-i, std::vector&lt;float&gt;(k, 0)); for (int j = 0; j &lt; end-i; ++j) { for (int l = 0; l &lt; k; ++l) { for (int p = 0; p &lt; n; ++p) { Z[j][l] += X_batch[j][p] * theta_vector[p][l]; } } } std::vector&lt;float&gt; Z_sum(end - i, 0.0f); for(int j=0;j&lt;end-i;j++){ float sum =0; for(int l=0;l&lt;k;l++){ Z[j][l] = std::exp(Z[j][l]); sum += Z[j][l]; } Z_sum[j] = sum; } for(int j=0;j&lt;end-i;j++){ for(int l=0;l&lt;k;l++){ Z[j][l] /= Z_sum[j]; } } std::vector&lt;std::vector&lt;int&gt;&gt; I_y(end - i, std::vector&lt;int&gt;(k, 0)); // for (int j = 0; j &lt; end-i; j++) { // for (int l = 0; l &lt; k; l++) { // std::cout &lt;&lt; I_y[j][l] &lt;&lt; \" \"; // } // std::cout &lt;&lt; std::endl; // } // std::cout &lt;&lt; \"Mini-batch size (rows): \" &lt;&lt; (end - i) &lt;&lt; \", k = \" &lt;&lt; k &lt;&lt; std::endl; for (int j = 0; j &lt; end - i; j++){ I_y[j][y[i+j]] = 1; } std::vector&lt;std::vector&lt;float&gt;&gt; delta_batch_temp(end - i, std::vector&lt;float&gt;(k, 0)); for(int j=0;j&lt;end-i;j++){ for(int l=0;l&lt;k;l++){ delta_batch_temp[j][l] = Z[j][l] - I_y[j][l]; // std::cout &lt;&lt;\"ç¬¬\"&lt;&lt;j&lt;&lt;\"è¡Œ\"&lt;&lt;l&lt;&lt;\"åˆ—,\"&lt;&lt; delta_batch_temp[j][l]&lt;&lt;\",\"&lt;&lt;Z[j][l]&lt;&lt;\",\"&lt;&lt; I_y[j][l]&lt;&lt; \" \"; } } std::vector&lt;std::vector&lt;float&gt;&gt; X_batch_T(n, std::vector&lt;float&gt;(end-i, 0)); for(int j=0;j&lt;n;j++){ for(int l=0;l&lt;end-i;l++){ X_batch_T[j][l]=X_batch[l][j]; } } // std::cout &lt;&lt; \"delta_batch:\" &lt;&lt; std::endl; // for (int j = 0; j &lt; n; j++) { // for (int l = 0; l &lt; end-i; l++) { // std::cout &lt;&lt; X_batch_T[j][l] &lt;&lt; \" \"; // } // std::cout &lt;&lt; std::endl; // } std::vector&lt;std::vector&lt;float&gt;&gt; delta_batch(n, std::vector&lt;float&gt;(k, 0)); for (int j = 0; j &lt; n; j++) { for (int p = 0; p &lt; end-i; p++) { for (int l = 0; l &lt; k; l++) { delta_batch[j][l] += X_batch_T[j][p] * delta_batch_temp[p][l]; } } } // std::cout &lt;&lt; \"delta_batch:\" &lt;&lt; std::endl; // for (int j = 0; j &lt; end-i; j++) { // for (int l = 0; l &lt; k; l++) { // std::cout &lt;&lt; delta_batch_temp[j][l] &lt;&lt; \" \"; // } // std::cout &lt;&lt; std::endl; // } for(int j=0;j&lt;n;j++){ for(int l=0;l&lt;k;l++){ delta_batch[j][l] /=(end-i); } } for(int j=0;j&lt;n;j++){ for(int l=0;l&lt;k;l++){ theta[j*k+l] -= delta_batch[j][l]*lr; } } } /// END YOUR CODE}/** * This is the pybind11 code that wraps the function above. It's only role is * wrap the function above in a Python module, and you do not need to make any * edits to the code */PYBIND11_MODULE(simple_ml_ext, m) { m.def(\"softmax_regression_epoch_cpp\", [](py::array_t&lt;float, py::array::c_style&gt; X, py::array_t&lt;unsigned char, py::array::c_style&gt; y, py::array_t&lt;float, py::array::c_style&gt; theta, float lr, int batch) { softmax_regression_epoch_cpp( static_cast&lt;const float*&gt;(X.request().ptr), static_cast&lt;const unsigned char*&gt;(y.request().ptr), static_cast&lt;float*&gt;(theta.request().ptr), X.request().shape[0], X.request().shape[1], theta.request().shape[1], lr, batch ); }, py::arg(\"X\"), py::arg(\"y\"), py::arg(\"theta\"), py::arg(\"lr\"), py::arg(\"batch\"));}","categories":[],"tags":[{"name":"AI Infra","slug":"AI-Infra","permalink":"http://gladiouszhang.github.io/tags/AI-Infra/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬å››ç« ","slug":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬å››ç« ","date":"2025-03-09T06:35:56.000Z","updated":"2025-03-09T14:57:22.048Z","comments":true,"path":"2025/03/09/CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬å››ç« /","permalink":"http://gladiouszhang.github.io/2025/03/09/CMU-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%B3%BB%E7%BB%9F-%E7%AC%AC%E5%9B%9B%E7%AB%A0/","excerpt":"","text":"æ•°å€¼è®¡ç®—å’Œç¬¦å·æ¨å¯¼ å‰å‘è‡ªåŠ¨å¾®åˆ† åå‘è‡ªåŠ¨å¾®åˆ† é€šè¿‡æ‰©å±•è®¡ç®—å›¾çš„åå‘è‡ªåŠ¨å¾®åˆ† è¿™ä¸€ç« ä¸»è¦æ˜¯è®²äº†åå‘æ¨¡å¼çš„è‡ªåŠ¨å¾®åˆ† æ•°å€¼è®¡ç®—å’Œç¬¦å·æ¨å¯¼ä½¿ç”¨å…¬å¼ç›´æ¥è®¡ç®—åå¯¼çš„å¾®åˆ†æ–¹å¼å®¹æ˜“å‡ºç°æ•°å€¼é”™è¯¯ï¼Œä»¥åŠæ•ˆç‡å¤ªä½ï¼Œé€šå¸¸æ˜¯ç”¨æ¥ä½œä¸ºæ£€éªŒæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯é‡‡ç”¨å…·ä½“æ•°å€¼æ¥æ±‚å‡ºå¯¹åº”ä½ç½®çš„å¾®åˆ†ï¼Œlike thisï¼š æˆ–è€…è¿™ç§ï¼š é‡‡ç”¨ç¬¦å·æ¨å¯¼çš„æ–¹å¼æµªè´¹ç®—åŠ›ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æ•°å­¦æ¨å¯¼æ–¹å¼ï¼Œæ¯”å¦‚é“¾å¼æ³•åˆ™ä¹‹ç±»çš„ï¼š å¦‚æœé‡åˆ°è¿ä¹˜ï¼Œè®¡ç®—æ‰€æœ‰åå¯¼çš„å¼€é”€æ˜¯ å› æ­¤è¿›ä¸€æ­¥æå‡ºäº†è®¡ç®—å›¾ï¼š å‰å‘è‡ªåŠ¨å¾®åˆ†é¦–å…ˆä»‹ç»äº†å‰å‘æ¨¡å¼çš„è‡ªåŠ¨å¾®åˆ†ã€‚åŒä¸Šå›¾ï¼Œè®° ç„¶åå‘å‰ä¸€æ­¥ä¸€æ­¥è®¡ç®—,â€¦ï¼Œè¿™æ ·ä¸€è½®è·‘ä¸‹æ¥çš„æ•´ä¸ªè¿‡ç¨‹æ˜¯ï¼š ä½†æ˜¯è¿™åªæ˜¯é’ˆå¯¹çš„ï¼Œé’ˆå¯¹çš„åå¯¼è¿˜å¾—å†ç»å†ä¸€éä¸Šè¿°è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å¯¹äºï¼Œéœ€è¦ç»å†nä¸ªå‰å‘ä¼ æ’­ï¼Œæ‰èƒ½å¾—åˆ°æœ€ç»ˆç»“æœå¯¹æ¯ä¸€ä¸ªè¾“å…¥çš„åå¯¼ã€‚è€Œä¸€èˆ¬néƒ½æ¯”è¾ƒå¤§ï¼Œåè€Œæ˜¯kå¾ˆå°ï¼Œç»å¸¸æ˜¯1ï¼Œæ‰€ä»¥æ¢ç”¨åå‘è‡ªåŠ¨å¾®åˆ†ã€‚ åå‘è‡ªåŠ¨å¾®åˆ†åŒæ ·çš„è®¡ç®—å›¾: è®°ï¼Œç§°ä¸ºç‚¹çš„ä¼´éšï¼ˆadjointï¼‰ æŒ‰ç…§å®Œå…¨ç›¸åçš„æ‹“æ‰‘é¡ºåºæ¥è®¡ç®—å„ä¸ªèŠ‚ç‚¹çš„ï¼Œä¹Ÿå°±æ˜¯ï¼Œï¼Œâ€¦ï¼Œã€‚è¿™æ ·çš„å¥½å¤„æ˜¯åªéœ€è¦èµ°ä¸€éå°±å¯ä»¥æŠŠæ¯ä¸ªè¾“å…¥çš„åå¯¼éƒ½æ±‚å‡ºæ¥ã€‚å•è¯çš„åå‘è‡ªåŠ¨å¾®åˆ†è¿‡ç¨‹å¦‚ä¸‹ï¼š é’ˆå¯¹å¤šè·¯æƒ…å†µçš„æ±‚å¯¼ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªè¾“å…¥ä½œä¸ºäº†å¤šä¸ªè¾“å…¥ï¼Œå¦‚ä¸‹å›¾ å¯ä»¥å¾—åˆ°ï¼š è¿™é‡ŒæŠŠåˆ°å’Œçš„è¾¹çš„è¡¨ç¤ºåˆ©ç”¨èµ·æ¥ï¼Œå…¶å®å¦‚æœæŠŠå’Œè¡¨è¿°æˆè¾¹ä¸Šçš„ç‰¹å¾ï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ä¸ºçš„ä¼´éšåªéœ€è¦æ²¿ç€ä»–æ‰€æœ‰å‡ºçš„è¾¹çš„ç‰¹å¾ä¹‹å’Œå°±å¥½äº†ã€‚æŠŠè¿™ä¸ªå®šä¹‰æˆéƒ¨åˆ†ä¼´éšï¼ˆpartial adjointï¼‰ï¼Œå³ï¼Œå› æ­¤å°±æœ‰ï¼š \\overline{v_i}=\\sum_{j\\in n x t(i)}\\overline{v_{i\\rightarrow j}}å¯ä»¥è§£é‡Šä¸ºè®¡ç®—å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ä¼´éšç­‰äºå®ƒæ‰€æœ‰ä¸ä¸‹ä¸€ä¸ªèŠ‚ç‚¹é‚»æ¥è¾¹çš„éƒ¨åˆ†ä¼´éšä¹‹å’Œã€‚å› æ­¤åªéœ€è¦è®¡ç®—æ‰€æœ‰çš„éƒ¨åˆ†ä¼´éšï¼Œè¦æ±‚ä¼´éšçš„æ—¶å€™ç»™ä»–ä»¬æ±‚å’Œå°±å¥½ã€‚ ä¼ªä»£ç è¡¨ç¤ºå¦‚ä¸‹ï¼š é€šè¿‡æ‰©å±•è®¡ç®—å›¾çš„åå‘è‡ªåŠ¨å¾®åˆ†æŒ‰ç…§ä¸Šé¢çš„ä¼ªä»£ç è¿‡ç¨‹ï¼Œé’ˆå¯¹è¿™ä¸ªè®¡ç®—å›¾ï¼š é¦–å…ˆæ˜¯å¯¹è¿™ä¸ªç‚¹è®¡ç®—å…¶ï¼Œé‚£è‚¯å®šæ˜¯1ï¼Œæ‰€ä»¥è®°å½•åˆ°node_to_gradé‡Œé¢ï¼Œå¹¶ä¸”å¯ä»¥åšå‡ºè¿™æ ·çš„è®¡ç®—å›¾ï¼š è¿™ä¸ªidå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œä¸å¤ªé‡è¦ã€‚è¿›ä¸€æ­¥è®¡ç®—å’Œï¼Œä»¥ä¸ºä¾‹ï¼Œå°±æ˜¯ï¼Œè€Œå…¶ä¸­å¯ä»¥å¾—åˆ°çš„æ˜¯å®åˆ™å°±æ˜¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ›´æ–°ä¸€ä¸ªæ–°çš„è®¡ç®—å›¾ï¼Œå°±æ˜¯è¯´å…¶å®å°±æ˜¯è¿™ä¸ªèŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹çš„ç§¯ã€‚åŒç†ï¼Œä½†ä¸ä¸€æ ·çš„æ˜¯å…¶å®å°±æ˜¯ï¼Œå› ä¸ºåªæœ‰ä¸€æ¡å‘å¤–çš„è¾¹ã€‚å› æ­¤å¯ä»¥è¿›ä¸€æ­¥æ›´æ–°è®¡ç®—å›¾ï¼Œå¹¶æ›´æ–°node_to_gradï¼ˆkeyæ˜¯nodeçš„ç¼–å·ï¼Œæ¯ä¸ªvalueä»£è¡¨ä¸€æ¡è¾¹çš„partial adjointï¼‰ï¼š è¿›ä¸€æ­¥è€ƒè™‘ï¼Œè€ƒè™‘æ‰€æœ‰å®ƒçš„ä¸Šä¸€ä¸ªç‚¹ï¼Œè®¡ç®—partial adjointï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¾—åˆ°ä¸€ä¸ªæ‹“å±•çš„è®¡ç®—å›¾ï¼Œæœ€ç»ˆå¦‚ä¸‹ï¼š ä½†å¦‚æœæ˜¯ä¼ ç»Ÿçš„åå‘è‡ªåŠ¨å¾®åˆ†ï¼Œè®¡ç®—å›¾æ˜¯è¿™æ ·çš„ï¼š ä¼ ç»Ÿçš„åå‘è‡ªåŠ¨å¾®åˆ†æ˜¯ç¬¬ä¸€ä»£æ·±åº¦å­¦ä¹ æ¡†æ¶ä½¿ç”¨çš„æ–¹æ³•ï¼Œå¦‚caffe, cuda-convnetï¼›ç°ä»£çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä½¿ç”¨æ‰©å±•çš„è®¡ç®—å›¾ã€‚è¿™æ ·çš„è®¡ç®—å›¾æœ‰åˆ©äºè¿›ä¸€æ­¥è®¡ç®—äºŒé˜¶åå¯¼ï¼Œä¹Ÿæ›´æœ‰åˆ©äºä¼˜åŒ– é’ˆå¯¹tensorçš„åå‘æ¨¡å¼çš„è‡ªåŠ¨æ±‚å¯¼ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å¯¹äºè®¡ç®—å›¾ï¼š å®šä¹‰çš„ä¼´éšï¼Œå…¶å®è¿‡ç¨‹ä¹Ÿå°±ç±»ä¼¼æ ‡é‡ï¼ŒçŸ©é˜µçš„æ­£å‘ä¼ æ’­æ—¶ï¼Œåå‘ä¹‹åï¼Œå¯ä»¥æ±‚å¾—ï¼šï¼ˆå…¶å®ä¸ç”¨å¾ˆä¸¥è°¨çš„æ¨å¯¼ï¼Œç”šè‡³å¯ä»¥ç›´æ¥ç”¨é“¾å¼æ³•åˆ™çŸ¥é“å“ªä¸¤ä¸ªç›¸ä¹˜ï¼Œç„¶åç”¨è½¬ç½®å‡‘å½¢å¼å°±è¡Œï¼ˆZicoè€å¸ˆå‰å‡ èŠ‚è¯¾æ•™çš„ æœ€åè¯´çš„è¿™ä¸ªåœ¨æ•°æ®ç»“æ„ä¸Šçš„åå‘è‡ªåŠ¨å¾®åˆ†æˆ‘æ²¡çœ‹æ‡‚ï¼Ÿæˆ‘ç†è§£å¤§æ¦‚æ˜¯è®²çš„å¦‚æœæ­£å‘çš„æ—¶å€™æ˜¯å¯¹æ•°æ®ç»“æ„é‡Œé¢çš„æŸä¸ªå…ƒç´ è¿›è¡Œä¼ é€’ï¼Œåå‘ä¾ç„¶æ˜¯é’ˆå¯¹åŒä¸€ä¸ªå…ƒç´ ï¼Ÿ","categories":[],"tags":[{"name":"AI Infra","slug":"AI-Infra","permalink":"http://gladiouszhang.github.io/tags/AI-Infra/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬ä¸‰ç« ","slug":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬ä¸‰ç« ","date":"2025-03-09T05:42:10.000Z","updated":"2025-03-09T06:34:32.309Z","comments":true,"path":"2025/03/09/CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬ä¸‰ç« /","permalink":"http://gladiouszhang.github.io/2025/03/09/CMU-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%B3%BB%E7%BB%9F-%E7%AC%AC%E4%B8%89%E7%AB%A0/","excerpt":"","text":"è¿™ç« ä¸»è¦è®²äº†ä¸ºä»€ä¹ˆè¦ä»çº¿æ€§åˆ°éçº¿æ€§çš„å‡è®¾å±‚ï¼ˆhypothesis classesï¼‰ï¼Œä»¥åŠä»‹ç»äº†ç¥ç»ç½‘ç»œå’Œåå‘ä¼ æ’­ï¼Œé‡ç‚¹åœ¨äºè®¡ç®—æ¢¯åº¦ã€‚ çº¿æ€§å‡½æ•°å®é™…ä¸Šå°±æ˜¯åœ¨å¹³é¢ï¼ˆæˆ–è€…æ›´é«˜ç»´åº¦ï¼‰ä¸Šç”»çº¿ï¼ˆæˆ–è€…æ›´é«˜ç»´çš„é¢æˆ–ä»€ä¹ˆç©æ„ï¼Œåæ­£æ˜¯ç›´çš„ï¼‰ï¼Œç”¨å‚æ•°æ‹Ÿåˆï¼Œç„¶åæ­£ç¡®è¿›è¡Œåˆ†ç±»ã€‚ä½†æ˜¯æœ‰äº›ä¸œè¥¿ä¸èƒ½ç”¨çº¿æ€§æ¥è¿›è¡Œåˆ†ç±»æ¯”å¦‚ï¼š å› æ­¤æå‡ºä¸€ä¸ªæƒ³æ³•ï¼šæŠŠçº¿æ€§åˆ†ç±»å™¨ä½œç”¨åˆ°æ›´é«˜ç»´åº¦çš„æ•°æ®ç‰¹å¾ä¸Šï¼ˆä¹Ÿå°±æ˜¯è¯´æŠŠåŸæ•°æ®æ‰©å±•åˆ°æ›´é«˜ç»´æ¥æå–ç‰¹å¾ï¼Œå†ç»è¿‡çº¿æ€§å±‚ï¼‰ï¼Œå³ï¼š å¦‚ä½•å¾—åˆ°å‡½æ•°ï¼šä¼ ç»Ÿçš„æ–¹æ³•æ˜¯æ‰‹åŠ¨æå–ç‰¹å¾ï¼Œç°åœ¨çš„æ–¹æ³•å°±æ˜¯è‡ªå·±å­¦ä¹ ã€‚ ä½†æ˜¯å¦‚æœä¾ç„¶æ˜¯ä¸ªçº¿æ€§å‡½æ•°çš„è¯ï¼Œå®é™…ä¸Šæœ€åçš„ç»“æœå’ŒåŸæ¥çš„çº¿æ€§åˆ†ç±»å™¨æ²¡åŒºåˆ«ï¼Œå› ä¸º å› æ­¤éœ€è¦æ¿€æ´»å‡½æ•°è¿™æ ·ä¸€ä¸ªéçº¿æ€§çš„å‡½æ•° ç¥ç»ç½‘ç»œå°±æ˜¯ç”±å¤šä¸ªè¿™æ ·çš„å±‚ç»„æˆçš„hypothesis classesï¼Œåªè¦ä½¿ç”¨ç¥ç»ç½‘ç»œä½œä¸ºhypothesis classesçš„MLï¼Œå°±å¯ä»¥è¢«ç§°ä¸ºDLã€‚Lå±‚çš„ç¥ç»ç½‘ç»œåˆå«å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMLPï¼ŒMulti-layer perceptionï¼‰ ä¸€ä¸ªä¸¤å±‚çš„ç¥ç»ç½‘ç»œå°±å¯ä»¥è¿‘ä¼¼ä»»ä½•ä¸€ä¸ªå‡½æ•°ã€‚è‡³äºä¸ºä»€ä¹ˆè¶Šæ·±çš„ç½‘ç»œæœ‰æ—¶å€™å°±è¶Šå¥½ï¼Œè€Œä¸æ˜¯åŠ ç»´åº¦ï¼Œzicoè¯´æ›´è®©äººä¿¡æœçš„è¯´æ³•æ˜¯ç»éªŒä¸»ä¹‰ã€‚ã€‚ã€‚ å¦‚ä½•è®¡ç®—æ¢¯åº¦ï¼šå‰å‘ä¼ æ’­+åå‘ä¼ æ’­ï¼Œâ€œåå‘ä¼ æ’­â€åªæ˜¯é“¾å¼æ³•åˆ™ + ä¸­é—´ç»“æœçš„æ™ºèƒ½ç¼“å­˜","categories":[],"tags":[{"name":"AI Infra","slug":"AI-Infra","permalink":"http://gladiouszhang.github.io/tags/AI-Infra/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"å¼ºåŒ–å­¦ä¹ SACç®—æ³•æµç¨‹åŠä¸PPOå¯¹æ¯”","slug":"å¼ºåŒ–å­¦ä¹ SACç®—æ³•æµç¨‹åŠä¸PPOå¯¹æ¯”","date":"2025-03-05T13:53:26.000Z","updated":"2025-03-06T06:54:10.967Z","comments":true,"path":"2025/03/05/å¼ºåŒ–å­¦ä¹ SACç®—æ³•æµç¨‹åŠä¸PPOå¯¹æ¯”/","permalink":"http://gladiouszhang.github.io/2025/03/05/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0SAC%E7%AE%97%E6%B3%95%E6%B5%81%E7%A8%8B%E5%8F%8A%E4%B8%8EPPO%E5%AF%B9%E6%AF%94/","excerpt":"","text":"SACç®—æ³•æµç¨‹ ä¸»å¾ªç¯ä¸­è¿›è¡ŒåŠ¨ä½œé€‰æ‹©ä¸ç¯å¢ƒäº¤äº’ updateå‡½æ•°å½“ä¸­ ç›®æ ‡Qå€¼è®¡ç®—ï¼ˆCriticæ›´æ–°ï¼‰ Actorç­–ç•¥æ›´æ–° ç›®æ ‡criticç½‘ç»œè½¯æ›´æ–° å‚è€ƒä»£ç  å’ŒPPOç®—æ³•è¿›è¡Œå¯¹æ¯” å› ä¸ºæœ€è¿‘è®ºæ–‡é‡Œé¢ç”¨åˆ°äº†è¿™ä¸ªç®—æ³•ï¼Œæ‰€ä»¥é¡ºä¾¿ä¹Ÿæ€»ç»“ä¸€ä¸‹ SACç®—æ³•æµç¨‹ä¸»å¾ªç¯ä¸­è¿›è¡ŒåŠ¨ä½œé€‰æ‹©ä¸ç¯å¢ƒäº¤äº’ Actorç½‘ç»œï¼ˆç­–ç•¥ç½‘ç»œï¼‰æ ¹æ®å½“å‰çŠ¶æ€ç”Ÿæˆå¸¦éšæœºæ€§çš„åŠ¨ä½œ æ‰§è¡ŒåŠ¨ä½œï¼Œç¯å¢ƒè¿”å›ä¸‹ä¸€çŠ¶æ€å’Œå¥–åŠ± updateå‡½æ•°å½“ä¸­ç›®æ ‡Qå€¼è®¡ç®—ï¼ˆCriticæ›´æ–°ï¼‰ åŒQç½‘ç»œï¼ˆQ1, Q2ï¼‰ï¼šåˆ†åˆ«è®¡ç®—å½“å‰çŠ¶æ€-åŠ¨ä½œå¯¹çš„Qå€¼ï¼ˆï¼‰ã€‚ ç›®æ ‡Qå€¼ï¼ˆQ_targetï¼‰ï¼š ä¸‹ä¸€çŠ¶æ€è¾“å…¥Actorï¼ˆå°±æ˜¯ç­–ç•¥ç½‘ç»œ ï¼‰å¾—åˆ°æ–°åŠ¨ä½œåŠå¯¹åº”ç†µï¼Œä¹Ÿå°±æ˜¯è¯´ å®é™…ä¸Šä»£è¡¨çš„æ˜¯åœ¨ä¸‹ä¸€çŠ¶æ€æ—¶é€‰æ‹©çš„æ¦‚ç‡ã€‚ ç”¨ç›®æ ‡Criticç½‘ç»œï¼ˆéè®­ç»ƒå‚æ•°ï¼‰è®¡ç®—ä¸‹ä¸€åŠ¨ä½œçš„Qå€¼ï¼Œå¹¶åŠ ç†µé¡¹ï¼š Q^{\\text{target}} = r_t + \\gamma(1 - \\text{done})\\left[\\min_{j = 1,2}Q_{\\phi_{\\text{target}_j}}(s_{t + 1}, a') - \\alpha \\log \\pi_{\\theta}(a'|s_{t + 1})\\right] è¡¨ç¤ºç”±å½“å‰Actorç½‘ç»œæ ¹æ®çŠ¶æ€ ç”Ÿæˆä¸‹ä¸€ä¸ªåŠ¨ä½œã€‚ æ˜¯ä»ä¸¤ä¸ªç›®æ ‡Criticç½‘ç»œ è¾“å‡ºçš„å€¼ä¸­å–æœ€å°å€¼ï¼Œç›®çš„æ˜¯é¿å…é«˜ä¼°Qå€¼ã€‚ æ˜¯ç†µè°ƒèŠ‚ç³»æ•°ï¼Œ è¡¨ç¤ºåŠ¨ä½œçš„ç†µï¼Œç”¨äºè¡¡é‡åŠ¨ä½œçš„éšæœºæ€§ã€‚ è¡¨ç¤ºåŠ¨ä½œåœ¨å½“å‰ç­–ç•¥ä¸‹çš„å¯¹æ•°æ¦‚ç‡ï¼ˆlog probabilityï¼‰ï¼Œè´Ÿå·æ˜¯ä¸ºäº†å°†ç†µå®šä¹‰ä¸ºæ­£æ•°ã€‚ç†µè¶Šå¤§ï¼Œè¡¨ç¤ºåŠ¨ä½œçš„éšæœºæ€§è¶Šå¼ºï¼ˆæ¢ç´¢æ€§è¶Šé«˜ï¼‰ã€‚ å…¶å®æˆ‘å¾ˆå›°æƒ‘ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ Q^ { \\text { target } } = r_t + \\gamma(1 - \\text{done } )\\left[ \\min_{ j = 1,2}Q_{\\phi_{\\text{target}_j}}(s_{t + 1}, a') - (-\\alpha \\log \\pi_{\\theta} (a'|s_{t + 1}) )\\right]å› ä¸ºç†µæ˜¯ ï¼Œè‚¯å®šä¸ºæ­£æ•°ï¼Œè€ŒåŸå¼æƒ³è¡¨è¾¾çš„æ˜¯å‡å»ç†µï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯åƒæˆ‘è¿™æ ·å†™çš„è¯ï¼Œå®é™…ä¸Šä¼šåŠ ä¸Šç†µï¼Ÿé™¤éæ˜¯è´Ÿæ•°ã€‚å®é™…ä¸Šå°±æ˜¯åŠ ä¸Šç†µï¼Œç†µä½œä¸ºä¸€ä¸ªå¥–åŠ±ï¼Œå½“ä¸€ä¸ªåŠ¨ä½œçš„é€‰æ‹©æ¦‚ç‡è¾ƒå°çš„æ—¶å€™ï¼Œä¼šé€‚å½“å¢åŠ é€‰æ‹©å®ƒçš„æ¦‚ç‡ï¼Œé¿å…è®©é€‰æ‹©è¿‡äºç¡®å®šï¼Œè¿™å°±æ˜¯ç†µçš„ä½œç”¨ æœ€å°åŒ–Q_currentä¸Q_targetçš„MSEæŸå¤±ï¼Œæ›´æ–°criticå‚æ•°ã€‚ Actorç­–ç•¥æ›´æ–° é€šè¿‡å½“å‰çŠ¶æ€é‡‡æ ·åŠ¨ä½œï¼Œè®¡ç®—æ›´æ–°åçš„criticå’Œæœªæ›´æ–°çš„target_criticçš„Qå€¼ï¼ˆå–åŒQæœ€å°å€¼ï¼‰å¹¶åŠ ç†µé¡¹ï¼š ä½¿ç”¨ä¼˜åŒ–å™¨æ¥æœ€å°åŒ–lossï¼Œå› ä¸ºå–çš„æ˜¯ç›¸åæ•°æ‰€ä»¥å®åˆ™æ˜¯æœ€å¤§åŒ–è¯¥å€¼ï¼Œä»¥æå‡ç­–ç•¥æ€§èƒ½ä¸æ¢ç´¢æ€§ã€‚ é€šè¿‡æ¢¯åº¦ä¸Šå‡ä¼˜åŒ– ï¼Œä½¿åŠ¨ä½œ åŒæ—¶æ»¡è¶³ï¼š é«˜Qå€¼ï¼ˆCriticè®¤å¯çš„åŠ¨ä½œï¼‰ é«˜ç†µï¼ˆé¼“åŠ±æ¢ç´¢ï¼Œé¿å…ç­–ç•¥å›ºåŒ–ï¼‰ ç›®æ ‡criticç½‘ç»œè½¯æ›´æ–° ç›®æ ‡Criticå‚æ•°é€šè¿‡Polyakå¹³å‡ç¼“æ…¢è·Ÿè¸ªä¸»Critic å…¶ä¸­ï¼š ï¼ˆä¾‹å¦‚ 0.005ï¼‰ï¼Œè¯¥å‚æ•°ç”¨äºæ§åˆ¶æ›´æ–°çš„å¹…åº¦ã€‚é€šè¿‡è¿™ç§è½¯æ›´æ–°çš„æ–¹å¼ï¼Œå°†å½“å‰ç½‘ç»œå‚æ•° ä¸ç›®æ ‡ç½‘ç»œå‚æ•° è¿›è¡Œèåˆï¼Œç¼“æ…¢åŒæ­¥å‚æ•°ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¨³å®šè®­ç»ƒè¿‡ç¨‹ï¼Œé¿å…å› å‚æ•°æ›´æ–°è¿‡å¿«å¯¼è‡´è®­ç»ƒä¸ç¨³å®šã€‚ å‚è€ƒä»£ç è™½ç„¶è¿™ä¸ªä»£ç æ²¡æœ‰è€ƒè™‘ç†µï¼Œä»¥åŠæ²¡è€ƒè™‘ä¸¤ä¸ªQçš„æœ€å°å€¼ï¼Œå¹¶ä¸”è¿è¡Œèµ·æ¥æ²¡å•¥ç»“æœï¼Œä½†æ˜¯å…¶ä»–åœ°æ–¹æˆ‘éƒ½æ³¨é‡Šå¥½äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194import torchimport torch.nn as nnimport torch.optim as optimimport numpy as np# --------------------------# çŠ¶æ€ç¼–ç å™¨ï¼ˆæåæ ‡è½¬æ¢ + ç‰¹å¾æ‹¼æ¥ï¼‰# --------------------------def encode_state(vehicle_pos, vehicle_speed, nodes_info): \"\"\" è¾“å…¥: vehicle_pos: è½¦è¾†å½“å‰ä½ç½® (ç¬›å¡å°”åæ ‡) [x, y] vehicle_speed: è½¦è¾†é€Ÿåº¦å‘é‡ [vx, vy] nodes_info: è¾¹ç¼˜èŠ‚ç‚¹ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸º [èŠ‚ç‚¹x, èŠ‚ç‚¹y, è®¡ç®—èƒ½åŠ›, ä¿¡ä»»åº¦] è¾“å‡º: state_tensor: ç¼–ç åçš„çŠ¶æ€å¼ é‡ (shape: [1, state_dim]) \"\"\" # å°†è½¦è¾†ä¸èŠ‚ç‚¹çš„ç›¸å¯¹ä½ç½®è½¬æ¢ä¸ºæåæ ‡ polar_features = [] for node in nodes_info: dx = node[0] - vehicle_pos[0] dy = node[1] - vehicle_pos[1] r = np.sqrt(dx ** 2 + dy ** 2) # ç›¸å¯¹è·ç¦» theta = np.arctan2(dy, dx) # ç›¸å¯¹è§’åº¦ï¼ˆå¼§åº¦ï¼‰ polar_features.extend([r, theta]) # é€Ÿåº¦æŠ•å½±ï¼ˆå¾„å‘å’Œåˆ‡å‘åˆ†é‡ï¼‰ speed_norm = np.linalg.norm(vehicle_speed) if speed_norm &gt; 0: v_r = (vehicle_speed[0] * dx + vehicle_speed[1] * dy) / (r + 1e-5) # å¾„å‘é€Ÿåº¦ v_theta = (vehicle_speed[0] * dy - vehicle_speed[1] * dx) / (r + 1e-5) # åˆ‡å‘é€Ÿåº¦ else: v_r, v_theta = 0.0, 0.0 # å‡è®¾LSTMéšè—çŠ¶æ€ï¼ˆç®€åŒ–ä¸ºéšæœºå‘é‡ï¼‰ lstm_hidden = np.random.randn(16) # æ‹¼æ¥æ‰€æœ‰ç‰¹å¾ state = np.concatenate([ polar_features, [v_r, v_theta], lstm_hidden, [node[2] for node in nodes_info], # èŠ‚ç‚¹è®¡ç®—èƒ½åŠ› [node[3] for node in nodes_info] # èŠ‚ç‚¹ä¿¡ä»»åº¦ ]) return torch.FloatTensor(state).unsqueeze(0)# --------------------------# Actorç½‘ç»œï¼ˆç­–ç•¥ç½‘ç»œï¼‰# --------------------------class Actor(nn.Module): def __init__(self, state_dim, action_dim, hidden_dim=256): super().__init__() self.net = nn.Sequential( nn.Linear(state_dim, hidden_dim), nn.ReLU(), nn.Linear(hidden_dim, hidden_dim), nn.ReLU(), nn.Linear(hidden_dim, action_dim), nn.Tanh() # è¾“å‡ºèŒƒå›´[-1,1]ï¼Œéœ€æ˜ å°„åˆ°å…·ä½“åŠ¨ä½œ ) def forward(self, state): return self.net(state)# --------------------------# Criticç½‘ç»œï¼ˆQå‡½æ•°ï¼‰# --------------------------class Critic(nn.Module): def __init__(self, state_dim, action_dim, hidden_dim=256): super().__init__() self.q_net = nn.Sequential( nn.Linear(state_dim + action_dim, hidden_dim), nn.ReLU(), nn.Linear(hidden_dim, hidden_dim), nn.ReLU(), nn.Linear(hidden_dim, 1) ) def forward(self, state, action): return self.q_net(torch.cat([state, action], dim=1))# --------------------------# ST-SACä¸»ç±»# --------------------------class ST_SAC: def __init__(self, state_dim, action_dim, lr=3e-4, gamma=0.99, alpha=0.2, tau=0.005): # ä¸»ç½‘ç»œ self.actor = Actor(state_dim, action_dim) self.critic = Critic(state_dim, action_dim) self.critic_target = Critic(state_dim, action_dim) # æ–°å¢ç›®æ ‡ç½‘ç»œ self.critic_target.load_state_dict(self.critic.state_dict()) # åŒæ­¥åˆå§‹åŒ– # ä¼˜åŒ–å™¨ self.actor_optim = optim.Adam(self.actor.parameters(), lr=lr) self.critic_optim = optim.Adam(self.critic.parameters(), lr=lr) # è¶…å‚æ•° self.gamma = gamma self.alpha_base = alpha self.tau = tau # ç›®æ ‡ç½‘ç»œè½¯æ›´æ–°ç³»æ•° def select_action(self, state, nodes_info, trust_threshold=0.5): \"\"\" é€‰æ‹©åŠ¨ä½œï¼ˆå«å®‰å…¨æ©ç ï¼‰ \"\"\" with torch.no_grad(): action = self.actor(state) # ç”ŸæˆåŠ¨ä½œæ©ç ï¼ˆä¿¡ä»»åº¦ &gt;= é˜ˆå€¼ï¼‰ valid_nodes = [i for i, node in enumerate(nodes_info) if node[3] &gt;= trust_threshold] mask = torch.zeros_like(action) for i in valid_nodes: mask[:, i] = 1.0 # å‡è®¾æ¯ä¸ªåŠ¨ä½œç»´åº¦å¯¹åº”ä¸€ä¸ªèŠ‚ç‚¹ # åº”ç”¨æ©ç å¹¶éšæœºæ¢ç´¢ masked_action = action * mask + (1 - mask) * torch.randn_like(action) return masked_action.squeeze(0).numpy() def update(self, state, action, reward, next_state, done, vehicle_speed): # åŠ¨æ€ç†µç³»æ•° v_r = abs(state[0, -len(nodes_info) * 2 + 1]) alpha = self.alpha_base * (1 + torch.sigmoid(torch.tensor(v_r))) # ----------------- 1. Critic æ›´æ–° ----------------- with torch.no_grad(): next_action = self.actor(next_state) # ä½¿ç”¨ç›®æ ‡ç½‘ç»œè®¡ç®—ç›®æ ‡Qå€¼ target_q = self.critic_target(next_state, next_action) # å½“å‰åŠ¨ä½œçš„å³æ—¶å¥–åŠ± + å¯¹æœªæ¥å¥–åŠ±çš„é¢„æµ‹ target_q = reward + (1 - done) * self.gamma * target_q current_q = self.critic(state, action) # ç›®æ ‡ï¼šè®©å½“å‰Qå€¼é€¼è¿‘ç›®æ ‡Qå€¼ critic_loss = nn.MSELoss()(current_q, target_q) self.critic_optim.zero_grad() critic_loss.backward() # æ›´æ–°criticç½‘ç»œï¼Œè®©ç½‘ç»œå‚æ•°å¾€ç›®æ ‡Qå€¼çš„æ–¹å‘æ›´æ–° self.critic_optim.step() # ----------------- 2. Actor æ›´æ–° ----------------- # åˆ‡æ–­Criticåˆ°Actorçš„æ¢¯åº¦ä¼ æ’­ pred_action = self.actor(state) # actorç½‘ç»œçš„å‚æ•°æ›´æ–°éœ€è¦ä¾èµ–criticç½‘ç»œçš„è¾“å‡º,criticæ˜¯æ›´æ–°è¿‡çš„ï¼Œç”¨æ¥ç»™actoræä¾›æŒ‡å¯¼ # detach()çš„ä½œç”¨æ˜¯å‰¥ç¦»å‡ºä¸€ä¸ªç›¸åŒå€¼ä½†ä¸åŒ…å«æ¢¯åº¦çš„Variableï¼Œä¸å‚ä¸è®¡ç®—å›¾çš„æ„å»º q_value = self.critic(state, pred_action).detach() # å…³é”®ï¼šdetach(),detach()åçš„æ¢¯åº¦ä¸ä¼šä¼ æ’­åˆ°actor actor_loss = -q_value.mean() + alpha * (pred_action ** 2).mean() self.actor_optim.zero_grad() actor_loss.backward() self.actor_optim.step() # ----------------- 3. ç›®æ ‡ç½‘ç»œè½¯æ›´æ–° ----------------- # æŠŠcriticçš„valueæ›´æ–°åˆ°target_critic for t_param, param in zip(self.critic_target.parameters(), self.critic.parameters()): t_param.data.copy_(self.tau * param.data + (1 - self.tau) * t_param.data)# --------------------------# ç¤ºä¾‹ä½¿ç”¨# --------------------------if __name__ == \"__main__\": # å‡è®¾åœºæ™¯ï¼š1è¾†è½¦ï¼Œ3ä¸ªè¾¹ç¼˜èŠ‚ç‚¹ vehicle_pos = [0.0, 0.0] vehicle_speed = [1.0, 0.0] # æ²¿xè½´ç§»åŠ¨ nodes_info = [ [10.0, 0.0, 5.0, 0.8], # èŠ‚ç‚¹1ï¼šæ­£å‰æ–¹ï¼Œé«˜ä¿¡ä»» [0.0, 5.0, 3.0, 0.3], # èŠ‚ç‚¹2ï¼šå·¦ä¾§ï¼Œä½ä¿¡ä»» [-5.0, 0.0, 4.0, 0.6] # èŠ‚ç‚¹3ï¼šåæ–¹ï¼Œä¸­ç­‰ä¿¡ä»» ] # åˆå§‹åŒ–ST-SAC state_dim = len(encode_state(vehicle_pos, vehicle_speed, nodes_info).squeeze(0)) action_dim = len(nodes_info) # æ¯ä¸ªåŠ¨ä½œç»´åº¦å¯¹åº”ä¸€ä¸ªèŠ‚ç‚¹çš„å¸è½½é€‰æ‹© agent = ST_SAC(state_dim, action_dim) # ç¤ºä¾‹è®­ç»ƒæ­¥éª¤ state = encode_state(vehicle_pos, vehicle_speed, nodes_info) for _ in range(100): # ç”¨åˆ°äº†actor action = agent.select_action(state, nodes_info) next_vehicle_pos = [vehicle_pos[0] + 0.1, vehicle_pos[1]] # æ¨¡æ‹Ÿç§»åŠ¨ next_state = encode_state(next_vehicle_pos, vehicle_speed, nodes_info) reward = -np.abs(action).mean() # ç¤ºä¾‹å¥–åŠ±ï¼šé¼“åŠ±é›†ä¸­å¸è½½ done = False agent.update(state, torch.FloatTensor(action).unsqueeze(0), torch.FloatTensor([reward]), next_state, done, vehicle_speed) state = next_state å’ŒPPOç®—æ³•è¿›è¡Œå¯¹æ¯”PPOåªæœ‰ä¸€ä¸ªactorå’Œä¸€ä¸ªcriticï¼Œæ‰€ä»¥ä»–ä¸æ˜¯é åœ¨çº¿ç½‘ç»œå’Œç›®æ ‡ç½‘ç»œä¹‹é—´å–æœ€å°å€¼æ¥çº¦æŸå˜åŒ–èŒƒå›´çš„ï¼Œè€Œæ˜¯ä½¿ç”¨è¿‘ç«¯çº¦æŸè£åˆ‡æ¥æ˜¾å¼çº¦æŸæ­¥é•¿ï¼Œä»è€Œæé«˜ç¨³å®šæ€§ã€‚PPOå¯ä»¥æ²¡æœ‰ç†µï¼Œé€šå¸¸ä¾èµ–åŸºæœ¬çš„éšæœºæ€§æˆ–é¢å¤–çš„æ¢ç´¢ç­–ç•¥","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"å¼ºåŒ–å­¦ä¹ ","slug":"å¼ºåŒ–å­¦ä¹ ","permalink":"http://gladiouszhang.github.io/tags/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/"}]},{"title":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬äºŒç« ","slug":"CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬äºŒç« ","date":"2025-03-02T05:39:06.000Z","updated":"2025-03-09T06:41:52.200Z","comments":true,"path":"2025/03/02/CMU-æ·±åº¦å­¦ä¹ ç³»ç»Ÿ-ç¬¬äºŒç« /","permalink":"http://gladiouszhang.github.io/2025/03/02/CMU-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%B3%BB%E7%BB%9F-%E7%AC%AC%E4%BA%8C%E7%AB%A0/","excerpt":"","text":"è¿™ç« æ˜¯ç”¨softmaxçš„ä¾‹å­æ¥å›é¡¾äº†MLçš„çŸ¥è¯†ç‚¹ã€‚ softmaxå›å½’åˆå«å¤šç±»é€»è¾‘å›å½’ï¼Œå°±æ˜¯å°†è¾“å…¥æ•°æ®è¿›è¡Œåˆ†ç±»ï¼Œé€šè¿‡softmaxå‡½æ•°å¾—åˆ°æ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚ è€Œè¿™æ ·çš„åˆ†ç±»é—®é¢˜ï¼Œæ˜¯é€šè¿‡å®ç°å‡†å¤‡è¿™æ ·ä¸€ä¸ªæ•°æ®é›†ï¼šåŒ…å«æ•°æ®å’Œæ•°æ®å¯¹åº”çš„æ ‡ç­¾ã€‚è®©æ¨¡å‹å­¦ä¹ æ•°æ®é›†å’Œæ ‡ç­¾çš„å¯¹åº”å…³ç³»ï¼Œè¿™æ ·çš„è¿‡ç¨‹å«åšç›‘ç£å­¦ä¹ ã€‚ é™¤äº†ç›‘ç£å­¦ä¹ ï¼Œè¿˜æœ‰ æ— ç›‘ç£å­¦ä¹  æ•°æ®æ²¡æœ‰æ ‡ç­¾ï¼Œæ¨¡å‹ä»æ— æ ‡ç­¾æ•°æ®ä¸­å‘ç°éšè—æ¨¡å¼æˆ–ç»“æ„ã€‚ å¦‚K-meansã€å±‚æ¬¡èšç±»ã€ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ åŠç›‘ç£å­¦ä¹ ï¼ˆSemi-Supervised Learningï¼‰ ç»“åˆå°‘é‡æœ‰æ ‡ç­¾æ•°æ®å’Œå¤§é‡æ— æ ‡ç­¾æ•°æ®è®­ç»ƒæ¨¡å‹ã€‚ é€‚ç”¨äºæ ‡æ³¨æˆæœ¬é«˜ï¼Œä½†æœªæ ‡æ³¨æ•°æ®ä¸°å¯Œï¼ˆå¦‚åŒ»å­¦å›¾åƒåˆ†æï¼‰ã€‚ å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learning, RLï¼‰ æ¨¡å‹é€šè¿‡ä¸ç¯å¢ƒäº¤äº’ï¼Œæ ¹æ®å¥–åŠ±ä¿¡å·è°ƒæ•´ç­–ç•¥ï¼Œç›®æ ‡æ˜¯æœ€å¤§åŒ–é•¿æœŸç´¯ç§¯å¥–åŠ±ã€‚ é€‚ç”¨äºåºåˆ—å†³ç­–é—®é¢˜ï¼ˆå¦‚æœºå™¨äººæ§åˆ¶ã€æ¸¸æˆAIï¼‰ã€‚ Q-learningã€æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆDQNï¼‰ã€ç­–ç•¥æ¢¯åº¦ï¼ˆPPOï¼‰ã€‚ è‡ªç›‘ç£å­¦ä¹ ï¼ˆSelf-Supervised Learningï¼‰ é€šè¿‡æ„é€ â€œä¼ªæ ‡ç­¾â€ä»æ— æ ‡ç­¾æ•°æ®ä¸­å­¦ä¹ ï¼Œå±äºæ— ç›‘ç£å­¦ä¹ çš„å­ç±»ã€‚ NLPä¸­çš„é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå¦‚BERTé€šè¿‡æ©ç é¢„æµ‹å­¦ä¹ ä¸Šä¸‹æ–‡ï¼‰ã€‚ å›¾åƒä¸­çš„å¯¹æ¯”å­¦ä¹ ï¼ˆå¦‚SimCLRé€šè¿‡å›¾åƒå¢å¼ºæ„é€ æ­£è´Ÿæ ·æœ¬å¯¹ï¼‰ã€‚ å¤šä»»åŠ¡å­¦ä¹ ï¼ˆMulti-Task Learningï¼‰ åŒæ—¶å­¦ä¹ å¤šä¸ªç›¸å…³ä»»åŠ¡ï¼Œå…±äº«éƒ¨åˆ†æ¨¡å‹å‚æ•°ä»¥æé«˜æ³›åŒ–èƒ½åŠ›ã€‚ ä¸€ä¸ªæ¨¡å‹åŒæ—¶å®Œæˆæ–‡æœ¬åˆ†ç±»å’Œå®ä½“è¯†åˆ«ã€‚ æ— è®ºæ˜¯æ€ä¹ˆæ ·çš„æœºå™¨å­¦ä¹ ï¼Œéƒ½ä¸€å®šä¼šåŒ…å«ä¸‰ä¸ªè¦ç´  hypothesis classï¼Œä¹Ÿå°±æ˜¯æ¨¡å‹çš„ç»“æ„ losså‡½æ•° ä¼˜åŒ–æ–¹æ³• æ¯”å¦‚kåˆ†ç±»é—®é¢˜ï¼Œè¾“å…¥æ•°å­—çš„å›¾åƒï¼Œè¾“å‡ºçš„æ˜¯æ¯ä¸ªæ•°å­—çš„ä¸€ç§å¯èƒ½æ€§ï¼ˆè¿™é‡Œè¿˜ä¸èƒ½è¯´æ˜¯æ¦‚ç‡ï¼Œå› ä¸ºä¸æ»¡è¶³æ¦‚ç‡çš„æ¡ä»¶ï¼‰ ä¸ºä»€ä¹ˆè¦ç”¨çŸ©é˜µï¼šæ•°å­¦ä¸Šæ›´ä¸¥è°¨ï¼ŒåŒæ—¶æœ‰åˆ©äºå¹¶è¡Œè®¡ç®—æé«˜æ•ˆç‡ã€‚ losså‡½æ•°æ˜¯ä¸ºäº†å¯¹æ¯”è¾“å‡ºçš„ç»“æœå’ŒåŸæœ¬æ ‡ç­¾ä¹‹é—´çš„å·®è·ã€‚ä¸€ä¸ªæœ€ç®€å•çš„losså‡½æ•°ï¼š ä½†æ˜¯è¿™ä¸ªå‡½æ•°å¹¶ä¸å¥½ï¼Œå› ä¸ºä¸å¯å¯¼ã€‚ è¿›ä¸€æ­¥æˆ‘ä»¬æŠŠä¸Šé¢æåˆ°çš„è¾“å‡ºçš„å¯èƒ½æ€§è½¬åŒ–ä¸ºæ¦‚ç‡ï¼Œè€Œè¿™ä¸€æ­¥å°±æ˜¯softmaxå‡½æ•°ï¼š å…¶ä¸­ å°±æ˜¯æ¯ä¸€ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚ä¹‹æ‰€ä»¥å«softmaxå›å½’åº”è¯¥ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªsoftmaxå‡½æ•°ã€‚ æ ¹æ®è¿™ä¸ªè½¬åŒ–åçš„æ¦‚ç‡ï¼Œå¯ä»¥è¿›ä¸€æ­¥å¾—åˆ°lossçš„è®¡ç®—å…¬å¼ï¼Œä¹Ÿå°±æ˜¯softmax lossæˆ–è€…å«åšäº¤å‰ç†µæŸå¤±ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨è´Ÿå¯¹æ•°ï¼Ÿ å…¶ä¸­åº”è¯¥æ˜¯å¯¹åº”xè¾“å…¥æ—¶ä¸ºyçš„æ¦‚ç‡å€¼ï¼Œkæ˜¯kåˆ†ç±»çš„k ç›®å‰å¸¸ç”¨çš„ä¼˜åŒ–æ–¹æ³•æ˜¯SGDï¼Œå°±æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ï¼Œå› ä¸ºå¦‚æœå¯¹å…¨ä½“å¯¹è±¡è¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼Œç©ºé—´å¤ªå¤§äº†ã€‚SGDæ˜¯è¿›è¡Œå¤šè½®ï¼Œæ¯æ¬¡æŠ½å–ä¸€å®šæ ·æœ¬æ¥è¿›è¡Œæ›´æ–°ã€‚","categories":[],"tags":[{"name":"AI Infra","slug":"AI-Infra","permalink":"http://gladiouszhang.github.io/tags/AI-Infra/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"higheråº“åœ¨å…ƒï¼ˆå¼ºåŒ–ï¼‰å­¦ä¹ ä¸­çš„ä½¿ç”¨","slug":"higheråº“åœ¨å…ƒï¼ˆå¼ºåŒ–ï¼‰å­¦ä¹ ä¸­çš„ä½¿ç”¨","date":"2024-11-11T06:28:49.000Z","updated":"2024-11-11T08:59:49.581Z","comments":true,"path":"2024/11/11/higheråº“åœ¨å…ƒï¼ˆå¼ºåŒ–ï¼‰å­¦ä¹ ä¸­çš„ä½¿ç”¨/","permalink":"http://gladiouszhang.github.io/2024/11/11/higher%E5%BA%93%E5%9C%A8%E5%85%83%EF%BC%88%E5%BC%BA%E5%8C%96%EF%BC%89%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"higher.innerloop_ctxæ˜¯higheråº“çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç”¨äºåˆ›å»ºå†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰çš„ä¸Šä¸‹æ–‡ï¼Œå†…éƒ¨å¾ªç¯é€šå¸¸ç”¨äºå…ƒå­¦ä¹ åœºæ™¯ï¼Œå…¶ä¸­åœ¨æ¨¡å‹å‚æ•°æ›´æ–°çš„å†…éƒ¨å¾ªç¯ä¸­è¿›è¡Œä¸€äº›é¢å¤–çš„æ“ä½œã€‚ 12higher.innerloop_ctx(model, opt, device=None, copy_initial_weights=True, override=None, track_higher_grads=True) ç¬¬ä¸€ä¸ªå‚æ•°modelæ˜¯éœ€è¦è¿›è¡Œå†…éƒ¨å¾ªç¯çš„æ¨¡å‹ï¼Œé€šå¸¸æ˜¯ä½ çš„å…ƒæ¨¡å‹ã€‚è¿™ä¸ªå†…éƒ¨å¾ªç¯åªæ˜¯ä½œä¸ºä¸´æ—¶æ›´æ–°ï¼Œç»“æŸå†…éƒ¨å¾ªç¯åæ›´æ–°å…ƒæ¨¡å‹çœŸæ­£çš„å‚æ•°ã€‚ ç¬¬äºŒä¸ªå‚æ•°optæ˜¯ä¼˜åŒ–å™¨ï¼Œè¿™æ˜¯ä½ ç”¨æ¥æ›´æ–°æ¨¡å‹å‚æ•°çš„ä¼˜åŒ–å™¨ ç¬¬ä¸‰ä¸ªå‚æ•°copy_initial_weightsæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œcopy_initial_weights=True çš„ä½œç”¨æ˜¯åœ¨è¿›å…¥å†…éƒ¨å¾ªç¯ä¸Šä¸‹æ–‡æ—¶ï¼Œä»…ä»…åœ¨ä¸€å¼€å§‹å°† model çš„å‚æ•°æ‹·è´ä¸€ä»½åˆ° fmodel ä¸­ã€‚è€Œåœ¨ä¸Šä¸‹æ–‡æœŸé—´çš„å†…éƒ¨å¾ªç¯ä¸­ï¼Œfmodel çš„å‚æ•°ä¼šæŒç»­ç´¯ç§¯æ›´æ–°ï¼Œè€Œä¸ä¼šåœ¨æ¯æ¬¡å¾ªç¯å‰è¢«é‡æ–°åˆå§‹åŒ–ï¼›å½“ copy_initial_weights=False æ—¶ï¼Œhigher.innerloop_ctx ä¸ä¼šåœ¨åˆ›å»º fmodel æ—¶å¤åˆ¶ model çš„å‚æ•°ã€‚ç›¸åï¼Œfmodel å°†ç›´æ¥å¼•ç”¨ model çš„å‚æ•°ã€‚è¿™æ„å‘³ç€åœ¨å†…éƒ¨å¾ªç¯ä¸­å¯¹ fmodel çš„ä»»ä½•æ›´æ–°éƒ½ä¼šç›´æ¥å½±å“åˆ° model çš„å‚æ•°ã€‚ ç¬¬å››ä¸ªå‚æ•°overrideæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œä¾‹å¦‚override={â€˜lrâ€™:lr_tensor, â€œmomentumâ€™: momentum_tensor}ï¼Œç”¨äºæŒ‡å®šåœ¨å†…éƒ¨å¾ªç¯æœŸé—´è¦†ç›–å…ƒæ¨¡å‹ä¼˜åŒ–å™¨ï¼ˆå³ç¬¬äºŒä¸ªå‚æ•°optï¼‰çš„å‚æ•°ï¼Œå³ç»™å†…å¤–è¿›è¡Œä¸€ä¸ªéš”ç¦»ã€‚ ç¬¬äº”ä¸ªå‚æ•°track_higher_gradsæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºè·Ÿè¸ªæ›´é«˜é˜¶çš„æ¢¯åº¦ï¼Œå¦‚æœæ˜¯Trueï¼Œåˆ™å†…éƒ¨å¾ªç¯ä¸­è®¡ç®—çš„æ¢¯åº¦å°†è¢«è·Ÿè¸ªä»¥æ”¯æŒé«˜é˜¶çš„æ¢¯åº¦è®¡ç®—ï¼Œè¿™å¯¹äºå®ç°å…ƒå­¦ä¹ ç®—æ³•ï¼ˆä¾‹å¦‚ MAMLï¼‰æ˜¯å¿…è¦çš„ï¼Œå› ä¸º MAML éœ€è¦è®¡ç®—â€œå…³äºåˆå§‹å‚æ•°çš„æ¢¯åº¦çš„æ¢¯åº¦â€ã€‚å¦‚æœè®¾ç½®ä¸ºFalseï¼Œåˆ™ä¸ä¼šè·Ÿè¸ªé«˜é˜¶æ¢¯åº¦ã€‚ åœ¨ MAML ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ç»„åˆå§‹å‚æ•°ï¼Œä½¿æ¨¡å‹èƒ½åœ¨ä¸åŒä»»åŠ¡çš„å†…éƒ¨å¾ªç¯ä¸­å¿«é€Ÿé€‚åº”ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼ŒMAML çš„å¤–éƒ¨å¾ªç¯éœ€è¦å¯¹å†…éƒ¨å¾ªç¯çš„æ›´æ–°è¿›è¡Œå¾®åˆ†ï¼Œè®¡ç®—å‡ºé«˜é˜¶æ¢¯åº¦ã€‚è¿™ä½¿å¾—å…ƒæ¨¡å‹èƒ½å¤Ÿé€æ­¥ä¼˜åŒ–å…¶åˆå§‹å‚æ•°ï¼Œä»¥ä¾¿åœ¨æœªæ¥ä»»åŠ¡ä¸Šæ›´å¿«åœ°é€‚åº”ã€‚ gptç»™å‡ºäº†ä¸€ä¸ªåŸºäºhigerçš„å¼ºåŒ–å­¦ä¹ ç¤ºä¾‹ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475import torchimport torch.nn as nnimport torch.optim as optimimport higher# å®šä¹‰ä¸€ä¸ªç®€å•çš„çº¿æ€§æ¨¡å‹class SimpleModel(nn.Module): def __init__(self): super(SimpleModel, self).__init__() self.linear = nn.Linear(1, 1) def forward(self, x): return self.linear(x)# ç”Ÿæˆæ¨¡æ‹Ÿä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„çº¿æ€§å…³ç³»def generate_task(): # éšæœºç”Ÿæˆæ–œç‡å’Œåç½® slope = torch.randn(1) intercept = torch.randn(1) # éšæœºç”Ÿæˆ5ä¸ªè®­ç»ƒæ ·æœ¬ x_train = torch.rand(5, 1) y_train = slope * x_train + intercept # éšæœºç”Ÿæˆ5ä¸ªæµ‹è¯•æ ·æœ¬ x_test = torch.rand(5, 1) y_test = slope * x_test + intercept return (x_train, y_train), (x_test, y_test)# MAMLçš„æ ¸å¿ƒå‚æ•°meta_lr = 0.001 # å¤–éƒ¨å¾ªç¯å­¦ä¹ ç‡inner_lr = 0.01 # å†…éƒ¨å¾ªç¯å­¦ä¹ ç‡inner_steps = 1 # æ¯ä¸ªä»»åŠ¡çš„å†…éƒ¨å¾ªç¯æ­¥æ•°meta_batch_size = 4 # æ¯æ¬¡å…ƒæ›´æ–°çš„ä»»åŠ¡æ•°é‡# åˆ›å»ºæ¨¡å‹å’Œå…ƒå­¦ä¹ ä¼˜åŒ–å™¨model = SimpleModel()meta_optimizer = optim.Adam(model.parameters(), lr=meta_lr)# å…ƒå­¦ä¹ è®­ç»ƒè¿‡ç¨‹for meta_step in range(1000): # æ€»çš„å…ƒå­¦ä¹ æ­¥éª¤æ•° meta_optimizer.zero_grad() meta_loss = 0 # æ¯æ¬¡ä»ä¸åŒçš„ä»»åŠ¡ä¸­é‡‡æ · for _ in range(meta_batch_size): # ç”Ÿæˆä»»åŠ¡çš„è®­ç»ƒå’Œæµ‹è¯•æ•°æ® (x_train, y_train), (x_test, y_test) = generate_task() # ä½¿ç”¨ higher.innerloop_ctx åˆ›å»ºå†…éƒ¨å¾ªç¯ä¸Šä¸‹æ–‡ with higher.innerloop_ctx(model, opt=optim.SGD(model.parameters(), lr=inner_lr), copy_initial_weights=True) as (fmodel, diffopt): # å†…éƒ¨å¾ªç¯æ›´æ–°ï¼šåœ¨ä»»åŠ¡è®­ç»ƒæ•°æ®ä¸Šè¿›è¡Œ inner_steps æ¬¡æ›´æ–° for _ in range(inner_steps): train_pred = fmodel(x_train) train_loss = nn.functional.mse_loss(train_pred, y_train) diffopt.step(train_loss) # è®¡ç®—ä»»åŠ¡éªŒè¯æŸå¤±ï¼Œç”¨äºå¤–éƒ¨å¾ªç¯çš„æ›´æ–° test_pred = fmodel(x_test) test_loss = nn.functional.mse_loss(test_pred, y_test) # ç´¯åŠ æ‰€æœ‰ä»»åŠ¡çš„éªŒè¯æŸå¤± meta_loss += test_loss # è®¡ç®—æ¯ä¸ªä»»åŠ¡çš„å¹³å‡éªŒè¯æŸå¤±ï¼Œå¹¶å¯¹å…ƒæ¨¡å‹è¿›è¡Œåå‘ä¼ æ’­ meta_loss /= meta_batch_size meta_loss.backward() meta_optimizer.step() if meta_step % 100 == 0: print(f&quot;Meta Step &#123;meta_step&#125;, Meta Loss: &#123;meta_loss.item()&#125;&quot;)print(&quot;Meta-learning finished!&quot;) æˆ‘è®¤ä¸ºæ ¸å¿ƒæ˜¯ï¼š åœ¨å¤–éƒ¨å®šä¹‰ä¸€ä¸ªå…ƒæ¨¡å‹å’Œä¼˜åŒ–å™¨ï¼Œå®šä¹‰å…ƒå¼ºåŒ–å­¦ä¹ å¤–å¾ªç¯çš„è®­ç»ƒæ¬¡æ•°ã€‚ å†å®šä¹‰éœ€è¦å¤šå°‘ä¸ªä¸åŒçš„ä»»åŠ¡ã€‚ å¯¹äºæ¯ä¸ªä¸åŒçš„ä»»åŠ¡ï¼Œå†è¿›è¡Œå¤šæ¬¡å†…å¾ªç¯ã€‚ åœ¨å†…å¾ªç¯å†…éƒ¨å€ŸåŠ©å…ƒæ¨¡å‹å’Œä¼˜åŒ–å™¨ï¼ˆå¯ä»¥è¦†ç›–éƒ¨åˆ†å‚æ•°ï¼‰è¿›è¡Œå¤šè½®è®­ç»ƒã€‚ æ¯è½®è®­ç»ƒç»“æŸåè¿›è¡Œå‚æ•°æ›´æ–° å†…å¾ªç¯ç»“æŸååœ¨éªŒè¯é›†ä¸Šè¿›è¡ŒéªŒè¯ï¼Œå¾—åˆ°loss ç´¯è®¡æ‰€æœ‰çš„loss å¯¹å…ƒæ¨¡å‹ä½¿ç”¨å¹³å‡åçš„lossè¿›è¡Œæ›´æ–°","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"é˜…è¯»MapReduce","slug":"é˜…è¯»MapReduce","date":"2024-11-07T14:49:34.000Z","updated":"2024-11-17T09:38:50.337Z","comments":true,"path":"2024/11/07/é˜…è¯»MapReduce/","permalink":"http://gladiouszhang.github.io/2024/11/07/%E9%98%85%E8%AF%BBMapReduce/","excerpt":"","text":"æ‘˜è¦ ä»‹ç» ç¼–ç¨‹æ¨¡å‹ ä¾‹å­ ç±»å‹ æ›´å¤šä¾‹å­ åˆ†å¸ƒå¼grepï¼ˆæŸ¥æ‰¾æŸä¸ªå•è¯ï¼‰ URLè®¿é—®é¢‘æ¬¡ç»Ÿè®¡ åå‘webè¿æ¥å›¾ æ¯ä¸ªä¸»æœºçš„è¯å‘é‡ å€’æ’ç´¢å¼• åˆ†å¸ƒå¼æ’åº å®ç° æ‰§è¡Œæ¦‚è¿° Masterçš„æ•°æ®ç»“æ„ é”™è¯¯å®¹å¿ workerå¤±æ•ˆï¼ˆfailureï¼‰ masterå¤±æ•ˆ åœ¨æ•…éšœæƒ…å†µä¸‹çš„è¯­ä¹‰ï¼ˆï¼Ÿï¼‰ æœ¬åœ°æ€§ ä»»åŠ¡ç²’åº¦ å¤‡ä»½ä»»åŠ¡ æ”¹è‰¯ åˆ†åŒºå‡½æ•°ï¼ˆPartitionï¼‰ é¡ºåºä¿è¯ åˆå¹¶å‡½æ•° è¾“å…¥è¾“å‡ºç±»å‹ å‰¯ä½œç”¨ è·³è¿‡åè®°å½• æœ¬åœ°æ‰§è¡Œ çŠ¶æ€ä¿¡æ¯ è®¡æ•°å™¨ æ€§èƒ½ é›†ç¾¤é…ç½® Grepæ“ä½œ æ’åºæ“ä½œ å¤‡ä»½ä»»åŠ¡çš„å½±å“ æœºå™¨å¤±è´¥çš„å½±å“ å…¨éƒ¨è¯»äº†ä¸€éï¼Œé™¤äº†å®è·µä»¥å¤–éƒ½åšäº†ç¬”è®° æ‘˜è¦mapï¼šç”¨æ¥å¤„ç†é”®å€¼å¯¹æ¥ç”Ÿæˆä¸€ç»„ä¸­é—´é”®å€¼å¯¹ reduceï¼šåˆå¹¶åŒä¸€ç›¸åŒä¸­é—´é”®ç›¸å…³è”çš„ä¸­é—´å€¼ ä»‹ç»ç”¨é€”ä¸¾ä¾‹ï¼šå€’æ’ç´¢å¼•ã€webæ–‡æ¡£çš„å›¾å½¢åŒ–è¡¨ç¤ºç­‰ã€‚ æ“ä½œç®€å•ï¼Œä½†æ˜¯æ•°æ®é‡å¤§ï¼Œéœ€è¦å¤šå°æœºå™¨å¹¶è¡Œè®¡ç®—ã€‚ é—®é¢˜ï¼šå¦‚ä½•å¹¶è¡ŒåŒ–è®¡ç®—ã€åˆ†å‘æ•°æ®ã€å¤„ç†æ•…éšœ ä½¿ç”¨ç”¨æˆ·æŒ‡å®šçš„mapå’Œreduceæ“ä½œï¼Œç”¨é‡æ–°æ‰§è¡Œä½œä¸ºå®¹é”™çš„æœºåˆ¶ ç¼–ç¨‹æ¨¡å‹mapå‡½æ•°ï¼šç”±ç”¨æˆ·ç¼–å†™ï¼Œè¾“å…¥ä¸€ä¸ªå¯¹ï¼Œç„¶åè¾“å‡ºä¸€ç»„ä¸­é—´é”®å€¼å¯¹ã€‚MapReduceåº“ä¼šæŠŠæ‰€æœ‰å…·æœ‰ç›¸åŒkeyçš„ä¸­é—´é”®å€¼å¯¹ç»„åˆèµ·æ¥ï¼Œç„¶åå‘ç»™Reduceå‡½æ•°å¤„ç†ã€‚ reduceå‡½æ•°ï¼šä¹Ÿæ˜¯ç”±ç”¨æˆ·ç¼–å†™ã€‚æ¥å—ä¸­é—´é”® I å’Œè¯¥é”®çš„ä¸€ç»„å€¼ã€‚å®ƒå°†è¿™äº›å€¼åˆå¹¶åœ¨ä¸€èµ·ä»¥å½¢æˆå¯èƒ½æ•°é‡æ›´å°çš„ä¸€ç»„å€¼ã€‚é€šå¸¸reduceæ“ä½œåªäº§ç”Ÿ0æˆ–1ä¸ªå€¼ã€‚ä¸­é—´å€¼é€šè¿‡è¿­ä»£å™¨æä¾›ç»™ç”¨æˆ·çš„ Reduce å‡½æ•°ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå¤„ç†å¤ªå¤§è€Œæ— æ³•æ”¾å…¥å†…å­˜çš„å€¼åˆ—è¡¨ã€‚ ä¾‹å­ç»Ÿè®¡å•è¯è¯é¢‘ï¼š mapæŠŠæ‰€æœ‰çš„å•è¯ä½œä¸ºkeyï¼Œvalueåˆ†åˆ«è®¾ä¸º1 reduceæŠŠç›¸åŒkeyçš„valueç›¸åŠ ï¼Œè¾“å‡ºç»“æœ ç”¨æˆ·ç¼–å†™å…·ä½“çš„ä»£ç å®ç°å¡«å……åˆ°mapreduce specificationå¯¹è±¡ä¸­ï¼Œç„¶åæŠŠç”¨æˆ·çš„ä»£ç å’ŒMapReduceåº“é“¾æ¥åœ¨ä¸€èµ·å®ç°ã€‚ ç±»å‹map å’Œ reduce å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºç±»å‹åœ¨æ¦‚å¿µä¸Šæ˜¯ä¸åŒçš„ï¼Œä½†åœ¨ C++ å®ç°ä¸­ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ¥ç»Ÿä¸€ä¼ é€’æ•°æ®ã€‚ ç”¨æˆ·éœ€è¦åœ¨ä»£ç ä¸­å¤„ç†å­—ç¬¦ä¸²å’Œå®é™…æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚ æ›´å¤šä¾‹å­åˆ†å¸ƒå¼grepï¼ˆæŸ¥æ‰¾æŸä¸ªå•è¯ï¼‰å¦‚æœæŸä¸€è¡Œæ»¡è¶³æä¾›çš„èŒƒå¼ï¼Œmapå‡½æ•°å°±æŠŠå®ƒå‘å‡ºã€‚reduceåªæ˜¯æŠŠå®ƒæ‹·è´ä¸€éã€‚ URLè®¿é—®é¢‘æ¬¡ç»Ÿè®¡mapå‡½æ•°ç»Ÿè®¡ç½‘ç«™è¯·æ±‚æ—¥å¿—ï¼Œå¹¶è¾“å‡ºä¸ºï¼ŒreduceæŠŠåé¢çš„æ•°å€¼åŠ èµ·æ¥ åå‘webè¿æ¥å›¾åœ¨resourceç•Œé¢æ‰¾åˆ°çš„targetçš„urlï¼Œç»è¿‡mapå‡½æ•°ï¼Œè¾“å‡ºå¯¹ã€‚reduceæŠŠresourceæ•´ç†æˆlistï¼Œè¾“å‡º æ¯ä¸ªä¸»æœºçš„è¯å‘é‡è¯å‘é‡æ€»ç»“äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸­æœ€é‡è¦çš„å•è¯çš„å‡ºç°é¢‘ç‡ï¼Œæ˜¯ç”±ç»„æˆçš„åˆ—è¡¨ã€‚mapä»è¾“å…¥æ–‡ä»¶ä¸­è¯»å…¥hostnameï¼Œè¾“å‡ºã€‚reduceå‡½æ•°å°†æ¯ä¸€ä¸ªhostnameçš„term vectoråˆå¹¶å¹¶è¾“å‡ºã€‚ å€’æ’ç´¢å¼•å°±æ˜¯è¯´æ‰¾åˆ°å•è¯çš„ä½ç½®ã€‚mapè¾“å‡ºï¼ŒreduceæŠŠæ–‡ä»¶idåˆæˆä¸€ä¸ªlist åˆ†å¸ƒå¼æ’åºmapå‡½æ•°ä»æ¯ä¸€ä¸ªè®°å½•ä¸­æå–å‡ºkeyï¼Œè¾“å‡ºå¯¹ï¼Œreduceå•¥ä¹Ÿä¸å˜ã€‚æ’åºå–å†³äºåé¢æåˆ°çš„åˆ†åŒºå·¥å…·å’Œæ’åºå±æ€§ï¼ˆç¨åæ¥å¡«å‘ï¼‰ å®ç°MapReduceæ¥å£æœ‰è®¸å¤šä¸åŒçš„å®ç°ã€‚æ­£ç¡®çš„é€‰æ‹©å–å†³äºç¯å¢ƒã€‚è¿™èŠ‚æè¿°äº†ä¸€ä¸ªé’ˆå¯¹Googleå¹¿æ³›ä½¿ç”¨çš„è®¡ç®—ç¯å¢ƒçš„å®ç°:ç”¨äº¤æ¢å¼ä»¥å¤ªç½‘è¿æ¥åœ¨ä¸€èµ·çš„å¤§å‹å•†ç”¨PCé›†ç¾¤ã€‚ æ‰§è¡Œæ¦‚è¿°é€šè¿‡å°†è¾“å…¥æ•°æ®è‡ªåŠ¨åˆ’åˆ†ä¸ºä¸€ç»„Mä¸ªéƒ¨åˆ†ï¼Œmapå‡½æ•°è°ƒç”¨åˆ†å¸ƒåœ¨å¤šå°æœºå™¨ä¸Šã€‚è¾“å…¥æ‹†åˆ†å¯ä»¥ç”±ä¸åŒçš„æœºå™¨å¹¶è¡Œå¤„ç†ã€‚é€šè¿‡ä½¿ç”¨åˆ†åŒºå‡½æ•°(ä¾‹å¦‚ï¼Œhash(key) mod R)å°†ä¸­é—´å¯†é’¥ç©ºé—´åˆ’åˆ†æˆRä¸ªéƒ¨åˆ†ï¼Œæ¥åˆ†å¸ƒReduceè°ƒç”¨ã€‚åˆ†åŒºæ•°é‡(R)å’Œåˆ†åŒºå‡½æ•°ç”±ç”¨æˆ·æŒ‡å®šã€‚ MapReduceåº“é¦–å…ˆå°†è¾“å…¥æ–‡ä»¶åˆ†æˆMæ®µï¼Œæ¯æ®µé€šå¸¸16MB-64MBï¼Œç„¶ååœ¨é›†ç¾¤çš„æœºå™¨ä¸Šå¼€å¯ç¨‹åºçš„è®¸å¤šå‰¯æœ¬ï¼ˆå›¾ä¸­forkæˆworkerå’Œmasterï¼‰ã€‚ å…¶ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å‰¯æœ¬å«masterï¼Œå…¶ä»–çš„éƒ½æ˜¯è¢«masteråˆ†é…å·¥ä½œçš„workerã€‚æœ‰Mä¸ªæ˜ å°„ä»»åŠ¡å’ŒRä¸ªå½’çº¦ä»»åŠ¡è¦åˆ†é…ã€‚masteræŒ‘é€‰ç©ºé—²çš„workeræ¥åˆ†é…ä¸€ä¸ªmapä»»åŠ¡æˆ–è€…ä¸€ä¸ªreduceä»»åŠ¡ è¢«åˆ†é…äº†mapçš„workerè¯»å–ç›¸åº”è¾“å…¥åˆ†å‰²çš„å†…å®¹ã€‚å®ƒä»è¾“å…¥æ•°æ®ä¸­è§£æå‡ºé”®/å€¼å¯¹ï¼Œå¹¶å°†æ¯ä¸€å¯¹ä¼ é€’ç»™ç”¨æˆ·å®šä¹‰çš„reduceå‡½æ•°ã€‚Mapå‡½æ•°äº§ç”Ÿçš„ä¸­é—´é”®/å€¼å¯¹åœ¨å†…å­˜ä¸­ç¼“å†²ã€‚ ç¼“å­˜çš„pairè¢«å‘¨æœŸæ€§çš„å†™åˆ°æœ¬åœ°ç£ç›˜ã€‚ç”±åˆ†åŒºå‡½æ•°ï¼ˆå‰é¢æåˆ°çš„hashå–ä½™ï¼‰åˆ’åˆ†æˆRä¸ªåŒºåŸŸã€‚è¿™äº›ç¼“å†²å¯¹åœ¨æœ¬åœ°ç£ç›˜ä¸Šçš„ä½ç½®è¢«ä¼ é€’å›masterï¼Œä¸»è®¾å¤‡è´Ÿè´£å°†è¿™äº›ä½ç½®è½¬å‘ç»™reduceå·¥ä½œå™¨ã€‚ å½“materé€šçŸ¥reduce workerè¿™äº›ä½ç½®æ—¶ï¼Œå®ƒä½¿ç”¨rpcä»map workersçš„æœ¬åœ°ç£ç›˜è¯»å–ç¼“å†²æ•°æ®ã€‚å½“reduce workerè¯»å–äº†æ‰€æœ‰çš„ä¸­é—´æ•°æ®åï¼Œå®ƒä¼šæŒ‰ç…§ä¸­é—´é”®å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œä»¥ä¾¿å°†æ‰€æœ‰å‡ºç°çš„ç›¸åŒé”®ç»„åˆåœ¨ä¸€èµ·ã€‚éœ€è¦è¿›è¡Œæ’åºæ˜¯å› ä¸ºé€šå¸¸è®¸å¤šä¸åŒçš„é”®æ˜ å°„åˆ°åŒä¸€ä¸ªreduceä»»åŠ¡ï¼Œä¸ºäº†ç¡®ä¿ç›¸åŒçš„é”®çš„æ‰€æœ‰å€¼è¢«åˆ†ç»„åœ¨ä¸€èµ·ï¼Œè¿™æœ‰åŠ©äº Reduce é˜¶æ®µå¯¹è¿™äº›é”®è¿›è¡Œé›†ä¸­å¤„ç†ã€‚å¦‚æœä¸­é—´æ•°æ®é‡å¤ªå¤§ï¼Œä¸é€‚åˆå†…å­˜ï¼Œå°±ä½¿ç”¨å¤–éƒ¨æ’åºï¼ˆï¼Ÿï¼‰ã€‚ å¦‚æœä¸­é—´æ•°æ®é‡éå¸¸å¤§ï¼Œæ— æ³•å®Œå…¨æ”¾å…¥å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨å¤–éƒ¨æ’åºï¼ˆExternal Sortï¼‰ã€‚å¤–éƒ¨æ’åº æ˜¯ä¸€ç§ç”¨äºå¤„ç†è¶…å¤§è§„æ¨¡æ•°æ®çš„æ’åºæ–¹æ³•ï¼Œå› ä¸ºè¿™äº›æ•°æ®å¤ªå¤§è€Œæ— æ³•ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å¤–éƒ¨æ’åºçš„å…¸å‹åšæ³•æ˜¯å°†æ•°æ®åˆ†å—å¤„ç†ï¼Œå°†æ¯ä¸ªå—å•ç‹¬æ’åºåå†™å›ç£ç›˜ï¼Œæœ€åå°†æ‰€æœ‰å·²æ’åºçš„å—åˆå¹¶èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæœ€ç»ˆæœ‰åºçš„æ•°æ®é›†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒReduce èŠ‚ç‚¹ä¼šå°†æ— æ³•å®¹çº³åœ¨å†…å­˜ä¸­çš„æ•°æ®åˆ†æ‰¹æ¬¡åœ°è¿›è¡Œæ’åºå’Œåˆå¹¶ï¼Œç›´åˆ°æ‰€æœ‰æ•°æ®éƒ½å·²ç»æ’åºå®Œæˆã€‚è¿™ç§æ’åºç­–ç•¥å¯¹äºå¤„ç†è¶…å¤§è§„æ¨¡æ•°æ®éå¸¸æœ‰æ•ˆã€‚ reduce workeråœ¨æ’å¥½åºçš„ä¸­é—´æ•°æ®ä¸Šéå†ï¼Œå¯¹äºé‡åˆ°çš„æ¯ä¸ªä¸­é—´é”®ï¼ˆå”¯ä¸€çš„ï¼Œä¸ä¼šé‡å¤å‘ï¼ï¼‰ï¼Œå®ƒä¼šæŠŠé”®å’Œå€¼éƒ½å‘ç»™reduceå‡½æ•°ã€‚reduceå‡½æ•°çš„è¾“å‡ºè¢«é™„åŠ åˆ°è¿™ä¸ªReduceåˆ†åŒºçš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ä¸­ã€‚ å½“æ‰€æœ‰çš„mapä»»åŠ¡å’Œreduceä»»åŠ¡å®Œæˆåï¼Œä¸»æœºå”¤é†’ç”¨æˆ·ç¨‹åºã€‚æ­¤æ—¶ï¼Œç”¨æˆ·ç¨‹åºä¸­çš„MapReduceè°ƒç”¨è¿”å›åˆ°ç”¨æˆ·ä»£ç  æœ€åç”¨æˆ·å¾—åˆ°Rä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œä½†æ˜¯ä¸ä¸€å®šä¼šåˆå¹¶ï¼Œå› ä¸ºä¼šä½œä¸ºä¸‹ä¸€ä¸ªè¾“å…¥ï¼ˆå¯èƒ½ï¼‰ Masterçš„æ•°æ®ç»“æ„masterä¿å­˜çš„æ•°æ®ç»“æ„ï¼šå¯¹äºæ¯ä¸ªmapå’Œreduceä»»åŠ¡ï¼Œmasterä¿å­˜å…¶çŠ¶æ€ï¼ˆç©ºé—²ã€è¿›è¡Œä¸­ã€å®Œæˆï¼‰å’Œéç©ºé—²çŠ¶æ€ä»»åŠ¡çš„workerçš„èº«ä»½ã€‚ masteræ˜¯ç”¨æ¥è®²mapä»»åŠ¡äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶ä¼ æ’­åˆ°reduceä»»åŠ¡çš„é€šé“ã€‚æ‰€ä»¥masterå­˜ç€å·²å®Œæˆçš„mapä»»åŠ¡çš„ä¸­é—´æ–‡ä»¶çš„ä½ç½®å’Œå¤§å°ï¼Œå¦‚æœæœ‰æ–°çš„mapä»»åŠ¡å®Œæˆä¼šç»§ç»­æ›´æ–°ï¼Œå¹¶ä¸”ç”¨å¢é‡çš„æ–¹å¼æ¨é€åˆ°æ­£åœ¨æ‰§è¡Œreduceä»»åŠ¡çš„workerã€‚ é”™è¯¯å®¹å¿workerå¤±æ•ˆï¼ˆfailureï¼‰masteré—´æ­‡æ€§ping workerã€‚å¦‚æœä¸€æ®µæ—¶é—´workeræ²¡å›å°±æ˜¯æŒ‚äº†ã€‚æ‰€æœ‰åˆ†åˆ°è¿™ä¸ªworkerçš„mapä»»åŠ¡éƒ½ä¼šé‡æ–°å¬å›æ ‡è®°ä¸ºç©ºé—²çŠ¶æ€ï¼Œè¿›è¡Œé‡æ–°è°ƒåº¦ã€‚reduceä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚å°±ç®—æ˜¯å·²å®Œæˆçš„mapä»»åŠ¡ï¼Œä¹Ÿä¼šé‡æ–°æ‰§è¡Œï¼Œå› ä¸ºä»–ä»¬çš„mapä¸­é—´ç»“æœåœ¨æŒ‚äº†çš„workerä¸Šã€‚å®Œæˆçš„reduceä»»åŠ¡ä¸éœ€è¦é‡æ–°æ‰§è¡Œï¼Œå› ä¸ºä»–ä»¬è¾“å‡ºå­˜å‚¨åœ¨å…¨å±€æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ AæŒ‚äº†ä¹‹åæŠŠmapåˆ†ç»™Bæ—¶ï¼Œæ‰€æœ‰çš„reduce workeréƒ½ä¼šæ”¶åˆ°è¿™æ¬¡AåŸæœ¬çš„å·¥ä½œæ‰§è¡Œçš„é€šçŸ¥ï¼ˆå› ä¸ºä¸çŸ¥é“è¿™ä¸ªä»»åŠ¡åˆ†ç»™äº†å“ªä¸ªreduce workerï¼Œè®©æ‰€æœ‰äººéƒ½çŸ¥é“è¦æ¢ä¸ªåœ°æ–¹æ‰¾ï¼‰ã€‚ mapreduceèƒ½å¤Ÿå®¹å¿å¤§è§„æ¨¡çš„wokeræŒ‚æ‰ã€‚ masterå¤±æ•ˆä¸»èŠ‚ç‚¹å‘¨æœŸæ€§çš„å†™masteræ•°æ®ç»“æ„çš„checkpointsã€‚masteræŒ‚äº†çš„è¯å°±ä»æœ€åä¸€ä¸ªcheckpointå¼€å¯ä¸€ä¸ªå‰¯æœ¬ã€‚ä½†å› ä¸ºåªæœ‰ä¸€ä¸ªmasterï¼Œä¸å¤ªå¯èƒ½æ•…éšœã€‚æ‰€ä»¥å¦‚æœmasteræ•…éšœçš„è¯ä¼šç»ˆæ­¢mapreduceã€‚å¦‚æœéœ€è¦ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ£€æŸ¥å¹¶é‡è¯•MapReduceæ“ä½œã€‚ å±äºæ˜¯æŠ€æœ¯ä¸Šå¯ä»¥åšä½†æ˜¯æ²¡å¿…è¦ åœ¨æ•…éšœæƒ…å†µä¸‹çš„è¯­ä¹‰ï¼ˆï¼Ÿï¼‰ ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœæ—¶ï¼Œè®¡ç®—ç¨‹åºæ‰€äº§ç”Ÿçš„è¡Œä¸ºå’Œç»“æœçš„å®šä¹‰ã€‚å®ƒæ¢è®¨çš„æ˜¯ï¼Œç³»ç»Ÿä¸­æŸäº›ç»„ä»¶ï¼ˆæ¯”å¦‚æŸäº›èŠ‚ç‚¹æˆ–ä»»åŠ¡ï¼‰å¦‚æœå‡ºç°æ•…éšœï¼Œæ•´ä¸ªç³»ç»Ÿåœ¨å¤„ç†ä»»åŠ¡æ—¶ä¾ç„¶è¦ä¿è¯çš„ç»“æœçš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚ å½“ç”¨æˆ·æä¾›çš„ map å’Œ reduce æ“ä½œæ˜¯è¾“å…¥å€¼çš„ç¡®å®šæ€§å‡½æ•°æ—¶ï¼Œmapreduceä¼šç”Ÿæˆä¸ä¸å‘ç”Ÿæ•…éšœçš„é¡ºåºæ‰§è¡Œæ•´ä¸ªç¨‹åºæ—¶ç›¸åŒçš„è¾“å‡ºã€‚ï¼ˆå°±æ˜¯è¯´æ•…éšœæƒ…å†µä¸‹ç»“æœä¾ç„¶æ˜¯ä¸€æ ·çš„ï¼‰ã€‚è¿™æ˜¯ä¾èµ–äºmapå’Œreduceä»»åŠ¡è¾“å‡ºçš„åŸå­æäº¤ï¼šæ¯ä¸ªè¿›è¡Œä¸­çš„ä»»åŠ¡éƒ½å°†å…¶è¾“å‡ºå†™å…¥ç§æœ‰ä¸´æ—¶æ–‡ä»¶ã€‚reduceä»»åŠ¡äº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼Œmapä»»åŠ¡äº§ç”ŸRä¸ªè¿™æ ·çš„æ–‡ä»¶(æ¯ä¸ªreduceä»»åŠ¡ä¸€ä¸ª)ã€‚å½“mapä»»åŠ¡å®Œæˆæ—¶ï¼Œworkerå‘masterå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå¹¶åœ¨æ¶ˆæ¯ä¸­åŒ…å«Rä¸ªä¸´æ—¶æ–‡ä»¶çš„åç§°ã€‚å¦‚æœä¸»æœåŠ¡å™¨æ”¶åˆ°å·²å®Œæˆçš„mapä»»åŠ¡çš„å®Œæˆæ¶ˆæ¯ï¼Œå®ƒå°†å¿½ç•¥è¯¥æ¶ˆæ¯ï¼ˆå¯èƒ½åŸæ¥æŒ‚äº†çš„å¤æ´»äº†ï¼‰ã€‚å¦åˆ™ï¼Œå®ƒåœ¨ä¸»æ•°æ®ç»“æ„ä¸­è®°å½•Ræ–‡ä»¶çš„åç§°ã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ª Reduce workerï¼Œåˆ†åˆ«æ˜¯ A å’Œ Bï¼ŒåŒæ—¶å­˜åœ¨ä¸€ä¸ª Reduce ä»»åŠ¡ Rã€‚ä¸‹é¢æ˜¯è¯¦ç»†çš„æµç¨‹æè¿°ï¼ŒåŒ…æ‹¬ä¸€ä¸ª worker æŒ‚æ‰çš„è¿‡ç¨‹ã€‚ åˆå§‹åˆ†é…ä»»åŠ¡ ä¸»èŠ‚ç‚¹å°† Reduce ä»»åŠ¡ R åˆ†é…ç»™ worker A æ‰§è¡Œã€‚ worker A å¼€å§‹æ‰§è¡Œè¿™ä¸ª Reduce ä»»åŠ¡ï¼Œå¹¶é€æ­¥å¤„ç†æ•°æ®ï¼Œå°†ç»“æœå†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ tempA ä¸­ã€‚ ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿæ•…éšœ å‡è®¾ worker A åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äºæŸç§åŸå› ï¼ˆä¾‹å¦‚ç¡¬ä»¶æ•…éšœã€ç½‘ç»œæ–­è¿ç­‰ï¼‰çªç„¶æŒ‚æ‰ï¼Œå®ƒæ— æ³•å®Œæˆä»»åŠ¡ã€‚ ä¸»èŠ‚ç‚¹ç›‘æ§ç€æ‰€æœ‰ä»»åŠ¡çš„çŠ¶æ€ï¼Œå‘ç° worker A åœ¨è§„å®šçš„æ—¶é—´å†…æ²¡æœ‰æ±‡æŠ¥ä»»åŠ¡è¿›åº¦æˆ–å®Œæˆæƒ…å†µï¼Œäºæ˜¯åˆ¤æ–­ worker A å¤±æ•ˆã€‚ ä¸»èŠ‚ç‚¹å†³å®šå°† Reduce ä»»åŠ¡ R é‡æ–°åˆ†é…ç»™å¦ä¸€ä¸ªå¥åº·çš„ worker B æ¥æ‰§è¡Œã€‚ æ–°çš„ä»»åŠ¡åˆ†é…ç»™ worker B worker B æ¥åˆ°ä»»åŠ¡åï¼Œå¼€å§‹é‡æ–°æ‰§è¡Œ Reduce ä»»åŠ¡ Rï¼Œå®ƒå¯èƒ½éœ€è¦ä»ä¸­é—´æ•°æ®ä¸­è¯»å–å¹¶è®¡ç®—ï¼Œç”Ÿæˆè‡ªå·±çš„ä¸´æ—¶æ–‡ä»¶ tempBã€‚ worker B æœ€ç»ˆå®Œæˆäº†ä»»åŠ¡ï¼Œå¹¶ç”Ÿæˆäº†ä¸´æ—¶æ–‡ä»¶ tempBï¼Œå‡†å¤‡å°†å…¶é‡å‘½åä¸ºæœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ final_outputã€‚ worker A æ¢å¤è¿è¡Œ åœ¨ worker B æ­£åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¹‹å‰æŒ‚æ‰çš„ worker A çªç„¶æ¢å¤è¿è¡Œäº†ã€‚ æ¢å¤åçš„ worker A ä¼šç»§ç»­ä¹‹å‰ä¸­æ–­çš„å·¥ä½œï¼Œå¹¶è¯•å›¾å®Œæˆå®ƒçš„ Reduce ä»»åŠ¡ã€‚å› æ­¤ï¼Œworker A æœ€ç»ˆä¹Ÿç”Ÿæˆäº†å®ƒè‡ªå·±çš„ä¸´æ—¶æ–‡ä»¶ tempAã€‚ ä¸¤ä¸ª worker ç«äº‰å†™å…¥æœ€ç»ˆè¾“å‡º ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸åŒçš„ workerï¼ˆA å’Œ Bï¼‰ï¼Œå®ƒä»¬éƒ½è®¤ä¸ºè‡ªå·±å®Œæˆäº† Reduce ä»»åŠ¡ Rï¼Œå¹¶ä¸”åˆ†åˆ«ç”Ÿæˆäº†ä¸¤ä¸ªä¸åŒçš„ä¸´æ—¶æ–‡ä»¶ tempA å’Œ tempBã€‚ worker A å’Œ worker B éƒ½ä¼šå°è¯•å°†å„è‡ªçš„ä¸´æ—¶æ–‡ä»¶é‡å‘½åä¸ºæœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ final_outputã€‚ åŸå­é‡å‘½åæ“ä½œçš„åº”ç”¨ åœ¨æ‰§è¡Œé‡å‘½åæ—¶ï¼Œåº•å±‚æ–‡ä»¶ç³»ç»Ÿçš„åŸå­é‡å‘½åæ“ä½œèµ·åˆ°äº†å…³é”®ä½œç”¨ã€‚ å‡è®¾ worker B å…ˆå°è¯•é‡å‘½åå®ƒçš„ä¸´æ—¶æ–‡ä»¶ tempB ä¸º final_outputï¼Œç”±äºé‡å‘½åæ“ä½œæ˜¯åŸå­çš„ï¼Œworker B æˆåŠŸåœ°å°† tempB é‡å‘½åä¸ºäº† final_outputã€‚ ç”±äºæ–‡ä»¶ç³»ç»Ÿçš„åŸå­æ€§ï¼Œè¿™ä¸ªé‡å‘½åæ“ä½œæ˜¯ä¸å¯åˆ†å‰²çš„ï¼Œæ„å‘³ç€æ­¤æ—¶æœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ final_output å·²ç»ç¡®å®šä¸‹æ¥ï¼ŒåŒ…å«çš„æ˜¯ worker B çš„ç»“æœã€‚ å½“ worker A å°è¯•é‡å‘½åå®ƒçš„ä¸´æ—¶æ–‡ä»¶ tempA ä¸º final_output æ—¶ï¼Œå‘ç°è¿™ä¸ªåç§°å·²ç»å­˜åœ¨ï¼Œå› æ­¤å®ƒçš„é‡å‘½åæ“ä½œä¼šå¤±è´¥ã€‚ é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œæœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¸­åªä¼šä¿ç•™ä¸€æ¬¡ä»»åŠ¡çš„è¾“å‡ºï¼Œå¹¶ä¸”æœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ final_output ä¸­åŒ…å«çš„æ˜¯æŸä¸€ä¸ª Reduce worker æˆåŠŸæ‰§è¡Œåçš„æ•°æ®ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ worker B çš„æ•°æ®ï¼‰ã€‚ å› ä¸ºä»–ä»¬è®¿é—®çš„æ˜¯åŒä¸€ä¸ªå…¨å±€å‘½åç©ºé—´ï¼Œå¹¶ä¸”èƒ½å¤ŸæŸ¥çœ‹å’Œæ“ä½œç›¸åŒçš„æ–‡ä»¶ã€‚ ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹mapå’Œreduceæ˜¯ç¡®å®šæ€§çš„ï¼Œè¿™æ ·çš„è¯ç¨‹åºç›¸å½“äºæ˜¯å¹¶è¡Œçš„ã€‚å¦‚æœmapå’Œ/æˆ–ruduceæ˜¯éç¡®å®šæ€§çš„ï¼Œæä¾›è¾ƒå¼±ä½†ä»ç„¶åˆç†çš„è¯­ä¹‰ã€‚åœ¨å­˜åœ¨éç¡®å®šæ€§è¿ç®—ç¬¦çš„æƒ…å†µä¸‹ï¼Œç‰¹å®š Reduce ä»»åŠ¡ R1 çš„è¾“å‡ºç›¸å½“äºä¸€ä¸ªéç¡®å®šæ€§ç¨‹åºé¡ºåºæ‰§è¡Œäº§ç”Ÿçš„ R1 è¾“å‡ºã€‚ä½†æ˜¯ï¼Œå¦ä¸€ä¸ª Reduce ä»»åŠ¡ R2 çš„è¾“å‡ºå¯èƒ½å¯¹åº”äºéç¡®å®šæ€§ç¨‹åºçš„ä¸åŒé¡ºåºæ‰§è¡Œäº§ç”Ÿçš„ R2 è¾“å‡ºã€‚ï¼ˆå°±æ˜¯è¯´æ‰§è¡Œé¡ºåºä¹Ÿè®¸ä¸åŒï¼‰ åœ¨éç¡®å®šæ€§æ“ä½œä¸­ï¼Œå¤šä¸ª reduce ä»»åŠ¡å¯èƒ½ä¼šè¯»å–æ¥è‡ª map ä»»åŠ¡çš„ä¸åŒæ‰§è¡Œç»“æœï¼Œå› æ­¤è¾“å‡ºçš„é¡ºåºå’Œå†…å®¹å¯èƒ½ä¸åŒï¼Œä½†æ¯ä¸ª reduce ä»»åŠ¡çš„è¾“å‡ºä»ç„¶ç­‰ä»·äºå®ƒåœ¨é¡ºåºæ‰§è¡Œä¸­å¯èƒ½å¾—åˆ°çš„ç»“æœã€‚ æœ¬åœ°æ€§å› ä¸ºç½‘ç»œèµ„æºç¨€ç¼ºï¼Œè¾“å…¥æ•°æ®ç”¨Google File Systemï¼ˆGFSï¼‰ç®¡ç†ï¼Œå­˜å‚¨åœ¨æœºå™¨çš„æœ¬åœ°ç£ç›˜ã€‚GFSæŠŠæ¯ä¸ªæ–‡ä»¶è¢«åˆ†ä¸º64MBçš„å—ï¼Œå¹¶å°†æ¯ä¸ªå—å­˜å‚¨å¤šä¸ªå‰¯æœ¬ï¼ˆé€šå¸¸æ˜¯3ä¸ªå‰¯æœ¬ï¼‰å­˜åˆ°ä¸åŒæœºå™¨ã€‚masterä¼šè€ƒè™‘è¾“å…¥æ–‡ä»¶çš„ä½ç½®ï¼Œå¹¶å°è¯•å°†ä¸€ä¸ª map ä»»åŠ¡è°ƒåº¦åˆ°åŒ…å«ç›¸åº”è¾“å…¥æ•°æ®å‰¯æœ¬çš„æœºå™¨ä¸Šã€‚å¦‚æœä¸è¡Œï¼Œmasterä¼šå°è¯•å°† map ä»»åŠ¡è°ƒåº¦åˆ°ä¸€ä¸ªé è¿‘è¯¥ä»»åŠ¡è¾“å…¥æ•°æ®å‰¯æœ¬çš„æœºå™¨ä¸Šï¼ˆä¾‹å¦‚ï¼Œè°ƒåº¦åˆ°ä¸åŒ…å«æ•°æ®å‰¯æœ¬çš„æœºå™¨å¤„äºåŒä¸€ç½‘ç»œäº¤æ¢æœºä¸Šçš„ worker æœºå™¨ï¼‰ã€‚å› æ­¤ï¼Œå¤§éƒ¨åˆ†æ•°æ®è¯»å–æ˜¯åœ¨æœ¬åœ°ã€‚ ä»»åŠ¡ç²’åº¦mapå’Œreduceåˆ†åˆ«åˆ†ä¸ºMå’ŒRä¸ªä»»åŠ¡ï¼Œéƒ½è¿œå¤§äºworkerçš„æ•°é‡ã€‚æ¯ä¸ªworkeræ‰§è¡Œå¤šä¸ªä¸åŒçš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚è¿™æ ·å¯ä»¥æ›´å¥½çš„è´Ÿè½½å‡è¡¡ï¼Œå¹¶ä¸”å¯ä»¥åŠ é€ŸworkeræŒ‚äº†çš„æ—¶å€™çš„ä¼šå¤è‹çš„ï¼Œå› ä¸ºæŒ‚æ‰workerçš„ä»»åŠ¡å¯ä»¥å¿«é€Ÿåˆ†é…åˆ°å…¶ä»–wokerä¸Šã€‚ å®é™…ä¸ŠRå’ŒMå¤§å°æœ‰é™åˆ¶ï¼Œå› ä¸ºmasterå¿…é¡»åšO(M + R)æ¬¡è°ƒåº¦å†³ç­–ï¼Œå¹¶ä¸”éœ€è¦åœ¨å†…å­˜ä¸­ä¿æŒO(M âˆ— R)çš„çŠ¶æ€ä¿¡æ¯ï¼ˆè™½ç„¶æ¯ä¸€å¯¹Må’ŒRçš„çŠ¶æ€ä¿¡æ¯å¾ˆå°ï¼Œ1Bå·¦å³ï¼‰ã€‚Rç»å¸¸å—ç”¨æˆ·çº¦æŸï¼ˆå¤§æ¦‚æ˜¯ç”¨æˆ·æŒ‡å®šçš„æ„æ€ï¼‰ï¼Œæ‰€ä»¥ä¸€èˆ¬é™åˆ¶Mï¼Œè®©æ¯ä¸ªä»»åŠ¡å¤„ç†çš„è¾“å…¥æ•°æ®å¤§çº¦ä¸º16 MBåˆ°64 MBï¼ŒRä¸ºworkeræ•°é‡çš„ä¸€ä¸ªå°å€æ•°ã€‚å¦‚æœæ˜¯2000å°workerï¼Œé‚£ä¹ˆé€šå¸¸è®¾ç½®M = 200,000å’ŒR = 5,000 å¤‡ä»½ä»»åŠ¡mapreduceä¸­å¸¸è§çš„å»¶è¿ŸåŸå› ä¹‹ä¸€æ˜¯stragglerï¼ˆæ‹–å»¶è€…ï¼‰ï¼Œå³ä¸€ä¸ªæœºå™¨åœ¨å®Œæˆæœ€åå‡ ä¸ªmapæˆ–reduceä»»åŠ¡æ—¶èŠ±è´¹å¼‚å¸¸é•¿çš„æ—¶é—´ã€‚ å¯èƒ½çš„åŸå› ï¼šç¡¬ä»¶é—®é¢˜ï¼ˆä¾‹å¦‚ç£ç›˜è¯»å†™æ€§èƒ½ä½ä¸‹ï¼‰ã€èµ„æºç«äº‰ï¼ˆä¾‹å¦‚æœºå™¨ä¸Šæœ‰å¤šä¸ªä»»åŠ¡åŒæ—¶è¿è¡Œï¼Œå¯¼è‡´èµ„æºä¸è¶³ï¼‰ã€ç”šè‡³æ˜¯è½¯ä»¶æ•…éšœï¼ˆä¾‹å¦‚å¤„ç†å™¨ç¼“å­˜è¢«ç¦ç”¨ï¼Œå¯¼è‡´æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼‰ è§£å†³ç­–ç•¥ï¼šè®¾è®¡äº†ä¸€å¥—å¤‡ä»½ä»»åŠ¡æ‰§è¡Œæœºåˆ¶ã€‚å½“MapReduceæ“ä½œæ¥è¿‘å®Œæˆæ—¶ï¼Œmasterä¼šè°ƒåº¦å‰©ä½™çš„æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡çš„å¤‡ä»½æ‰§è¡Œã€‚åªè¦ä¸»ä»»åŠ¡æˆ–å¤‡ä»½ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå®Œæˆï¼Œä»»åŠ¡å°±ä¼šè¢«æ ‡è®°ä¸ºå·²å®Œæˆã€‚ æ”¹è‰¯æ„Ÿè§‰å°±æ˜¯ä¸€äº›å¯ä¿®æ”¹çš„å‚æ•°ã€‚ åˆ†åŒºå‡½æ•°ï¼ˆPartitionï¼‰åˆ†åŒºå‡½æ•°æ˜¯å¯¹mapperäº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶è¿›è¡Œåˆ’åˆ†ï¼Œåˆ†åˆ°reducerä¸Šé¢ï¼Œé»˜è®¤æ˜¯hash(key) mod Rã€‚é€šå¸¸å¤Ÿç”¨äº†ï¼Œä½†æ˜¯æœ‰çš„ç”¨æˆ·æƒ³è‡ªå®šä¹‰ï¼Œå› ä¸ºå…¶ä»–å‡½æ•°æ›´æœ‰æ„ä¹‰ï¼Œæ¯”å¦‚æœ‰æ—¶è¾“å‡ºé”®å¯èƒ½æ˜¯URLï¼Œè€Œæˆ‘ä»¬å¸Œæœ›ç›¸åŒhostnameçš„æ‰€æœ‰æ¡ç›®éƒ½ä½äºåŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨â€œhash(Hostname(urlkey)) mod Râ€ä½œä¸ºåˆ†åŒºå‡½æ•°ï¼Œå¯ä»¥ç¡®ä¿æ¥è‡ªåŒä¸€ä¸»æœºçš„æ‰€æœ‰URLæ¡ç›®éƒ½è¢«åˆ’åˆ†åˆ°åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ã€‚ é¡ºåºä¿è¯ä¸­é—´é”®å€¼å¯¹ä¼šæŒ‰ç…§é”®çš„é€’å¢é¡ºåºè¿›è¡Œå¤„ç†ï¼ˆMapReduceç³»ç»Ÿä¼šä¿è¯åœ¨æ¯ä¸ªReduceä»»åŠ¡ä¸­ï¼Œè¿™äº›é”®å€¼å¯¹æŒ‰ç…§é”®çš„é€’å¢é¡ºåºè¢«æ’åºï¼‰ï¼Œå³reducerçš„è¾“å…¥é€’å¢ã€‚å¯¹äºä»¥ä¸‹æƒ…å†µæœ‰æ„ä¹‰ï¼š å½“è¾“å‡ºæ–‡ä»¶æ ¼å¼éœ€è¦æ”¯æŒæŒ‰é”®è¿›è¡Œé«˜æ•ˆçš„éšæœºè®¿é—®æŸ¥æ‰¾æ—¶ã€‚ å½“è¾“å‡ºçš„ç”¨æˆ·è§‰å¾—æ•°æ®æŒ‰é”®æ’åºæ›´æ–¹ä¾¿æ—¶ã€‚ åˆå¹¶å‡½æ•°èƒŒæ™¯ï¼šæ¯ä¸ªmapä»»åŠ¡äº§ç”Ÿçš„ä¸­é—´ä»¶æœ‰æ—¶æœ‰æ˜¾è‘—é‡å¤ï¼Œä¸”reduceæ—¶å¯äº¤æ¢å’Œå¯ç»“åˆçš„ã€‚æ¯”å¦‚å•è¯è®¡æ•°ï¼Œæ¯ä¸ªMapä»»åŠ¡ä¼šäº§ç”Ÿæˆç™¾ä¸Šåƒæ¡ä¸º&lt;the, 1&gt;ã€‚ä½†æ˜¯å¯¹äºreduceæ¥è¯´å¾ˆæµªè´¹ï¼Œå› ä¸ºå…¨æ˜¯ä¸€æ ·çš„ã€‚å› æ­¤ç”¨æˆ·å¯ä»¥äº‹å…ˆæŒ‡å®šä¸€ä¸ªcombinerå‡½æ•°ï¼Œåœ¨ä»mapperé€šè¿‡ç½‘ç»œå‘é€åˆ°reducerä¹‹å‰è¿›è¡Œéƒ¨åˆ†åˆå¹¶ï¼ˆå‡å°ç½‘ç»œå¼€é”€ï¼‰ã€‚ é€šå¸¸ï¼ŒCombinerå‡½æ•°å’ŒReduceå‡½æ•°ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„ä»£ç ï¼Œä½†æ˜¯combineräº§ç”Ÿçš„æ˜¯ä¸­é—´æ–‡ä»¶ï¼Œreduceräº§ç”Ÿçš„æ˜¯æœ€ç»ˆæ–‡ä»¶ã€‚ è¾“å…¥è¾“å‡ºç±»å‹MapReduceåº“æ”¯æŒä»¥å¤šç§ä¸åŒæ ¼å¼è¯»å–è¾“å…¥æ•°æ®ï¼š æ–‡æœ¬ï¼ˆtextï¼‰æ¨¡å¼ï¼šæ¯ä¸€è¡Œè§†ä¸ºä¸€ä¸ªé”®/å€¼å¯¹ï¼Œé”®æ˜¯æ–‡ä»¶ä¸­çš„åç§»é‡ï¼Œå€¼æ˜¯è¯¥è¡Œçš„å†…å®¹ã€‚ æŒ‰é”®çš„é¡ºåºå­˜å‚¨ï¼šå¤šä¸ªé”®/å€¼å¯¹ä¼šæ ¹æ®é”®çš„å¤§å°é¡ºåºè¿›è¡Œæ’åº æ¯”å¦‚è¾“å…¥ï¼š ```applebananaapplegrapebananaapple 1234567891011- mapperè¾“å‡ºï¼š- ``` (apple, 1) (apple, 1) (apple, 1) (banana, 1) (banana, 1) (grape, 1) å¯ä»¥ç”¨ä¸€ä¸ªreaderæ¥å£æ¥æ·»åŠ å¯¹æ–°è¾“å…¥ç±»å‹çš„æ”¯æŒï¼ˆä½†æ˜¯ç”¨æˆ·é€šå¸¸ç”¨é¢„å®šä¹‰çš„é‚£äº›å°±å¤Ÿäº†ï¼‰ã€‚readerä¸ä¸€å®šä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œæ•°æ®åº“ã€å†…å­˜æ˜ å°„çš„æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥ã€‚ è¾“å‡ºç±»ä¼¼ï¼ŒåŒä¸Šæ‰€è¿°ã€‚ å‰¯ä½œç”¨ï¼ˆè¿™é‡Œå‰¯ä½œç”¨æ„Ÿè§‰ä¸ä¸€å®šæ˜¯åçš„é‚£ç§æ„æ€ï¼‰ ç”¨æˆ·å¯èƒ½å¸Œæœ›åŒæ—¶èƒ½è¾“å‡ºå…¶ä»–è¾…åŠ©æ–‡ä»¶ï¼Œæ¯”å¦‚æ—¥å¿—æ–‡ä»¶ã€è°ƒè¯•ä¿¡æ¯ã€‚ä½†æ˜¯è¿™ä¸ªæ–‡ä»¶çš„è¾“å‡ºï¼ˆåœ¨è¿™é‡Œè¢«ç§°ä¸ºå‰¯ä½œç”¨ï¼‰çš„åŸå­æ€§å’Œå¹‚ç­‰æ€§åº”å½“ç”±å¼€å‘è€…è‡ªå·±ä¿è¯ã€‚ åŸå­æ€§æ˜¯æŒ‡ä¸€ä¸ªæ“ä½œæˆ–ä¸€ç»„æ“ä½œè¦ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆå®Œå…¨å¤±è´¥,å¼ºè°ƒæ“ä½œçš„å®Œæ•´æ€§ å¹‚ç­‰æ€§æ˜¯æŒ‡ä¸€ä¸ªæ“ä½œå¯ä»¥è¢«æ‰§è¡Œå¤šæ¬¡ï¼Œä½†æ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œæœ€ç»ˆçš„ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚å¼ºè°ƒæ“ä½œçš„é‡å¤æ€§ é€šå¸¸ï¼Œåº”ç”¨ç¨‹åºä¼šå°†æ•°æ®å†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶å®Œå…¨ç”ŸæˆååŸå­æ€§åœ°é‡å‘½åè¯¥æ–‡ä»¶ã€‚ mapreduceä¸æä¾›å¯¹å•ä¸ªä»»åŠ¡ç”Ÿæˆçš„å¤šä¸ªè¾“å‡ºæ–‡ä»¶çš„åŸå­ä¸¤é˜¶æ®µæäº¤çš„æ”¯æŒã€‚æ‰€ä»¥å¦‚æœè¦è¾“å‡ºå¤šä¸ªæ–‡ä»¶å¹¶ä¸”è¦ä¿è¯ä»¥ä¸Šä¸¤ä¸ªæ€§è´¨ï¼Œé‚£ä¹ˆå‡½æ•°åº”å½“æ˜¯ç¡®å®šæ€§çš„ã€‚ å¦‚æœæŸä¸ªä»»åŠ¡ç”Ÿæˆå¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼ˆä¾‹å¦‚output1.txtå’Œoutput2.txtï¼‰ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´æœ‰æŸç§ä¾èµ–å…³ç³»ï¼ˆå¦‚output1.txtä¸­çš„å†…å®¹éœ€è¦åœ¨output2.txtä¸­å¼•ç”¨ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡å¿…é¡»æ˜¯ç¡®å®šæ€§çš„ï¼šä»»åŠ¡åœ¨æ¯æ¬¡è¿è¡Œæ—¶éƒ½åº”ç”Ÿæˆç›¸åŒçš„æ–‡ä»¶å†…å®¹ï¼Œå¹¶ä¸”æ–‡ä»¶ç”Ÿæˆçš„é¡ºåºä¹Ÿåº”ä¸€è‡´ã€‚è¿™æ ·ï¼Œå³ä½¿MapReduceæ¡†æ¶æ²¡æœ‰æ”¯æŒåŸå­ä¸¤é˜¶æ®µæäº¤ï¼Œç”¨æˆ·ä»ç„¶èƒ½ç¡®ä¿è¾“å‡ºçš„å¯é æ€§ã€‚ ä»€ä¹ˆæ˜¯åŸå­ä¸¤é˜¶æ®µæäº¤ï¼šæ˜¯ä¸€ç§åˆ†å¸ƒå¼äº‹åŠ¡åè®®ï¼Œæ—¨åœ¨ç¡®ä¿åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªç‹¬ç«‹çš„å‚ä¸è€…ï¼ˆä¾‹å¦‚å¤šä¸ªæ•°æ®åº“ã€æœåŠ¡å™¨æˆ–æœåŠ¡ï¼‰èƒ½å¤Ÿä¸€è‡´åœ°å®ŒæˆæŸä¸ªäº‹åŠ¡çš„æäº¤æˆ–å›æ»šã€‚è¿™ä¸ªåè®®çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸå­æ€§ï¼Œå³è¦ä¹ˆæ‰€æœ‰å‚ä¸è€…éƒ½æˆåŠŸæäº¤äº‹åŠ¡ï¼Œè¦ä¹ˆæ‰€æœ‰å‚ä¸è€…éƒ½å›æ»šäº‹åŠ¡ã€‚ å‡†å¤‡é˜¶æ®µï¼ˆPhase 1 - Prepare Phaseï¼‰ï¼š åè°ƒè€…ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨ï¼‰å‘æ‰€æœ‰å‚ä¸è€…å‘é€ä¸€ä¸ªâ€œå‡†å¤‡æäº¤â€çš„è¯·æ±‚ï¼Œè¯¢é—®å®ƒä»¬æ˜¯å¦å¯ä»¥æäº¤äº‹åŠ¡ã€‚ æ¯ä¸ªå‚ä¸è€…ï¼ˆå³æ‰§è¡Œä»»åŠ¡çš„èŠ‚ç‚¹ï¼‰æ£€æŸ¥è‡ªå·±èƒ½å¦æˆåŠŸæäº¤äº‹åŠ¡ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå‚ä¸è€…è¿”å›YESï¼ˆå‡†å¤‡æäº¤ï¼‰ï¼›å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œå‚ä¸è€…è¿”å›NOï¼ˆæ— æ³•æäº¤ï¼‰ã€‚ æäº¤é˜¶æ®µï¼ˆPhase 2 - Commit Phaseï¼‰ï¼š å¦‚æœæ‰€æœ‰å‚ä¸è€…éƒ½è¿”å›YESï¼Œå³æ‰€æœ‰å‚ä¸è€…éƒ½å‡†å¤‡å¥½äº†æäº¤äº‹åŠ¡ï¼Œé‚£ä¹ˆåè°ƒè€…ä¼šå‘å‡ºä¸€ä¸ªæäº¤ï¼ˆcommitï¼‰å‘½ä»¤ï¼Œæ‰€æœ‰å‚ä¸è€…å°†æ­£å¼æäº¤äº‹åŠ¡ã€‚ å¦‚æœä»»ä½•ä¸€ä¸ªå‚ä¸è€…è¿”å›NOï¼Œå³æŸä¸ªèŠ‚ç‚¹æ— æ³•æäº¤äº‹åŠ¡ï¼Œé‚£ä¹ˆåè°ƒè€…ä¼šå‘å‡ºä¸€ä¸ªå›æ»šï¼ˆrollbackï¼‰å‘½ä»¤ï¼Œè¦æ±‚æ‰€æœ‰å‚ä¸è€…å›æ»šå·²åšçš„æ“ä½œï¼Œç¡®ä¿æ•´ä¸ªäº‹åŠ¡ä¸äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚ è·³è¿‡åè®°å½•ä»£ç é‡Œé¢çš„é”™è¯¯æœ‰å¯èƒ½ä¼šå¯¼è‡´mapå’Œreduceåœ¨æŸäº›æ•°æ®ä¸Šå´©æºƒï¼Œä½†æ˜¯æœ‰æ—¶å€™è¿™äº›ä»£ç ä¸å¥½æ”¹ï¼ˆæ¯”å¦‚è°ƒçš„åˆ«äººçš„åº“ï¼‰ã€‚æœ‰æ—¶å¿½ç•¥æ‰ä¸€äº›æ•°æ®æ˜¯å¯ä»¥æ¥å—çš„ï¼Œæ¯”å¦‚æ•°æ®é‡å¾ˆå¤§çš„é‚£ç§å¤§æ•°æ®ç»Ÿè®¡ï¼Œå°‘å‡ ä¸ªæ•°æ®çš„å½±å“å¾ˆå°ã€‚mapreduceåº“é‡Œæä¾›äº†ä¸€ç§å¯é€‰çš„æ‰§è¡Œæ¨¡å¼ï¼Œå¯ä»¥æ£€æµ‹åˆ°å¯¼è‡´ç¡®å®šæ€§å´©æºƒçš„è®°å½•ï¼Œå¹¶è·³è¿‡è¿™äº›è®°å½•ä»¥ç¡®ä¿ä»»åŠ¡èƒ½å¤Ÿç»§ç»­è¿›è¡Œã€‚ å…·ä½“æµç¨‹ï¼š å´©æºƒæ£€æµ‹ï¼š æ¯ä¸ªå·¥ä½œè¿›ç¨‹ï¼ˆå³æ‰§è¡ŒMapæˆ–Reduceä»»åŠ¡çš„æœºå™¨ï¼‰éƒ½ä¼šå®‰è£…ä¸€ä¸ªä¿¡å·å¤„ç†ç¨‹åºï¼Œç”¨äºæ•æ‰å´©æºƒä¿¡å·ï¼ˆå¦‚æ®µé”™è¯¯ segmentation fault æˆ–æ€»çº¿é”™è¯¯ bus errorï¼‰ã€‚ åœ¨æ¯æ¬¡æ‰§è¡ŒMapæˆ–Reduceä»»åŠ¡ä¹‹å‰ï¼ŒMapReduceæ¡†æ¶ä¼šè®°å½•å½“å‰æ­£åœ¨å¤„ç†çš„è®°å½•çš„åºåˆ—å·ã€‚ è®°å½•å¤±è´¥ï¼š å¦‚æœæŸä¸ªMapæˆ–Reduceä»»åŠ¡ç”±äºæŸä¸ªç‰¹å®šçš„è®°å½•è€Œå´©æºƒï¼Œä¿¡å·å¤„ç†ç¨‹åºä¼šæ•è·è¿™ä¸ªå´©æºƒå¹¶å‘é€ä¸€ä¸ªUDPæ•°æ®åŒ…ç»™MapReduceçš„ä¸»èŠ‚ç‚¹ã€‚è¯¥æ•°æ®åŒ…åŒ…å«äº†å¯¼è‡´å´©æºƒçš„è®°å½•çš„åºåˆ—å·ã€‚ å¤±è´¥è®¡æ•°å’Œè·³è¿‡è®°å½•ï¼š MapReduceä¸»èŠ‚ç‚¹æ”¶åˆ°å¤šä¸ªå´©æºƒæŠ¥å‘Šåï¼Œè¯†åˆ«å‡ºå“ªä¸ªè®°å½•å¯¼è‡´äº†å´©æºƒã€‚å¦‚æœæŸä¸ªè®°å½•å¤šæ¬¡å¼•å‘å´©æºƒï¼Œä¸»èŠ‚ç‚¹ä¼šå†³å®šè·³è¿‡è¯¥è®°å½•ï¼Œå¹¶åœ¨é‡æ–°è°ƒåº¦Mapæˆ–Reduceä»»åŠ¡æ—¶ä¸å†å¤„ç†è¯¥è®°å½•ã€‚ ç»§ç»­æ‰§è¡Œï¼š è·³è¿‡å¯¼è‡´å´©æºƒçš„è®°å½•åï¼Œä»»åŠ¡å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œè€Œä¸ä¼šè¢«è¿™äº›é—®é¢˜æ•°æ®é˜»å¡ã€‚æœ€ç»ˆï¼ŒMapReduceä½œä¸šå¯ä»¥å®Œæˆï¼Œè™½ç„¶æœ‰äº›è®°å½•è¢«å¿½ç•¥ã€‚ æœ¬åœ°æ‰§è¡Œå› ä¸ºå®Œæ•´çš„mapreduceè¿‡ç¨‹å¾ˆéš¾è°ƒè¯•mapå’Œreduceå‡½æ•°çš„é—®é¢˜ï¼Œæ‰€ä»¥æå‡ºäº†åœ¨æœ¬åœ°æœºå™¨ä¸Šé¡ºåºåœ°æ‰§è¡ŒMapReduceæ“ä½œçš„æ‰€æœ‰ä»»åŠ¡çš„æ–¹å¼ã€‚è¿™æ ·ï¼Œå¼€å‘äººå‘˜å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°ç¯å¢ƒä¸­è¿è¡Œç¨‹åºï¼Œå¹¶ä½¿ç”¨è°ƒè¯•å·¥å…·ï¼ˆå¦‚gdbï¼‰æ¥è¿½è¸ªé—®é¢˜å’Œè°ƒè¯•ä»£ç ã€‚ çŠ¶æ€ä¿¡æ¯ä¸»èŠ‚ç‚¹è¿è¡Œä¸€ä¸ªå†…éƒ¨HTTPæœåŠ¡å™¨ï¼ˆæ‰€ä»¥ä¸Šé¢é‚£ä¸ªè·³è¿‡åè®°å½•çš„å¯ä»¥å‘udpåˆ°masterï¼‰ï¼Œæä¾›å®æ—¶çš„çŠ¶æ€ç›‘æ§é¡µé¢ï¼Œç»™ç”¨æˆ·è·Ÿè¸ªæ•´ä¸ªMapReduceä½œä¸šçš„è¿›åº¦ï¼Œè¿˜åŒ…å«äº†æ¯ä¸ªä»»åŠ¡ç”Ÿæˆçš„æ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºæ–‡ä»¶çš„é“¾æ¥ã€‚ è®¡æ•°å™¨æä¾›äº†ä¸€ä¸ªè®¡æ•°å™¨åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·åœ¨Mapå’ŒReduceå‡½æ•°ä¸­å¯¹ä¸åŒçš„äº‹ä»¶è¿›è¡Œè®¡æ•°ã€‚å¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨è¿è¡ŒMapReduceä½œä¸šæ—¶è¿›è¡Œæ•°æ®éªŒè¯ã€æ€§èƒ½ç›‘æ§æˆ–è¡Œä¸ºåˆ†æã€‚æ¥è‡ªå„ä¸ªworkeræœºå™¨çš„è®¡æ•°å™¨å€¼ä¼šå®šæœŸä¼ é€’ç»™ä¸»èŠ‚ç‚¹ï¼ˆé€šè¿‡pingå“åº”ä¼ é€’ï¼‰ã€‚è®¡æ•°å™¨å€¼ä¹Ÿä¼šæ˜¾ç¤ºåœ¨ä¸»èŠ‚ç‚¹çš„çŠ¶æ€é¡µé¢ä¸Šï¼Œç”¨æˆ·å¯ä»¥å®æ—¶è§‚å¯Ÿè®¡ç®—è¿›åº¦ã€‚è®¡æ•°å™¨ä¼šæ¶ˆé™¤ç›¸åŒmapæˆ–reduceå‡½æ•°çš„å½±å“ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š åˆ›å»ºè®¡æ•°å™¨ï¼šç”¨æˆ·é€šè¿‡è°ƒç”¨GetCounter(&quot;name&quot;)æ¥åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šä»¥nameä½œä¸ºæ ‡è¯†ç¬¦ã€‚ å¢åŠ è®¡æ•°å™¨å€¼ï¼šåœ¨Mapæˆ–Reduceå‡½æ•°ä¸­ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨Increment()æ–¹æ³•å¢åŠ è®¡æ•°å™¨å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨Word Countç¨‹åºä¸­ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨æ¥ç»Ÿè®¡å¤§å†™å­—æ¯å•è¯çš„æ•°é‡ã€‚ æ€§èƒ½ä»¥å¤§æ•°æ®ä¸­å¯»æ‰¾ç¬¦åˆç‰¹å®šèŒƒå¼çš„æ•°æ®å’Œå¤§æ•°æ®æ’åºä¸¤ä¸ªä¾‹å­æ¥æµ‹é‡æ€§èƒ½ã€‚è¿™ä¸¤ä¸ªç¨‹åºä»£è¡¨äº†MapReduceç”¨æˆ·ç¼–å†™çš„å®é™…ç¨‹åºçš„ä¸€ä¸ªå¤§å­é›†â€”â€”ä¸€ç±»ç¨‹åºå°†æ•°æ®ä»ä¸€ç§è¡¨ç¤ºå˜æ¢åˆ°å¦ä¸€ç§è¡¨ç¤ºï¼Œå¦ä¸€ç±»ç¨‹åºä»å¤§æ•°æ®é›†ä¸­æå–å°‘é‡æœ‰è¶£çš„æ•°æ®ã€‚ é›†ç¾¤é…ç½®1800å°æœºå™¨ï¼Œå…¶ä»–ä¸æƒ³èµ˜è¿°ï¼ˆ Grepæ“ä½œæ‰«æä¸€ä¸ª$10^{10}$æ¡çš„100Byteçš„è®°å½•ï¼Œä»ä¸­æ‰¾ä¸€ä¸ªç½•è§çš„ä¸‰å­—ç¬¦çš„èŒƒå¼ï¼Œå‡ºç°äº†92337æ¬¡ã€‚è¾“å…¥è¢«åˆ†æˆå¤§çº¦ 64MB çš„å—ï¼ˆM = 15000ï¼‰ï¼Œæ•´ä¸ªè¾“å‡ºæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ˆR = 1ï¼‰ Yè½´è¡¨ç¤ºè¾“å…¥æ•°æ®çš„æ‰«æé€Ÿç‡ã€‚éšç€æ›´å¤šçš„æœºå™¨è¢«åˆ†é…åˆ°è¿™ä¸ªMapReduceè®¡ç®—ä»»åŠ¡ï¼Œæ‰«æé€Ÿç‡é€æ¸æé«˜ï¼Œå½“åˆ†é…äº†1764ä¸ªå·¥ä½œèŠ‚ç‚¹æ—¶ï¼Œæ‰«æé€Ÿç‡è¾¾åˆ°è¶…è¿‡30 GB/sçš„å³°å€¼ã€‚ éšç€Mapä»»åŠ¡çš„å®Œæˆï¼Œé€Ÿç‡å¼€å§‹ä¸‹é™ï¼Œå¹¶åœ¨è®¡ç®—å¼€å§‹åçš„çº¦80ç§’æ—¶é™ä¸ºé›¶ï¼Œè¡¨ç¤ºæ‰€æœ‰Mapä»»åŠ¡éƒ½å·²ç»å®Œæˆã€‚æ•´ä¸ªè®¡ç®—è¿‡ç¨‹å¤§çº¦æŒç»­äº†150ç§’ï¼ŒåŒ…æ‹¬å¤§çº¦1åˆ†é’Ÿçš„å¯åŠ¨å¼€é”€ã€‚è¿™ä¸ªå¯åŠ¨å¼€é”€ä¸»è¦æ˜¯ç”±äºç¨‹åºä¼ æ’­åˆ°æ‰€æœ‰å·¥ä½œèŠ‚ç‚¹ï¼Œä»¥åŠä¸GFSï¼ˆGoogleæ–‡ä»¶ç³»ç»Ÿï¼‰äº¤äº’çš„å»¶è¿Ÿâ€”â€”éœ€è¦æ‰“å¼€1000ä¸ªè¾“å…¥æ–‡ä»¶å¹¶è·å–æœ¬åœ°ä¼˜åŒ–æ‰€éœ€çš„ä¿¡æ¯ã€‚ æ’åºæ“ä½œæ•°æ®ï¼š$10^{10}$ä¸ª 100Byteçš„è®°å½•ï¼Œå¤§çº¦1TBã€‚åŸºäºTeraSortåŸºå‡†æµ‹è¯•çš„æ¨¡å‹ã€‚ ä¸€ä¸ªä¸‰è¡Œçš„Mapå‡½æ•°ä»æ¯è¡Œæ–‡æœ¬ä¸­æå–å‡º10å­—èŠ‚çš„æ’åºé”®ï¼Œå¹¶å°†è¿™ä¸ªé”®å’ŒåŸå§‹æ–‡æœ¬è¡Œä½œä¸ºä¸­é—´çš„é”®/å€¼å¯¹è¾“å‡ºã€‚ä½¿ç”¨äº†ä¸€ä¸ªå†…å»ºçš„Identityå‡½æ•°ä½œä¸ºReduceæ“ä½œç¬¦ï¼Œè¿™ä¸ªå‡½æ•°æŠŠä¸­é—´æ–‡ä»¶åŸå°ä¸åŠ¨çš„è¾“å‡ºã€‚æœ€ç»ˆæ’åºåçš„è¾“å‡ºå†™å…¥åˆ°ä¸€ç»„åŒé‡å¤åˆ¶çš„GFSæ–‡ä»¶ä¸­ï¼ˆå³ç¨‹åºçš„è¾“å‡ºæ˜¯2TBçš„æ•°æ®ï¼‰ã€‚ M=15000ï¼ŒR=4000.åˆ†åŒºå‡½æ•°å†…ç½®äº†å…³äºé”®åˆ†å¸ƒçš„çŸ¥è¯†ã€‚åœ¨ä¸€èˆ¬çš„æ’åºç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¼šå¢åŠ ä¸€ä¸ªé¢„å¤„ç†çš„MapReduceæ“ä½œï¼Œç”¨æ¥æ”¶é›†ä¸€äº›é”®çš„æ ·æœ¬ï¼Œç„¶ååˆ©ç”¨è¿™äº›æ ·æœ¬çš„åˆ†å¸ƒè®¡ç®—æœ€ç»ˆæ’åºé˜¶æ®µçš„åˆ†å‰²ç‚¹(å¯ä»¥ç¡®ä¿æ¯ä¸ªReduceä»»åŠ¡æ¥æ”¶åˆ°å¤§è‡´ç›¸ç­‰çš„è´Ÿè½½)ã€‚ shuffleé˜¶æ®µæ˜¯å‘ç”Ÿåœ¨mapä¹‹åï¼Œæ˜¯æŠŠä¸­é—´çš„æ–‡ä»¶ä¼ ç»™reduceçš„è¿™ä¸ªè¿‡ç¨‹å«shuffle å¤‡ä»½ä»»åŠ¡çš„å½±å“ä»…ç”¨äº†å‰æ–‡æ‰€æåˆ°çš„å¤‡ä»½ä»»åŠ¡åï¼Œæ—¶é—´å¤šäº†44% æœºå™¨å¤±è´¥çš„å½±å“æ•…æ„åœ¨è®¡ç®—çš„å‡ åˆ†é’Ÿåæ€æ­»äº†1746ä¸ªå·¥ä½œè¿›ç¨‹ä¸­çš„200ä¸ªï¼Œç›¸è¾ƒäºæ­£å¸¸æ‰§è¡Œæ—¶é—´ï¼Œä»…å¢åŠ äº†5%çš„æ—¶é—´","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"}]},{"title":"è¾¹ç¼˜è®¡ç®—ä¸­çš„ç§»åŠ¨ç®¡ç†ï¼ˆMobility Managementï¼‰","slug":"è¾¹ç¼˜è®¡ç®—ä¸­çš„ç§»åŠ¨ç®¡ç†ï¼ˆMobility-Managementï¼‰","date":"2024-08-20T17:03:28.000Z","updated":"2024-11-07T16:09:24.727Z","comments":true,"path":"2024/08/21/è¾¹ç¼˜è®¡ç®—ä¸­çš„ç§»åŠ¨ç®¡ç†ï¼ˆMobility-Managementï¼‰/","permalink":"http://gladiouszhang.github.io/2024/08/21/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E7%A7%BB%E5%8A%A8%E7%AE%A1%E7%90%86%EF%BC%88Mobility-Management%EF%BC%89/","excerpt":"","text":"èµ„æºå‘ç° ä¸€äº›ç®—æ³• 1. åŸºäºç›®å½•çš„èµ„æºå‘ç°ï¼ˆDirectory-Based Resource Discoveryï¼‰ 2. åŸºäºä»£ç†çš„èµ„æºå‘ç°ï¼ˆAgent-Based Resource Discoveryï¼‰ 3. åŸºäºP2Pçš„èµ„æºå‘ç°ï¼ˆPeer-to-Peer Resource Discoveryï¼‰ 4. åŸºäºå¹¿æ’­çš„èµ„æºå‘ç°ï¼ˆBroadcast-Based Resource Discoveryï¼‰ 5. åŸºäºAI/MLçš„èµ„æºå‘ç°ï¼ˆAI/ML-Based Resource Discoveryï¼‰ 6. åŸºäºåä½œçš„èµ„æºå‘ç°ï¼ˆCollaborative Resource Discoveryï¼‰ 7. åŸºäºç‰©ç†ä½ç½®çš„èµ„æºå‘ç°ï¼ˆLocation-Based Resource Discoveryï¼‰ æ–‡çŒ®ç»¼è¿° ä¸åŒç±»å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿ~ ç½‘æ ¼è®¡ç®—ç¯å¢ƒï¼ˆç¨€ç–ï¼‰~ P2Pè®¡ç®—ç³»ç»Ÿï¼ˆç‚¹å¯¹ç‚¹ï¼‰~ é›†ç¾¤è®¡ç®—ï¼ˆé›†ä¸­ï¼‰ ä¸»è¦é—®é¢˜ ä¸»è¦çš„æ–¹æ³• ä¸€äº›ç›¸å…³çš„è®ºæ–‡ ~ ä¸€ç§åœ¨è¾¹ç¼˜ç½‘ç»œä¸­ä½¿ç”¨å…ƒæ•°æ®å¤åˆ¶è¿›è¡Œèµ„æºå‘ç°çš„å»ä¸­å¿ƒåŒ–æ–¹æ³•- [é—®é¢˜èƒŒæ™¯](#é—®é¢˜èƒŒæ™¯) - [æ€è·¯](#æ€è·¯) - [åœºæ™¯](#åœºæ™¯) èµ„æºåˆ‡æ¢ ä¸€äº›ç®—æ³• 1. åŸºäºä¿¡å·å¼ºåº¦çš„åˆ‡æ¢ï¼ˆSignal Strength-Based Handoffï¼‰ 2. åŸºäºä½ç½®é¢„æµ‹çš„åˆ‡æ¢ï¼ˆLocation Prediction-Based Handoffï¼‰ 3. åŸºäºè´Ÿè½½å‡è¡¡çš„åˆ‡æ¢ï¼ˆLoad Balancing-Based Handoffï¼‰ 4. åŸºäºå»¶è¿Ÿæ„ŸçŸ¥çš„åˆ‡æ¢ï¼ˆLatency-Aware Handoffï¼‰ 5. åŸºäºä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„åˆ‡æ¢ï¼ˆContext-Aware Handoffï¼‰ 6. åŸºäºAI/MLçš„åˆ‡æ¢ï¼ˆAI/ML-Based Handoffï¼‰ 7. åŸºäºå¤šè·¯å¾„çš„åˆ‡æ¢ï¼ˆMulti-Path-Based Handoffï¼‰ ç›¸å…³è®ºæ–‡ å¤šç”¨æˆ·å¼‚æ„å¯†é›†èœ‚çªç½‘ç»œçš„é«˜èƒ½æ•ˆä¸šåŠ¡è¿ç§»~ æ‘˜è¦~ æ–¹æ³•è®¾è®¡~ å…·ä½“å»ºæ¨¡ åŒºå—é“¾ åŸºäºé¢„æµ‹ èµ„æºå‘ç°èµ„æºå‘ç°æ˜¯æŒ‡åœ¨è¾¹ç¼˜è®¡ç®—ç¯å¢ƒä¸­ï¼Œç§»åŠ¨è®¾å¤‡éœ€è¦åŠæ—¶æ‰¾åˆ°å¯ç”¨çš„è®¡ç®—èµ„æºï¼ˆå¦‚è¾¹ç¼˜æœåŠ¡å™¨æˆ–äº‘æœåŠ¡å™¨ï¼‰æ¥æ‰§è¡Œä»»åŠ¡ã€‚è¿™åŒ…æ‹¬è¯†åˆ«æœ€æ¥è¿‘ä¸”æœ€é€‚åˆçš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œä»¥åŠåœ¨åŠ¨æ€ç½‘ç»œç¯å¢ƒä¸­å¿«é€Ÿå‘ç°å¯ç”¨èµ„æºã€‚è¿™ä¸€è¿‡ç¨‹æ¶‰åŠå¤šä¸ªæŠ€æœ¯ï¼Œå¦‚ç½‘ç»œæ„ŸçŸ¥ã€ä½ç½®æ„ŸçŸ¥å’ŒæœåŠ¡å‘ç°åè®®ç­‰ã€‚ ä¸€äº›ç®—æ³•1. åŸºäºç›®å½•çš„èµ„æºå‘ç°ï¼ˆDirectory-Based Resource Discoveryï¼‰ æ–¹æ³•è®¾è®¡ï¼š ç›®å½•æœåŠ¡ï¼š ä¸­å¤®ç›®å½•æœåŠ¡å™¨æˆ–åˆ†å¸ƒå¼ç›®å½•æœåŠ¡ç”¨äºç»´æŠ¤æ‰€æœ‰è¾¹ç¼˜èŠ‚ç‚¹åŠå…¶å¯ç”¨èµ„æºçš„ç´¢å¼•ã€‚ æŸ¥è¯¢æœºåˆ¶ï¼š ç§»åŠ¨è®¾å¤‡é€šè¿‡æŸ¥è¯¢ç›®å½•æœåŠ¡è·å–å¯ç”¨èµ„æºçš„åˆ—è¡¨ã€‚ç›®å½•æœåŠ¡ä¼šæ ¹æ®èµ„æºçš„è´Ÿè½½ã€ç½‘ç»œå»¶è¿Ÿç­‰æ¡ä»¶è¿”å›æœ€ä¼˜èµ„æºã€‚ ä¼˜ç‚¹ï¼š æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€‚åˆé™æ€æˆ–åŠåŠ¨æ€ç¯å¢ƒã€‚ æŒ‘æˆ˜ï¼š ä¸­å¤®ç›®å½•å¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œåˆ†å¸ƒå¼ç›®å½•éœ€è¦å¤æ‚çš„åŒæ­¥æœºåˆ¶ã€‚ 2. åŸºäºä»£ç†çš„èµ„æºå‘ç°ï¼ˆAgent-Based Resource Discoveryï¼‰ æ–¹æ³•è®¾è®¡ï¼š æ™ºèƒ½ä»£ç†ï¼š éƒ¨ç½²åœ¨è¾¹ç¼˜èŠ‚ç‚¹æˆ–è®¾å¤‡ä¸Šçš„æ™ºèƒ½ä»£ç†ä¼šä¸»åŠ¨å‘ç°å¹¶æ¨èèµ„æºã€‚ä»£ç†å¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€å­¦ä¹ å†å²ä»»åŠ¡æ•°æ®ï¼Œä»¥ä¼˜åŒ–èµ„æºé€‰æ‹©ã€‚ åˆ†å¸ƒå¼åè°ƒï¼š ä»£ç†ä¹‹é—´å¯ä»¥é€šè¿‡åå•†æˆ–ç«æ ‡æœºåˆ¶ï¼Œå…±åŒå†³å®šèµ„æºçš„åˆ†é…ã€‚åå•†æœºåˆ¶å¯ä»¥åŸºäºæ•ˆç”¨å‡½æ•°æˆ–ç­–ç•¥æŠ•æ ‡ã€‚ ä¼˜ç‚¹ï¼š è‡ªé€‚åº”èƒ½åŠ›å¼ºï¼Œé€‚åº”åŠ¨æ€å˜åŒ–çš„ç½‘ç»œç¯å¢ƒã€‚ æŒ‘æˆ˜ï¼š ä»£ç†é—´çš„é€šä¿¡å¼€é”€å’Œå¤æ‚æ€§è¾ƒé«˜ã€‚ 3. åŸºäºP2Pçš„èµ„æºå‘ç°ï¼ˆPeer-to-Peer Resource Discoveryï¼‰ æ–¹æ³•è®¾è®¡ï¼š åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ï¼ˆDHTï¼‰ï¼š ä½¿ç”¨DHTæ¥ç´¢å¼•å’Œæ£€ç´¢èµ„æºï¼Œæä¾›é«˜æ•ˆçš„æŸ¥è¯¢è·¯ç”±ã€‚æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ç®¡ç†ä¸€éƒ¨åˆ†èµ„æºç´¢å¼•ã€‚ éšæœºæ¸¸èµ°ï¼š èµ„æºå‘ç°å¯ä»¥é€šè¿‡éšæœºæ¸¸èµ°ç­–ç•¥ï¼Œè®©æŸ¥è¯¢è¯·æ±‚åœ¨ç½‘ç»œä¸­éšæœºä¼ æ’­ï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚çš„èµ„æºã€‚ ä¼˜ç‚¹ï¼š é«˜åº¦åˆ†å¸ƒå¼ï¼Œé€‚åˆå¤§è§„æ¨¡åŠ¨æ€ç¯å¢ƒã€‚ æŒ‘æˆ˜ï¼š æŸ¥è¯¢å»¶è¿Ÿå¯èƒ½è¾ƒé«˜ï¼Œä¸”å¯èƒ½å‡ºç°æŸ¥æ‰¾å¤±è´¥çš„æƒ…å†µã€‚ 4. åŸºäºå¹¿æ’­çš„èµ„æºå‘ç°ï¼ˆBroadcast-Based Resource Discoveryï¼‰ æ–¹æ³•è®¾è®¡ï¼š æ´ªæ³›æœç´¢ï¼š ç§»åŠ¨è®¾å¤‡å¯ä»¥å¹¿æ’­èµ„æºè¯·æ±‚ç»™æ‰€æœ‰é‚»è¿‘èŠ‚ç‚¹ï¼Œæ‰€æœ‰æ”¶åˆ°è¯·æ±‚çš„èŠ‚ç‚¹éƒ½ä¼šå“åº”ã€‚ é™åˆ¶å¹¿æ’­ï¼š ä¸ºå‡å°‘ç½‘ç»œæµé‡ï¼Œè®¾è®¡é™æ¬¡å¹¿æ’­æˆ–é€å±‚æ‰©å±•å¹¿æ’­ï¼ˆå¦‚æ—¶é—´ç”Ÿå­˜å€¼TTLï¼‰ã€‚ ä¼˜ç‚¹ï¼š ç®€å•ç›´æ¥ï¼Œé€‚åˆå°è§„æ¨¡ç½‘ç»œã€‚ æŒ‘æˆ˜ï¼š ç½‘ç»œå¼€é”€å¤§ï¼Œå®¹æ˜“é€ æˆå¹¿æ’­é£æš´ã€‚ 5. åŸºäºAI/MLçš„èµ„æºå‘ç°ï¼ˆAI/ML-Based Resource Discoveryï¼‰ æ–¹æ³•è®¾è®¡ï¼š é¢„æµ‹æ¨¡å‹ï¼š é€šè¿‡æœºå™¨å­¦ä¹ æ¨¡å‹é¢„æµ‹æœªæ¥èµ„æºéœ€æ±‚å’Œå¯ç”¨æ€§ï¼Œæ™ºèƒ½è°ƒåº¦èµ„æºåˆ†é…ã€‚ å¼ºåŒ–å­¦ä¹ ï¼š ä½¿ç”¨å¼ºåŒ–å­¦ä¹ æ–¹æ³•ï¼Œè®¾å¤‡å’Œè¾¹ç¼˜èŠ‚ç‚¹å¯ä»¥ä¸æ–­å­¦ä¹ å’Œä¼˜åŒ–èµ„æºå‘ç°ç­–ç•¥ã€‚ ä¼˜ç‚¹ï¼š åŠ¨æ€æ€§å’Œè‡ªé€‚åº”æ€§å¼ºï¼Œèƒ½å¤Ÿåº”å¯¹å¤æ‚ç¯å¢ƒã€‚ æŒ‘æˆ˜ï¼š éœ€è¦å¤§é‡è®­ç»ƒæ•°æ®å’Œè®¡ç®—èµ„æºï¼Œå¯èƒ½å¢åŠ ç³»ç»Ÿå¤æ‚æ€§ã€‚ 6. åŸºäºåä½œçš„èµ„æºå‘ç°ï¼ˆCollaborative Resource Discoveryï¼‰ æ–¹æ³•è®¾è®¡ï¼š åˆä½œå¼èµ„æºåˆ†äº«ï¼š å¤šä¸ªè¾¹ç¼˜èŠ‚ç‚¹åˆä½œåˆ†äº«å’Œå‘ç°èµ„æºï¼Œé€šè¿‡åˆä½œæœºåˆ¶ï¼Œå¦‚ä»»åŠ¡åˆ†å‘æˆ–èµ„æºå€Ÿç”¨ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚ åˆ†å¸ƒå¼è°ƒåº¦ï¼š åä½œå¼è°ƒåº¦æœºåˆ¶èƒ½å¤Ÿæ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§ã€èŠ‚ç‚¹è´Ÿè½½æƒ…å†µåŠ¨æ€è°ƒæ•´èµ„æºå‘ç°ç­–ç•¥ã€‚ ä¼˜ç‚¹ï¼š æé«˜èµ„æºåˆ©ç”¨æ•ˆç‡ï¼Œå‡å°‘å•ç‚¹ç“¶é¢ˆã€‚ æŒ‘æˆ˜ï¼š åä½œæœºåˆ¶çš„è®¾è®¡å¤æ‚ï¼Œéœ€è¦è€ƒè™‘å…¬å¹³æ€§å’Œèµ„æºå…±äº«çš„æ•ˆç‡ã€‚ 7. åŸºäºç‰©ç†ä½ç½®çš„èµ„æºå‘ç°ï¼ˆLocation-Based Resource Discoveryï¼‰ æ–¹æ³•è®¾è®¡ï¼š åœ°ç†è·ç¦»ä¼˜åŒ–ï¼š æ ¹æ®è®¾å¤‡ä¸è¾¹ç¼˜èŠ‚ç‚¹çš„ç‰©ç†è·ç¦»ä¼˜å…ˆé€‰æ‹©æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œä»¥é™ä½ç½‘ç»œå»¶è¿Ÿã€‚ åŒºåŸŸåˆ’åˆ†ï¼š å°†åŒºåŸŸåˆ’åˆ†ä¸ºå¤šä¸ªå°åŒºï¼Œæ¯ä¸ªå°åŒºå†…çš„èµ„æºé€šè¿‡åŒºåŸŸå†…å¹¿æ’­æˆ–P2Pæ–¹å¼å‘ç°ã€‚ ä¼˜ç‚¹ï¼š æé«˜æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ï¼Œå‡å°‘å»¶è¿Ÿã€‚ æŒ‘æˆ˜ï¼š éœ€è¦ç²¾ç¡®çš„ä½ç½®æ„ŸçŸ¥æŠ€æœ¯ï¼Œå¹¶å¯èƒ½é¢ä¸´åŒºåŸŸå†…èµ„æºä¸å‡è¡¡çš„é—®é¢˜ã€‚ æ–‡çŒ®ç»¼è¿° A. R. Khan, S. Imtiaz and A. H. Farooqi, â€œA Survey of the Resource Discovery Techniques in the Distributed Computing Systems,â€ 2022 International Conference on IT and Industrial Technologies (ICIT), Chiniot, Pakistan, 2022, pp. 1-6, doi: 10.1109/ICIT56493.2022.9989068. keywords: {Computer architecture;Distributed computing;distributed computing;resource discovery;net-work structures}, åˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿä¸­çš„èµ„æºå‘ç°æŠ€æœ¯ç»¼è¿° ä¸åŒç±»å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿç½‘æ ¼è®¡ç®—ç¯å¢ƒï¼ˆç¨€ç–ï¼‰åŒ…å«å¤šä¸ªå¯ç”¨èµ„æºï¼Œè¿™äº›èµ„æºé€šå¸¸ä½äºåè¿œä½ç½®ï¼Œè¿™äº›èµ„æºåœ¨åœ°ç†ä¸Šä½œä¸ºä¸€ä¸ªå•å…ƒå·¥ä½œã€‚ç›®æ ‡æ˜¯ä¸ºæ‰‹å¤´çš„å·¥ä½œå‘ç°æœ€æœ‰æ•ˆçš„èµ„æºã€‚ Javad Zarrin, Rui L Aguiar and JoÃ£o Paulo Barraca, â€œResource discovery for distributed computing systems: A comprehensive surveyâ€, Journal of parallel and distributed computing, vol. 113, pp. 127-166, 2018. P2Pè®¡ç®—ç³»ç»Ÿï¼ˆç‚¹å¯¹ç‚¹ï¼‰æ—¨åœ¨é€šè¿‡å…è®¸å¯¹ç­‰æ–¹ä¹‹é—´çš„èµ„æºå…±äº«æ¥å¢å¼ºåˆ†å¸ƒå¼ç¯å¢ƒçš„å¯æ‰©å±•æ€§ã€‚ S Vimal and S Srivatsa, â€œA new cluster p2p file sharing system based on ipfs and block-chain technologyâ€, Journal of Ambient Intelligence and Humanized Computing, pp. 1-7, 2019. é›†ç¾¤è®¡ç®—ï¼ˆé›†ä¸­ï¼‰ä¸»è¦è€ƒè™‘è°ƒåº¦é—®é¢˜ï¼Œè€Œä¸æ˜¯èµ„æºå‘ç°ã€‚ Huang Wenzhun, Wang Haoxiang, Zhang Yucheng and Zhang Shanwen, â€œA novel cluster computing technique based on signal clustering and analytic hierarchy model using hadoopâ€, Cluster Computing, vol. 22, pp. 13077-13084, 2019. ä¸»è¦é—®é¢˜ å¯æ‰©å±•æ€§ï¼šéšç€è®¡ç®—èµ„æºçš„å¢é•¿ ï¼Œå‘ç°ç®—æ³•å¿…é¡»ä¿æŒå…¶æ€§èƒ½ã€‚ æ•ˆç‡ï¼šæœ€å°åŒ–ç”¨æˆ·è¯·æ±‚å‘ç°é€‚å½“èµ„æºæ—¶çš„å“åº”æ—¶é—´ã€‚ å¼‚æ„æ€§ï¼šæ»¡è¶³ä¸åŒè®¾å¤‡çš„éœ€æ±‚ã€‚ å¯é æ€§ï¼šå®šæœŸç»´æŠ¤å·²å‘ç°çš„èµ„æºï¼Œä»¥æ¶ˆé™¤èµ„æºä¸ä¸€è‡´ã€‚ ä¸»è¦çš„æ–¹æ³• æ‰‹åŠ¨æ–¹æ³• æ‰‹åŠ¨æ–¹æ³•ä¾èµ–äºç”¨æˆ·æ‰‹åŠ¨è¾“å…¥èµ„æºè¯·æ±‚å¹¶é€‰æ‹©åˆé€‚çš„èµ„æºã€‚è¯¥æ–¹æ³•é€šå¸¸é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼å¤„ç†è¯·æ±‚ï¼Œå…ˆæ¥æ”¶ç”¨æˆ·çš„èµ„æºè¯·æ±‚ï¼Œç„¶åæŒ‰èµ„æºä¸è¯·æ±‚çš„åŒ¹é…åº¦æ’åºï¼Œæœ€åæ ¹æ®è®¿é—®æˆæœ¬å¯¹èµ„æºè¿›è¡Œåˆ†ç»„ã€‚è™½ç„¶è¿™ç§æ–¹æ³•ç®€å•ç›´æ¥ï¼Œä½†å®¹æ˜“å‡ºç°æœåŠ¡è´¨é‡é—®é¢˜ï¼Œå› ä¸ºä¼˜åŒ–çš„èµ„æºåˆ—è¡¨æ˜¯åœ¨å®æ—¶è®¡ç®—çš„ Massimiliano Assante, Leonardo Candela, Donatella Castelli, Roberto Cirillo, Gianpaolo Coro, Luca Frosini, Lucio Lelii, Francesco Man-giacrapa, Valentina Marioli, Pasquale Pagano et al., â€œThe gcube system: delivering virtual research environments as-a-serviceâ€, Future Generation Computer Systems, vol. 95, pp. 445-453, 2019. åŸºäºæ ‘çš„æ–¹æ³• åŸºäºæ ‘çš„æ–¹æ³•ä½¿ç”¨å†³ç­–æ ‘æˆ–å…¶ä»–æ ‘å½¢ç»“æ„æ¥ç»„ç»‡å’Œç®¡ç†èµ„æºã€‚è¿™äº›æ–¹æ³•é€šè¿‡å®šæœŸæ›´æ–°èŠ‚ç‚¹çš„å±æ€§å€¼ï¼Œå¹¶æŒ‰ä¼˜åŒ–çš„é¡ºåºå­˜å‚¨èµ„æºä¿¡æ¯ï¼Œä»è€Œå¿«é€Ÿæ‰¾åˆ°ç¬¦åˆç”¨æˆ·æ¡ä»¶çš„èµ„æºã€‚æ ‘ç»“æ„çš„ä¼˜åŠ¿åœ¨äºå…¶æŸ¥æ‰¾æ•ˆç‡ï¼ˆå¦‚O(log n)ï¼‰ï¼Œä½†åœ¨æ•°æ®ä¸å¹³è¡¡çš„æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´æŸ¥æ‰¾æ•ˆç‡é™ä½ æ„Ÿè§‰çº¢é»‘æ ‘å¯ä»¥è§£å†³å¹³è¡¡é—®é¢˜ï¼Œç„¶åä¸ªäººæ„Ÿè§‰è¿™å°±æ˜¯åœ¨æ‰‹åŠ¨æ–¹æ³•ä¸Šé¢åŠ äº†ä¸€ä¸ªå­˜å‚¨çš„æ•°æ®ç»“æ„ï¼Ÿ Mohammad Samadi Gharajeh, â€œA knowledge and intelligent-based strategy for resource discovery on iaas cloud systemsâ€, Int. J. Grid Util. Comput., vol. 12, no. 2, pp. 205-221, 2021. è¯­ä¹‰æ–¹æ³• è¯­ä¹‰æ–¹æ³•åˆ©ç”¨è¯­ä¹‰ç½‘æŠ€æœ¯ï¼Œé€šè¿‡æ„å»ºé¢†åŸŸç‰¹å®šçš„æœ¬ä½“ï¼ˆOntologyï¼‰æ¥å®ç°èµ„æºå‘ç°ã€‚è¿™äº›æ–¹æ³•é€šè¿‡å­˜å‚¨å’Œç®¡ç†èŠ‚ç‚¹çš„è¯­ä¹‰ä¿¡æ¯ï¼Œæ¥å¸®åŠ©æ‰¾åˆ°ç›¸å…³é¢†åŸŸçš„èµ„æºã€‚ç„¶è€Œï¼Œç”±äºä¾èµ–é¢†åŸŸçŸ¥è¯†ï¼Œè¿™äº›æ–¹æ³•åœ¨å¯æ‰©å±•æ€§æ–¹é¢å­˜åœ¨å±€é™æ€§ è¯­ä¹‰ç½‘æŠ€æœ¯æ˜¯ä¸€ç§é€šè¿‡ä¸ºä¿¡æ¯èµ‹äºˆæ˜ç¡®æ„ä¹‰çš„æŠ€æœ¯ï¼Œä½¿æœºå™¨èƒ½å¤Ÿç†è§£å’Œå¤„ç†æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯è¯»å–ã€‚å®ƒä¸ºæ•°æ®æä¾›äº†ä¸€ä¸ªç»“æ„åŒ–çš„ã€æ ‡å‡†åŒ–çš„è¡¨ç¤ºå½¢å¼ï¼Œä½¿å¾—ä¸åŒç³»ç»Ÿä¹‹é—´çš„æ•°æ®å¯ä»¥ç›¸äº’ç†è§£å’Œå¤„ç†ã€‚ æœ¬ä½“æ˜¯åœ¨ç‰¹å®šé¢†åŸŸå†…å®šä¹‰çš„æ¦‚å¿µå’Œå…³ç³»çš„é›†åˆï¼Œç®€å•æ¥è¯´ï¼Œå®ƒä¸ºæŸä¸€é¢†åŸŸçš„æ¦‚å¿µæä¾›äº†ä¸€ç§æ ‡å‡†åŒ–çš„è¡¨è¾¾æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨åŒ»ç–—é¢†åŸŸï¼Œâ€œåŒ»ç”Ÿâ€ã€â€œç—…äººâ€ã€â€œæ²»ç–—â€å¯èƒ½éƒ½æ˜¯æœ¬ä½“ä¸­çš„æ¦‚å¿µï¼Œè€Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»åˆ™å¯ä»¥è¢«æ¸…æ™°åœ°å®šä¹‰å‡ºæ¥ã€‚ Aolong Zhou, Kaijun Ren, Xiaoyong Li, Wen Zhang, Xiaoli Ren and Kefeng Deng, â€œSemantic-based discovery method for high-performance computing resources in cyber-physical systemsâ€, Microprocessors and Microsystems, vol. 80, pp. 103328, 2021. åŸºäºå¯¹è±¡çš„æ–¹æ³• åŸºäºå¯¹è±¡çš„æ–¹æ³•é‡‡ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥ç»„ç»‡èŠ‚ç‚¹å’Œèµ„æºä¿¡æ¯ã€‚èµ„æºä»¥å¯¹è±¡çš„å½¢å¼å­˜å‚¨ï¼Œå¹¶æ ¹æ®å¯¹è±¡ä¹‹é—´çš„å…³ç³»è¿›è¡Œç®¡ç†ã€‚è¿™ç§æ–¹æ³•åœ¨ç®¡ç†å¤§è§„æ¨¡èŠ‚ç‚¹æ—¶å…·æœ‰ä¼˜åŠ¿ï¼Œä½†ç”±äºç»´æŠ¤æ¯ä¸ªå¯¹è±¡çš„å…ƒä¿¡æ¯çš„å¤æ‚æ€§ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šã€‚ è¾¹ç¼˜è®¡ç®—æ–¹æ³• è¾¹ç¼˜è®¡ç®—æ–¹æ³•é€‚ç”¨äºç‰©è”ç½‘ï¼ˆIoTï¼‰ç­‰åˆ†å¸ƒå¼ç½‘ç»œç¯å¢ƒï¼Œé‡ç‚¹åœ¨äºåœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šå‘ç°å’Œç®¡ç†èµ„æºã€‚è¿™ç§æ–¹æ³•å¯ä»¥ç»“åˆå…¶ä»–æ–¹æ³•ï¼ˆå¦‚åŸºäºæ ‘æˆ–è¯­ä¹‰çš„æ–¹æ³•ï¼‰æ¥ä¼˜åŒ–èµ„æºå‘ç°ï¼Œç‰¹åˆ«é€‚åˆåœ¨æ€§èƒ½å’ŒæœåŠ¡è´¨é‡è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ä¸­åº”ç”¨ã€‚ Gyeongmin Lee, Bongjun Kim, Seungbin Song, Seonyeong Heo and Hanjun Kim, â€œComflex: Composable and flexible resource management for the iotâ€, IEEE Internet of Things Journal, vol. 8, no. 22, pp. 16406-16417, 2020. ä¸€äº›ç›¸å…³çš„è®ºæ–‡ä¸€ç§åœ¨è¾¹ç¼˜ç½‘ç»œä¸­ä½¿ç”¨å…ƒæ•°æ®å¤åˆ¶è¿›è¡Œèµ„æºå‘ç°çš„å»ä¸­å¿ƒåŒ–æ–¹æ³• I. Murturi and S. Dustdar, â€œA Decentralized Approach for Resource Discovery using Metadata Replication in Edge Networks,â€ in IEEE Transactions on Services Computing, vol. 15, no. 5, pp. 2526-2537, 1 Sept.-Oct. 2022, doi: 10.1109/TSC.2021.3082305. é—®é¢˜èƒŒæ™¯ å¿½è§†äº†ä»»åŠ¡ä¸ç‰©è”ç½‘èµ„æºä¹‹é—´çš„å…³è”æ€§ï¼ˆå°±æ˜¯è¯´åˆ†é…çš„ä»»åŠ¡å¯èƒ½æ˜¯è¯¥ç‰©è”ç½‘è®¾å¤‡ä¸æ“…é•¿çš„ï¼‰ è¾¹ç¼˜è®¾å¤‡å’Œç½‘ç»œç»„ç»‡ä¹‹é—´çš„é€šä¿¡è¢«å¿½è§†ï¼ˆæ¯”å¦‚è®¾å¤‡ã€è¾¹ç¼˜æœåŠ¡å™¨ã€äº‘æœåŠ¡å™¨è¿™äº›ä¹‹é—´çš„é€šä¿¡æˆ–è€…ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼‰ æ€è·¯ åº”æŒ‡å®šè¾¹ç¼˜ç½‘ç»œä»¥å»ä¸­å¿ƒåŒ–å’Œè‡ªåŠ¨çš„æ–¹å¼å¤„ç†å‘ç°èµ„æºçš„å¤æ‚æ€§ï¼ˆæ¶æ„ä¸Šï¼‰ ä»¥P2Pçš„æ–¹å¼è¿æ¥è¾¹ç¼˜è®¾å¤‡ã€‚ä¸€ç»„è¾¹ç¼˜è®¾å¤‡ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼ˆclusterï¼‰;è€Œå¤šä¸ªç›¸è¿çš„é›†ç¾¤ç»„æˆä¸€ä¸ªè¾¹ç¼˜ç½‘ç»œï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ªè¾¹ç¼˜é‚»åŸŸï¼ˆedge neighborhoodï¼‰ã€‚è¿˜å­˜åœ¨ç›¸åº”çš„ç³»ç»Ÿåè°ƒå™¨ï¼Œç”¨äºç»„ç»‡å‘ç°èµ„æºçš„è¿‡ç¨‹ã€‚å»ºç«‹åœ¨ Kademlia åè®®ä¹‹ä¸Šï¼Œä½œä¸ºè¾¹ç¼˜è®¾å¤‡ä¹‹é—´çš„é€šä¿¡åè®®ã€‚Kademlia æ˜¯ç”¨äºå»ä¸­å¿ƒåŒ– P2P è®¡ç®—æœºç½‘ç»œçš„åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ ï¼ˆDHTï¼‰ã€‚å½“è¾¹ç¼˜è®¾å¤‡æ›´æ–°å…¶æœ¬åœ° DHT æ—¶ï¼Œè¿™äº›æ›´æ”¹ä¼šä¼ æ’­åˆ°æ‰€æœ‰å…¶ä»–è®¾å¤‡ï¼Œä»è€Œå…è®¸å†æ¬¡æŸ¥è¯¢å’Œæ“ä½œå®ƒä»¬ã€‚åŒæ ·ï¼Œæœ‰å…³å½“å‰é›†ç¾¤åè°ƒå‘˜å’Œå…¨å±€åè°ƒå‘˜çš„ä¿¡æ¯ä¹Ÿå­˜å‚¨åœ¨ DHT ä¸­ã€‚åè°ƒå™¨æ˜¯åŠ¨æ€æ”¾ç½®çš„ï¼Œå¹¶åœ¨æä¾›å„ç§æœåŠ¡çš„æœ€åˆé€‚çš„è¾¹ç¼˜è®¾å¤‡ä¸Šè¿è¡Œï¼ŒåŠ¨æ€è¯„ä¼°ã€‚ å‘ç°è¾¹ç¼˜æ®µçš„å¯ç”¨èµ„æºï¼ˆå‘ç°è¿‡ç¨‹ï¼‰ ä»¥è‡ªåŠ¨æ–¹å¼åœ¨è¾¹ç¼˜è®¾å¤‡ä¹‹é—´äº¤æ¢æœ‰å…³å¯ç”¨èµ„æºçš„ä¿¡æ¯ï¼š iï¼‰åœ¨æ•´ä¸ªç³»ç»Ÿä¸­å…±äº«èµ„æº iiï¼‰è¾¹ç¼˜è®¾å¤‡åœ¨æœ¬åœ°æ‰§è¡Œå¤æ‚çš„æŸ¥è¯¢ é€šè¿‡æä¾›æœ‰å…³åŠŸèƒ½åŠå…¶å±æ€§çš„æŸäº›æ ¸å¿ƒä¿¡æ¯æ¥æè¿°èµ„æºã€‚è¿™ç§ç±»å‹çš„æè¿°ç§°ä¸ºèµ„æºçš„å…ƒæ•°æ®ï¼Œåœ¨è¾¹ç¼˜è®¾å¤‡ä¹‹é—´å¤åˆ¶å¹¶ä»¥åˆ†å¸ƒå¼çš„æ–¹å¼å­˜å‚¨ã€‚ æ ¹æ®æ¯ä¸ªè¾¹ç¼˜è®¾å¤‡çš„èµ„æºåå¥½å¤„ç†éšç§æ–¹é¢ï¼Œç¡®ä¿å¹¶éæ‰€æœ‰èµ„æºéƒ½åœ¨æ•´ä¸ªç³»ç»Ÿä¸­å…¬å¸ƒ é‚»å±…é›†ç¾¤æ˜¯é€šè¿‡ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ï¼ˆå³ traceroute å‘½ä»¤ï¼‰æ¥æ‰¾åˆ°çš„ï¼Œè¯¥å‘½ä»¤ä¼°è®¡ä¸å…¶ä»–é›†ç¾¤åè°ƒå™¨çš„æ¥è¿‘ç¨‹åº¦ï¼ˆå³ï¼Œä½¿ç”¨è·ƒç‚¹è®¡æ•°å’Œå»¶è¿Ÿï¼‰ã€‚ åœºæ™¯åŸå¸‚è‡ªç„¶ç¾å®³ï¼Œæ— äººæœºé…å¤‡å¤šç§è®¡ç®—èƒ½åŠ›å’Œä¼ æ„Ÿå™¨ã€‚è€ƒè™‘ä¸‰å±‚äº‘åŸºç¡€è®¾æ–½ï¼šäº‘ã€é›¾ã€è¾¹ç¼˜ã€‚é›¾è®¾å¤‡æä¾›è®¡ç®—å’Œé•¿æœŸå­˜å‚¨åŠŸèƒ½ã€‚ æ¯ä¸ªç°‡éƒ½æœ‰ä¸€ä¸ªåè°ƒå™¨è®¾å¤‡ï¼ˆå³å¸¦æœ‰ç»¿è‰²åœ†åœˆï¼‰å’Œä¸€ä¸ªå…¨å±€åè°ƒå™¨è®¾å¤‡ï¼ˆå³å¸¦æœ‰çº¢è‰²å’Œç»¿è‰²åœ†åœˆï¼‰ã€‚æˆ‘ä»¬å‡è®¾é›†ç¾¤åè°ƒå™¨å……å½“è¶…çº§å¯¹ç­‰ä½“ [35] ã€‚æ¯ä¸ªé›†ç¾¤åè°ƒå™¨éƒ½è·Ÿè¸ªåŒä¸€é›†ç¾¤ä¸­çš„å…¶ä»–åè°ƒå™¨å’Œè®¾å¤‡ï¼ˆå³ IP åœ°å€ã€ç«¯å£ï¼‰ã€‚åŒæ ·ï¼ŒåŒä¸€é›†ç¾¤ä¸­çš„è¾¹ç¼˜è®¾å¤‡ç›¸äº’å­˜å‚¨ä¿¡æ¯ï¼Œå¹¶å§‹ç»ˆäº†è§£å…¶é›†ç¾¤åè°ƒå™¨å’Œå…¨å±€åè°ƒå™¨ã€‚é›†ç¾¤åè°ƒå™¨å¯èƒ½å¯¹è®¾å¤‡å­é›†æ‰¿æ‹…å„ç§èŒè´£ï¼ˆå³ï¼Œç›‘è§†ã€å‘ç°èµ„æºç­‰ï¼‰ã€‚å…¨å±€åè°ƒå™¨è´Ÿè´£ç›‘æ§åè°ƒå™¨ï¼Œåœ¨é›†ç¾¤ä¹‹é—´äº¤æ¢èµ„æºæè¿°ï¼Œå¹¶åœ¨è¾¹ç¼˜äº‘åŸºç¡€è®¾æ–½ä¸­ç¼–æ’è¾¹ç¼˜åº”ç”¨ç¨‹åºï¼ˆå³æ§åˆ¶å¼¹æ€§ã€è¿ç§»ä»»åŠ¡ç­‰ï¼‰ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸‰ä¸ªæ–¹é¢ï¼šiï¼‰åœ¨è¾¹ç¼˜é‚»åŸŸä¸­ç»„ç»‡è¾¹ç¼˜è®¾å¤‡ï¼Œiiï¼‰ç¡®å®šæœ€é€‚åˆæ”¾ç½®å…¨å±€å’Œé›†ç¾¤åè°ƒå™¨çš„è®¾å¤‡ï¼Œä»¥åŠiiiï¼‰åœ¨å¼‚æ„å’ŒåŠ¨æ€çš„è¾¹ç¼˜é‚»åŸŸä¸Šå®ç°è‡ªåŠ¨èµ„æºå‘ç°ã€‚ èµ„æºåˆ‡æ¢èµ„æºåˆ‡æ¢æ˜¯æŒ‡å½“ç§»åŠ¨è®¾å¤‡åœ¨ä¸åŒçš„ç½‘ç»œç¯å¢ƒæˆ–ç‰©ç†ä½ç½®é—´ç§»åŠ¨æ—¶ï¼Œéœ€è¦æ— ç¼åœ°åˆ‡æ¢æ­£åœ¨ä½¿ç”¨çš„è¾¹ç¼˜èµ„æºã€‚ä¾‹å¦‚ï¼Œå½“è®¾å¤‡ä»ä¸€ä¸ªè¾¹ç¼˜èŠ‚ç‚¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„è¦†ç›–èŒƒå›´å†…æ—¶ï¼Œéœ€è¦ç¡®ä¿è®¡ç®—ä»»åŠ¡çš„è¿ç§»ä¸ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚è¿™åŒ…æ‹¬æ•°æ®è¿ç§»ã€ä¼šè¯ä¿æŒä»¥åŠè®¡ç®—ä»»åŠ¡çš„çŠ¶æ€ä¿æŒç­‰æŠ€æœ¯ã€‚ ä¸€äº›ç®—æ³•1. åŸºäºä¿¡å·å¼ºåº¦çš„åˆ‡æ¢ï¼ˆSignal Strength-Based Handoffï¼‰ æ–¹æ³•è®¾è®¡ï¼š ä¿¡å·æµ‹é‡ï¼š ç§»åŠ¨è®¾å¤‡é€šè¿‡æŒç»­æµ‹é‡å½“å‰è¿æ¥èŠ‚ç‚¹çš„ä¿¡å·å¼ºåº¦ã€‚å½“ä¿¡å·å¼ºåº¦ä½äºé˜ˆå€¼æ—¶ï¼Œè§¦å‘åˆ‡æ¢ã€‚ åˆ‡æ¢ç­–ç•¥ï¼š ç³»ç»Ÿä¼šæœç´¢å‘¨å›´å…¶ä»–è¾¹ç¼˜èŠ‚ç‚¹çš„ä¿¡å·å¼ºåº¦ï¼Œå¹¶é€‰æ‹©ä¿¡å·æœ€å¼ºçš„èŠ‚ç‚¹è¿›è¡Œåˆ‡æ¢ã€‚ ä¼˜ç‚¹ï¼š ç®€å•ç›´è§‚ï¼Œæ˜“äºå®ç°ã€‚ æŒ‘æˆ˜ï¼š å®¹æ˜“äº§ç”Ÿé¢‘ç¹åˆ‡æ¢ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¿¡å·å¼ºåº¦æ³¢åŠ¨è¾ƒå¤§çš„æƒ…å†µä¸‹ã€‚ 2. åŸºäºä½ç½®é¢„æµ‹çš„åˆ‡æ¢ï¼ˆLocation Prediction-Based Handoffï¼‰ æ–¹æ³•è®¾è®¡ï¼š ä½ç½®è·Ÿè¸ªï¼š ä½¿ç”¨GPSæˆ–å…¶ä»–å®šä½æŠ€æœ¯è·Ÿè¸ªè®¾å¤‡çš„ä½ç½®å˜åŒ–ã€‚ è¿åŠ¨é¢„æµ‹ï¼š é€šè¿‡å†å²ä½ç½®æ•°æ®å’Œè¿åŠ¨æ¨¡å¼é¢„æµ‹è®¾å¤‡çš„æœªæ¥ä½ç½®ï¼Œä»è€Œæå‰ç¡®å®šå¯èƒ½çš„åˆ‡æ¢èŠ‚ç‚¹ã€‚ ä¼˜ç‚¹ï¼š æå‰å‡†å¤‡åˆ‡æ¢ï¼Œå‡å°‘æœåŠ¡ä¸­æ–­ã€‚ æŒ‘æˆ˜ï¼š éœ€è¦ç²¾ç¡®çš„è¿åŠ¨é¢„æµ‹ç®—æ³•ï¼Œä¸”åœ¨å¤æ‚ç¯å¢ƒä¸‹å®šä½ç²¾åº¦å¯èƒ½å—é™ã€‚ 3. åŸºäºè´Ÿè½½å‡è¡¡çš„åˆ‡æ¢ï¼ˆLoad Balancing-Based Handoffï¼‰ æ–¹æ³•è®¾è®¡ï¼š è´Ÿè½½ç›‘æ§ï¼š æŒç»­ç›‘æ§å½“å‰è¾¹ç¼˜èŠ‚ç‚¹çš„è®¡ç®—å’Œç½‘ç»œè´Ÿè½½ï¼Œå½“è´Ÿè½½è¶…è¿‡è®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œå¯åŠ¨åˆ‡æ¢ã€‚ åŠ¨æ€åˆ†é…ï¼š åˆ‡æ¢åˆ°è´Ÿè½½è¾ƒè½»çš„èŠ‚ç‚¹ï¼Œä»¥ä¿è¯æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ã€‚ ä¼˜ç‚¹ï¼š ä¿è¯èŠ‚ç‚¹çš„é«˜æ•ˆåˆ©ç”¨ï¼Œé˜²æ­¢è¿‡è½½ã€‚ æŒ‘æˆ˜ï¼š å¯èƒ½å¼•å…¥é¢å¤–çš„å»¶è¿Ÿï¼Œå°¤å…¶æ˜¯åœ¨è´Ÿè½½æ³¢åŠ¨è¾ƒå¤§æ—¶ã€‚ 4. åŸºäºå»¶è¿Ÿæ„ŸçŸ¥çš„åˆ‡æ¢ï¼ˆLatency-Aware Handoffï¼‰ æ–¹æ³•è®¾è®¡ï¼š å»¶è¿Ÿæµ‹é‡ï¼š æŒç»­ç›‘æµ‹å½“å‰èŠ‚ç‚¹åˆ°è®¾å¤‡ä¹‹é—´çš„é€šä¿¡å»¶è¿Ÿã€‚ åˆ‡æ¢å†³ç­–ï¼š å½“å»¶è¿Ÿè¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼Œç³»ç»Ÿå°†è®¾å¤‡åˆ‡æ¢åˆ°å»¶è¿Ÿè¾ƒä½çš„èŠ‚ç‚¹ã€‚ ä¼˜ç‚¹ï¼š æé«˜ç”¨æˆ·ä½“éªŒï¼Œé€‚åˆå¯¹å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ï¼ˆå¦‚è§†é¢‘æµæˆ–åœ¨çº¿æ¸¸æˆï¼‰ã€‚ æŒ‘æˆ˜ï¼š éœ€è¦å®æ—¶çš„å»¶è¿Ÿç›‘æµ‹ï¼Œå¹¶ä¸”åœ¨ç½‘ç»œæ‹¥å¡æ—¶å¯èƒ½éš¾ä»¥æ‰¾åˆ°æ›´å¥½çš„èŠ‚ç‚¹ã€‚ 5. åŸºäºä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„åˆ‡æ¢ï¼ˆContext-Aware Handoffï¼‰ æ–¹æ³•è®¾è®¡ï¼š å¤šå‚æ•°æ„ŸçŸ¥ï¼š ç»“åˆå¤šç§ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚è®¾å¤‡ç”µé‡ã€ç”¨æˆ·è¡Œä¸ºã€ç½‘ç»œçŠ¶å†µï¼‰æ¥åšå‡ºåˆ‡æ¢å†³ç­–ã€‚ è‡ªé€‚åº”åˆ‡æ¢ï¼š æ ¹æ®ä¸åŒçš„åº”ç”¨éœ€æ±‚å’Œç”¨æˆ·åå¥½ï¼ŒåŠ¨æ€è°ƒæ•´åˆ‡æ¢ç­–ç•¥ã€‚ ä¼˜ç‚¹ï¼š æ›´æ™ºèƒ½çš„åˆ‡æ¢å†³ç­–ï¼Œæé«˜æœåŠ¡çš„ä¸ªæ€§åŒ–ä½“éªŒã€‚ æŒ‘æˆ˜ï¼š ç³»ç»Ÿå¤æ‚åº¦é«˜ï¼Œéœ€è¦å¤„ç†å’Œåˆ†æå¤§é‡ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ 6. åŸºäºAI/MLçš„åˆ‡æ¢ï¼ˆAI/ML-Based Handoffï¼‰ æ–¹æ³•è®¾è®¡ï¼š æœºå™¨å­¦ä¹ æ¨¡å‹ï¼š é€šè¿‡è®­ç»ƒæ¨¡å‹æ¥é¢„æµ‹æœ€ä¼˜åˆ‡æ¢èŠ‚ç‚¹ï¼Œå­¦ä¹ ä¸åŒç¯å¢ƒä¸‹çš„æœ€ä½³åˆ‡æ¢ç­–ç•¥ã€‚ å¼ºåŒ–å­¦ä¹ ï¼š ä½¿ç”¨å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œè®¾å¤‡å’Œè¾¹ç¼˜èŠ‚ç‚¹å¯ä»¥åœ¨è¿è¡Œä¸­ä¸æ–­ä¼˜åŒ–åˆ‡æ¢ç­–ç•¥ã€‚ ä¼˜ç‚¹ï¼š é€‚åº”å¤æ‚åŠ¨æ€ç¯å¢ƒï¼Œèƒ½å¤Ÿè‡ªåŠ¨è°ƒæ•´åˆ‡æ¢ç­–ç•¥ã€‚ æŒ‘æˆ˜ï¼š éœ€è¦å¤§é‡æ•°æ®å’Œè®¡ç®—èµ„æºï¼Œä¸”è®­ç»ƒè¿‡ç¨‹å¯èƒ½è¾ƒä¸ºå¤æ‚ã€‚ 7. åŸºäºå¤šè·¯å¾„çš„åˆ‡æ¢ï¼ˆMulti-Path-Based Handoffï¼‰ æ–¹æ³•è®¾è®¡ï¼š å¤šè·¯å¾„è¿æ¥ï¼š åœ¨è®¾å¤‡åŒæ—¶ä¿æŒå¤šä¸ªè¾¹ç¼˜èŠ‚ç‚¹çš„è¿æ¥ï¼Œé€‰æ‹©æœ€ä½³è·¯å¾„ä¼ è¾“æ•°æ®ã€‚ åˆ‡æ¢æ—¶æœºï¼š å½“ä¸»è·¯å¾„çš„æ€§èƒ½ä¸‹é™æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°æ¬¡ä¼˜è·¯å¾„ï¼Œç¡®ä¿æœåŠ¡è¿ç»­æ€§ã€‚ ä¼˜ç‚¹ï¼š æé«˜äº†åˆ‡æ¢çš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚ æŒ‘æˆ˜ï¼š èµ„æºå¼€é”€è¾ƒå¤§ï¼Œä¸”ç®¡ç†å¤šè·¯å¾„è¿æ¥çš„å¤æ‚æ€§è¾ƒé«˜ã€‚ ç›¸å…³è®ºæ–‡å¤šç”¨æˆ·å¼‚æ„å¯†é›†èœ‚çªç½‘ç»œçš„é«˜èƒ½æ•ˆä¸šåŠ¡è¿ç§» X. Zhou, S. Ge, T. Qiu, K. Li and M. Atiquzzaman, â€œEnergy-Efficient Service Migration for Multi-User Heterogeneous Dense Cellular Networks,â€ in IEEE Transactions on Mobile Computing, vol. 22, no. 2, pp. 890-905, 1 Feb. 2023, doi: 10.1109/TMC.2021.3087198. æ‘˜è¦ä¸šåŠ¡è¿ç§»ä½œä¸ºä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œç›®çš„æ˜¯åœ¨æ»¡è¶³æœåŠ¡å»¶è¿Ÿè¦æ±‚çš„åŒæ—¶ï¼ŒåŒæ—¶è€ƒè™‘åˆ°ä¸åŒç”¨æˆ·ä¹‹é—´çš„å¹²æ‰°ï¼Œæœ€å¤§é™åº¦åœ°é™ä½å¹³å‡èƒ½è€—ã€‚ å¼€å‘äº†ä¸€ç§åŸºäº Lyapunov å’Œç²’å­ç¾¤ä¼˜åŒ–çš„é«˜æ•ˆèŠ‚èƒ½åœ¨çº¿ç®—æ³•ï¼Œç§°ä¸º EGOï¼Œå¯ä»¥åœ¨ä¸é¢„æµ‹ç”¨æˆ·è½¨è¿¹çš„æƒ…å†µä¸‹è§£å†³åŸå§‹é—®é¢˜ã€‚ æ–¹æ³•è®¾è®¡åœ¨æ¯ä¸ªåŸºç«™è®¾ç½®ä¸‰å±‚ç»“æ„ï¼š åŸºç¡€å±‚ï¼ˆBase layerï¼‰ï¼šè¿™æ˜¯æœ€åº•å±‚çš„ï¼Œç±»ä¼¼äºæ“ä½œç³»ç»Ÿï¼Œæ˜¯æ¯ä¸ªè¾¹ç¼˜æœåŠ¡å™¨ä¸Šé€šç”¨çš„éƒ¨åˆ†ã€‚æ— è®ºæ˜¯å“ªç§æœåŠ¡æˆ–ç”¨æˆ·ï¼Œè¿™ä¸€å±‚éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè´Ÿè´£æä¾›åŸºæœ¬çš„è®¡ç®—èµ„æºå’Œç¯å¢ƒæ”¯æŒã€‚ åº”ç”¨å±‚ï¼ˆApplication layerï¼‰ï¼šè¿™ä¸€å±‚ä½äºåŸºç¡€å±‚ä¹‹ä¸Šï¼Œç”±å¤šä¸ªç”¨æˆ·å…±äº«ã€‚å®ƒåŒ…å«äº†ç‰¹å®šçš„æœåŠ¡åº”ç”¨ç¨‹åºï¼Œä¹Ÿå°±æ˜¯è¿è¡Œåœ¨è¾¹ç¼˜æœåŠ¡å™¨ä¸Šçš„å®é™…ä¸šåŠ¡é€»è¾‘å’ŒåŠŸèƒ½ã€‚å½“ä¸åŒç”¨æˆ·è¯·æ±‚ç›¸åŒçš„æœåŠ¡æ—¶ï¼Œä»–ä»¬ä¼šå…±äº«åŒä¸€ä¸ªåº”ç”¨å±‚ã€‚ å®ä¾‹å±‚ï¼ˆInstance layerï¼‰ï¼šè¿™æ˜¯æœ€ä¸Šå±‚ï¼Œä¸å…·ä½“çš„ç”¨æˆ·ç»‘å®šï¼ŒåŒ…å«è¯¥ç”¨æˆ·çš„æœåŠ¡çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚è¯·æ±‚å†å²ã€ç”¨æˆ·ä¿¡æ¯ä»¥åŠå…¶ä»–ç§å¯†æ•°æ®ã€‚æ¯ä¸ªç”¨æˆ·çš„å®ä¾‹å±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œç”¨äºä¿å­˜ç”¨æˆ·çš„ä¸ªæ€§åŒ–æ•°æ®ã€‚ å¦‚æœç›®æ ‡è¾¹ç¼˜æœåŠ¡å™¨ä¸­å·²ç»éƒ¨ç½²äº†åº”ç”¨å±‚ï¼Œåˆ™ç”¨æˆ·åªéœ€ä»ä¸Šä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼ˆç›¸é‚»çš„ BSï¼‰è¿ç§»å…¶å®ä¾‹å±‚å³å¯ã€‚å¦åˆ™ï¼Œç”¨æˆ·éœ€è¦åŒæ—¶è¿ç§»åº”ç”¨å±‚å’Œå®ä¾‹å±‚ã€‚ å…·ä½“å»ºæ¨¡ è¿™ä¸ªå…¬ç¤ºä»£è¡¨ï¼Œç”¨æˆ·åœ¨æŸä¸€æ—¶é—´æ§½åªè¿æ¥åˆ°ä¸€ä¸ªåŸºç«™ï¼š è¿™ä¸ªx'æ˜¯æŒ‡çš„tæ—¶åˆ»å°†è¦è¿ç§»çš„æœåŠ¡ï¼Œæ„Ÿè§‰æœ‰ç‚¹å¯¼æ•°çš„é‚£ä¸ªæ„æ€ï¼Œä¹Ÿå³ä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€ è¿™ä¸ªæ˜¯æŒ‡tæ—¶åˆ»nåŸºç«™ä¸Šçš„mæœåŠ¡ï¼Œå¦‚æœå­˜åœ¨æœ‰äººåœ¨ç”³è¯·ï¼ˆ\\ge1ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªP_t(m,n)ï¼ˆPlaceæœåŠ¡çš„æ•°é‡ï¼‰å°±æ˜¯1ï¼Œå¦‚æœä¸€ä¸ªéƒ½æ²¡ç”³è¯·ï¼Œé‚£ä¹ˆå°±æ˜¯0. ç”¨å…«å…ƒç»„æ¥è¡¨ç¤ºä¸€ä¸ªæœåŠ¡ï¼š å…·ä½“å«ä¹‰è§ä¸Šé¢çš„è¡¨æ ¼ ä»¥ä¸‹ä¸‰ä¸ªå…¬å¼åˆ†åˆ«å¯¹åŸºç«™nä¸ŠæŸä¸ªæ—¶åˆ»è¿ç§»æœåŠ¡æ—¶çš„æœ€å¤§CPUé¢‘ç‡ã€æœ€å¤§å­˜å‚¨å®¹é‡ã€æœ€å¤§ä¿¡é“å¸¦å®½è¿›è¡Œäº†çº¦æŸï¼Œå°±æ˜¯åœ¨ä»»ä½•ä¸€ä¸ªæ—¶åˆ»ï¼Œè¿ç§»æ—¶çš„è¿™ä¸‰ä¸ªå€¼éƒ½ä¸å¾—è¶…è¿‡æœ€å¤§å€¼ \\begin{equation*} \\sum \\limits _{m=1}^M\\sum \\limits _{u=1}^U f_{m,u} x_{m,t}^\\prime (u,n) \\leq F_n,\\forall t,n, \\end{equation*} \\begin{equation*} \\sum \\limits _{m=1}^M\\Bigg [\\sum \\limits _{u=1}^U \\theta _{m,u}^I x_{m,t}^\\prime (u,n) + \\theta _m^A P_t^\\prime (m,n)\\Bigg ] \\leq S_n,\\forall t,n,\\end{equation*} \\begin{equation*} \\sum \\limits _{m=1}^M \\sum \\limits _{u=1}^U W_{m,u} x_{m,t}^\\prime (u,n) \\leq W_n,\\forall t,n, \\end{equation*}ä¼ è¾“é€Ÿç‡: \\begin{equation*} R(a,b)=W\\log _{2}\\left(1+\\frac{p_{a} h d(a,b)^{-3}}{N_0}\\right) \\end{equation*}ï¼Œå…¶å®æˆ‘æ„Ÿè§‰è¿™é‡Œé¢çš„ç¬¦å·éƒ½ä¸å¤ªç”¨çœ‹ ä¼ è¾“å»¶è¿ŸåŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ç”¨æˆ·å°†è¯·æ±‚å‘é€åˆ°å…¶è¿æ¥çš„åŸºç«™ï¼ˆBSï¼‰çš„å»¶è¿Ÿã€‚è¿™éƒ¨åˆ†çš„ç²¾ç¡®æ—¶é—´æ— æ³•æ•è·ï¼Œç”¨å¸¸æ•°Cè¡¨ç¤ºï¼›ç¬¬äºŒéƒ¨åˆ†æ˜¯ä»ç”¨æˆ·è¿æ¥çš„åŸºç«™ä¼ åˆ°ç”¨æˆ·æœåŠ¡çš„åŸºç«™ï¼ˆè¿™é‡Œä¸å¤ªç†è§£ï¼Œè¿æ¥çš„åŸºç«™ä¸å°±æ˜¯æœåŠ¡çš„åŸºç«™ï¼Ÿè¿˜æ˜¯è¯´æ˜¯åˆ‡æ¢åçš„è¿™æ ·çš„åŸºç«™ï¼Ÿå®é™…ä¸Šè¿™é‡Œè®¨è®ºçš„æ˜¯ï¼Œå¦‚æœæŸä¸ªè¿æ¥çš„åŸºç«™ä¸Šæ²¡æœ‰æŸé¡¹æœåŠ¡ï¼Œé‚£ä¹ˆä»–ä¼šé€šè¿‡è·¯ç”±å°†è¯·æ±‚è½¬å‘åˆ°æœ‰æœåŠ¡çš„åŸºç«™ä¸Šï¼Œæ‰€ä»¥è¿™åº”è¯¥æ˜¯ä¸è€ƒè™‘åº”ç”¨è¿ç§»ï¼Œåªè€ƒè™‘è·¯ç”±è½¬å‘çš„æƒ…å†µï¼‰ä¼ è¾“å»¶è¿Ÿè®¡ç®—å…¬å¼ï¼š \\begin{equation*} l_{m,t}^{tra}(u) = \\frac{\\lambda _m}{ R(\\pi _{t,u}^c,\\pi _{m,t,u})} + C \\end{equation*}å…¶ä¸­ï¼š \\begin{equation*} \\pi _{t,u}^c=\\arg\\max \\limits _{n} x_{t}^c(u,n)\\end{equation*} \\begin{equation*} \\pi _{m,t,u}=\\arg \\max \\limits _{n} x_{m,t}(u,n)\\end{equation*}å…¶å®å°±æ˜¯ä»tæ—¶åˆ»ç”¨æˆ·è¿æ¥çš„é‚£ä¸ªBSä¼ åˆ°tæ—¶åˆ»ç”¨æˆ·è®¿é—®æœåŠ¡çš„BS è®¡ç®—å»¶è¿Ÿï¼š \\begin{equation*} l_{m,t}^{com}(u) = \\frac{\\lambda _m\\gamma _m}{f_{m,u}}\\end{equation*}å¦‚æœæ˜¯æœåŠ¡è¿ç§»ï¼Œä»ä¸€ä¸ªåŸºç«™nè¿ç§»åˆ°å¦ä¸€ä¸ªåŸºç«™n'ï¼Œè¿ç§»å»¶è¿Ÿæ˜¯ \\begin{equation*} l_{m,t}^{app}(n) = \\min \\bigg\\lbrace \\frac{\\theta _m^A |P_t^\\prime (m,n)-P_{t}(m,n)|}{P_t^\\prime (m,n^\\prime)R(n,n^\\prime)}|n^\\prime = 1,\\ldots,N\\bigg\\rbrace \\end{equation*}åŒºå—é“¾ P. Lang, D. Tian, X. Duan, J. Zhou, Z. Sheng and V. C. M. Leung, â€œBlockchain-Based Cooperative Computation Offloading and Secure Handover in Vehicular Edge Computing Networks,â€ in IEEE Transactions on Intelligent Vehicles, vol. 8, no. 7, pp. 3839-3853, July 2023, doi: 10.1109/TIV.2023.3271367. åŸºäºé¢„æµ‹ P. Guan, Y. Li and A. Taherkordi, â€œA Prediction Based Resource Reservation Algorithm for Service Handover in Edge Computing,â€ 2023 IEEE 10th International Conference on Cyber Security and Cloud Computing (CSCloud)/2023 IEEE 9th International Conference on Edge Computing and Scalable Cloud (EdgeCom), Xiangtan, Hunan, China, 2023, pp. 330-335, doi: 10.1109/CSCloud-EdgeCom58631.2023.00063.","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"},{"name":"è¾¹ç¼˜è®¡ç®—","slug":"è¾¹ç¼˜è®¡ç®—","permalink":"http://gladiouszhang.github.io/tags/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97/"}]},{"title":"è¾¹ç¼˜è®¡ç®—è®ºæ–‡é˜…è¯»","slug":"è¾¹ç¼˜è®¡ç®—è®ºæ–‡é˜…è¯»","date":"2024-08-13T17:48:59.000Z","updated":"2025-03-02T08:04:59.466Z","comments":true,"path":"2024/08/14/è¾¹ç¼˜è®¡ç®—è®ºæ–‡é˜…è¯»/","permalink":"http://gladiouszhang.github.io/2024/08/14/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/","excerpt":"","text":"Energy Consumption and QoS-Aware Co-Offloading for Vehicular Edge Computing è®ºæ–‡èƒŒæ™¯ è®ºæ–‡æ€è·¯ å®éªŒéƒ¨åˆ† Deep Graph-based Reinforcement Learning for Joint Cruise Control and Task Offloading for Aerial Edge Internet-of-Things (EdgeIoT)) è®ºæ–‡èƒŒæ™¯ è®ºæ–‡æ€è·¯ å…·ä½“æ¨¡å‹ Energy Consumption and QoS-Aware Co-Offloading for Vehicular Edge Computingè®ºæ–‡èƒŒæ™¯è¯¥è®ºæ–‡æ¢ç©¶åœ¨æ»¡è¶³QoSå‰æä¸‹ï¼Œå°½å¯èƒ½é™ä½èƒ½é‡å¼€é”€çš„è¾¹ç¼˜è®¡ç®—ã€‚å› ä¸ºå¦‚æœåªè¿½æ±‚ä½æ—¶å»¶ï¼Œå¯èƒ½ä¼šå­˜åœ¨èµ„æºè¢«æµªè´¹ï¼ˆä¾‹å¦‚å¤§é‡ä»»åŠ¡è¢«å¸è½½åˆ°è¾¹ç¼˜ç«¯ï¼Œè¿‡åº¦åˆ†é…èµ„æºï¼Œä¹Ÿå°±æ˜¯å¢åŠ äº†èƒ½é‡å¼€é”€ï¼‰ï¼Œåªéœ€è¦æ»¡è¶³QoSå°±è¡Œï¼Œåœ¨è¿™ä¸ªå‰æä¸‹ï¼Œå°½å¯èƒ½çš„é™ä½èƒ½é‡å¼€é”€ï¼Œæ˜¯æœ¬æ–‡çš„æ ¸å¿ƒä»»åŠ¡ã€‚ è®ºæ–‡æ€è·¯è®ºæ–‡çš„ç›®çš„æ˜¯æ±‚å‡ºå¸è½½ç‡ï¼ˆå¸è½½å¤šå°‘ï¼‰å’ŒRESçš„è®¡ç®—èµ„æºåˆ†é…æƒ…å†µï¼ˆå¾€å“ªå¸è½½ï¼‰ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œé¦–å…ˆè¿›è¡Œå»ºæ¨¡ ç„¶åå¯¹è¿™ä¸ªå»ºå¥½çš„æ¨¡å‹è¿›è¡Œæ±‚è§£ã€‚æ±‚è§£çš„è¿‡ç¨‹ä¸­ä½¿ç”¨è´å¶æ–¯ä¼˜åŒ–ç®—æ³•ã€‚å…ˆç¡®å®šå‡ ä¸ªé‡‡æ ·ç‚¹ï¼Œç„¶ååŸºäºé‡‡é›†å‡½æ•°ï¼Œåœ¨é‡‡é›†å‡½æ•°çš„æœ€å¤§å€¼ç‚¹è®¾ç«‹æ–°çš„é‡‡é›†ç‚¹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæ¥æ‹Ÿåˆå‡½æ•°ï¼Œæ‰¾åˆ°è¿‘ä¼¼çš„æœ€å¤§å€¼ç‚¹ã€‚ æ¢ç´¢ï¼ˆexplorationï¼‰æ˜¯æŒ‡é€‰æ‹©ä»£ç†æ¨¡å‹é¢„æµ‹ä¸ç¡®å®šæ€§è¾ƒé«˜çš„ç‚¹ï¼Œè¿™äº›ç‚¹å¯èƒ½å°šæœªè¢«å……åˆ†è¯„ä¼°ã€‚ åˆ©ç”¨ï¼ˆexploitationï¼‰æ˜¯æŒ‡ä¼˜å…ˆé€‰æ‹©é‚£äº›å·²ç»è¢«è¯„ä¼°å¹¶ä¸”è¡¨ç°è‰¯å¥½çš„åŒºåŸŸï¼Œä»¥æœŸè·å¾—æ›´å¥½çš„ç»“æœã€‚ æå‡ºäº†ä¸€ä¸ªè¯„ä»·æ¨¡å‹ï¼Œæ˜¯åŸºäºQoSå’Œèƒ½é‡äºŒå…ƒè¯„ä»·æ¨¡å‹ï¼Œè¿”å›å€¼å±äº0-1ï¼š ï¼ˆæ„Ÿè§‰baselineå°±æ˜¯è‡ªå·±æå‡ºçš„ä¸€ç§æç«¯æƒ…å†µï¼Œä¸ä¸€å®šå’Œåˆ«äººçš„è®ºæ–‡è¿›è¡Œå¯¹æ¯”ï¼‰ éšç€é«˜ç»´æœç´¢ç©ºé—´çš„å¢é•¿ï¼ŒBOå˜å¾—ç¼“æ…¢ã€‚æå‡ºä¸€ç§è°ƒä¼˜æœºåˆ¶æ¥æ”¶ç´§é‡‡æ ·è¿‡ç¨‹ä¸­çš„æœç´¢ç©ºé—´ï¼š åœ¨ä¿æŒä»»åŠ¡å¸è½½æ¯”ä¾‹ä¸å˜çš„æƒ…å†µä¸‹ï¼Œè°ƒæ•´èµ„æºåˆ†é…ä»¥æ»¡è¶³ä»»åŠ¡çš„QoSçº¦æŸã€‚åªè¦è°ƒæ•´åçš„QoSä»ç„¶æ»¡è¶³ï¼Œè°ƒæ•´æ˜¯å¯ä»¥æ¥å—çš„ã€‚æ»¡è¶³çš„é€‚å½“å‡å°‘èµ„æºï¼Œä¸æ»¡è¶³çš„é€‚å½“å¢åŠ èµ„æºã€‚ å®éªŒéƒ¨åˆ†æˆ‘æ„Ÿè§‰å°±æ˜¯å‡è®¾äº†ä¸€äº›å‚æ•°ï¼Œç„¶åå¯¹è¿™äº›å‚æ•°è¿›è¡Œæ•°å€¼åˆ†æã€‚ å®éªŒæ—¶é€‰æ‹©ä¸€äº›å·²æœ‰ç®—æ³•è¿›è¡Œå¯¹æ¯”ï¼ˆæ€ä¹ˆé€‰æ‹©ï¼Ÿï¼‰ å¯¹æ¯”ä¸¤ä¸ªæ–¹é¢ï¼š å¯¹æ¯”ä¸åŒè®¡ç®—å¸è½½æ¨¡å‹çš„æ—¶å»¶å’Œèƒ½è€—ï¼ˆåˆ†é…å¾—æ›´åˆç†ï¼‰ å¯¹æ¯”é‡‡ç”¨ç®—æ³•çš„æ”¶æ•›é€Ÿåº¦ï¼ˆä½¿ç”¨çš„æ–¹æ³•æ›´å¿«ï¼‰ Deep Graph-based Reinforcement Learning for Joint Cruise Control and Task Offloading for Aerial Edge Internet-of-Things (EdgeIoT)è®ºæ–‡èƒŒæ™¯èƒŒæ™¯ï¼šæ— äººæœºä½œä¸ºç§»åŠ¨è¾¹ç¼˜æœåŠ¡å™¨ï¼Œå¤„ç†åœ°é¢ç‰©è”ç½‘è®¾å¤‡çš„ä»»åŠ¡ã€‚ å­˜åœ¨çš„é—®é¢˜ï¼šå½“æ— äººæœºè°ƒåº¦ä¸€ä¸ªç‰©è”ç½‘è®¾å¤‡å¸è½½å…¶è®¡ç®—ä»»åŠ¡æ—¶ï¼Œåœ¨å…¶ä»–æœªè¢«é€‰ä¸­çš„è®¾å¤‡ä¸Šç¼“å­˜çš„ä»»åŠ¡å¯èƒ½ä¼šè¿‡æœŸè€Œä¸å¾—ä¸å–æ¶ˆã€‚ æå‡ºä¸€ç§ä¼˜åŒ–æ–¹æ¡ˆï¼Œåœ¨ç‰©è”ç½‘è®¾å¤‡çš„è®¡ç®—èƒ½åŠ›å’Œç”µæ± é¢„ç®—ä»¥åŠæ— äººæœºçš„é€Ÿåº¦é™åˆ¶ä¸‹ï¼Œæœ€å¤§åŒ–å¸è½½åˆ°æ— äººæœºçš„ä»»åŠ¡ã€‚ æ±‚è§£è¿™ä¸ªæ–¹æ¡ˆçš„é—®é¢˜ï¼šä¼˜åŒ–åŒ…å«è¾ƒå¤§çš„è§£ç©ºé—´ï¼Œè€Œæ— äººæœºçš„ç¬æ—¶ç½‘ç»œçŠ¶æ€æ˜¯æœªçŸ¥çš„ã€‚ è®ºæ–‡æ€è·¯åœ¨ç‰©è”ç½‘è®¾å¤‡çš„è®¡ç®—èƒ½åŠ›å’Œç”µæ± é¢„ç®—ä»¥åŠæ— äººæœºçš„é€Ÿåº¦é™åˆ¶ä¸‹ï¼Œä»¥å¸è½½åˆ°æ— äººæœºçš„è®¡ç®—ä»»åŠ¡æ•°é‡æœ€å¤§åŒ–ä¸ºç›®æ ‡ï¼Œå»ºç«‹ä¼˜åŒ–æ¨¡å‹ã€‚æ‰€ä»¥ä¼˜åŒ–ç›®æ ‡å…¶å®æ˜¯æ— äººæœºçš„é€Ÿåº¦ã€æ–¹å‘å’Œç‰©è”ç½‘è®¾å¤‡ä¸Šçš„ä»»åŠ¡è°ƒåº¦æƒ…å†µã€‚ æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºæ·±åº¦å›¾çš„å¼ºåŒ–å­¦ä¹ æ¡†æ¶ã€‚å¼€å‘äº†ä¸€ç§ä¼˜åŠ¿æ¼”å‘˜-è¯„è®ºå®¶( A2C )ç»“æ„ï¼Œç”¨äºè®­ç»ƒæ— äººæœºåœ¨ç‰©è”ç½‘è®¾å¤‡çš„é£è¡Œé€Ÿåº¦ã€èˆªå‘å’Œå¸è½½æ—¶é—´è¡¨æ–¹é¢çš„å®æ—¶è¿ç»­åŠ¨ä½œã€‚ å‡è®¾ä½ æœ‰ä¸€ç¾¤æœ‹å‹ï¼Œæ¯ä¸ªäººä¹‹é—´éƒ½æœ‰å„ç§å…³ç³»ï¼Œæ¯”å¦‚è°æ˜¯å¥½æœ‹å‹ï¼Œè°ç»å¸¸ä¸€èµ·å‡ºå»ç©ï¼Œè°åœ¨ç¤¾äº¤åª’ä½“ä¸Šäº’ç›¸å…³æ³¨ç­‰ã€‚ä½ å¯ä»¥æŠŠæ¯ä¸ªäººçœ‹ä½œä¸€ä¸ªâ€œèŠ‚ç‚¹â€ï¼Œè€Œè¿™äº›æœ‹å‹ä¹‹é—´çš„å…³ç³»å¯ä»¥çœ‹ä½œæ˜¯â€œè¾¹â€ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¿™ç¾¤æœ‹å‹åŠå…¶å…³ç³»ç”»å‡ºæ¥ï¼Œä½ å°±å¾—åˆ°äº†ä¸€ä¸ªâ€œå›¾â€ã€‚ æ·±åº¦å›¾ï¼ˆDeep Graphï¼‰ æ˜¯ç”¨æ¥å¤„ç†è¿™ç§â€œå›¾â€çš„ä¸€ç§è®¡ç®—æ–¹æ³•ã€‚å®ƒä¸ä»…è€ƒè™‘äº†ç›´æ¥çš„å…³ç³»ï¼ˆæ¯”å¦‚ä½ å’ŒæŸä¸ªæœ‹å‹çš„å…³ç³»ï¼‰ï¼Œè¿˜è€ƒè™‘äº†é—´æ¥çš„å…³ç³»ï¼ˆæ¯”å¦‚ä½ æœ‹å‹çš„æœ‹å‹å¯èƒ½ä¹Ÿä¼šå½±å“ä½ ï¼‰ã€‚é€šè¿‡ä½¿ç”¨æ·±åº¦å­¦ä¹ çš„æ–¹æ³•ï¼ˆå¦‚å›¾ç¥ç»ç½‘ç»œï¼‰ï¼Œæ·±åº¦å›¾å¯ä»¥ä»è¿™ç§å¤æ‚çš„å…³ç³»ç½‘ä¸­æå–å‡ºæœ‰ç”¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è°åœ¨è¿™ç¾¤æœ‹å‹ä¸­æœ€æœ‰å½±å“åŠ›ï¼Œæˆ–è€…é¢„æµ‹è°å°†æˆä¸ºå¥½æœ‹å‹ã€‚ æƒ³è±¡ä¸€ä¸ªæ¸¸æˆä¸­çš„AIè§’è‰²ï¼ˆæ¼”å‘˜ï¼‰ï¼Œå®ƒè´Ÿè´£åœ¨æ¸¸æˆä¸–ç•Œä¸­ç§»åŠ¨ã€æ”»å‡»æ•Œäººã€æˆ–æ”¶é›†èµ„æºã€‚æ¯æ¬¡å®ƒåšå‡ºä¸€ä¸ªåŠ¨ä½œï¼ˆå¦‚ç§»åŠ¨åˆ°ç‰¹å®šä½ç½®ï¼‰ï¼Œè¯„è®ºå®¶ï¼ˆCriticï¼‰ä¼šè¯„ä¼°è¿™ä¸ªåŠ¨ä½œçš„ç»“æœï¼Œç»™å‡ºè¿™ä¸ªåŠ¨ä½œç›¸å¯¹äºå½“å‰çŠ¶æ€ä¸‹çš„å…¶ä»–å¯èƒ½åŠ¨ä½œçš„å¥½åç¨‹åº¦ï¼ˆä¼˜åŠ¿ï¼‰ã€‚å¦‚æœè§’è‰²é€‰æ‹©äº†ä¸€ä¸ªå¸¦æ¥é«˜åˆ†æ•°çš„åŠ¨ä½œï¼Œè¯„è®ºå®¶ä¼šå‘Šè¯‰æ¼”å‘˜â€œè¿™ä¸ªé€‰æ‹©å¾ˆå¥½â€ï¼Œæ¼”å‘˜å°±ä¼šå¢åŠ åœ¨ç±»ä¼¼æƒ…å†µä¸‹é€‰æ‹©è¿™ä¸ªåŠ¨ä½œçš„æ¦‚ç‡ã€‚åä¹‹ï¼Œå¦‚æœåŠ¨ä½œç»“æœä¸å¥½ï¼Œè¯„è®ºå®¶ä¼šå‘Šè¯‰æ¼”å‘˜â€œè¿™ä¸æ˜¯ä¸€ä¸ªå¥½é€‰æ‹©â€ï¼Œæ¼”å‘˜å°±ä¼šå‡å°‘é€‰æ‹©è¯¥åŠ¨ä½œçš„æ¦‚ç‡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒAIè§’è‰²é€æ¸å­¦ä¼šåœ¨ä¸åŒçš„æ¸¸æˆçŠ¶æ€ä¸‹åšå‡ºæœ€ä½³çš„å†³ç­–ã€‚ æœ¬æ–‡æå‡ºçš„GNN - A2Cä¸­å¼€å‘äº†ä¸€ä¸ªé•¿çŸ­æœŸè®°å¿†( long short-term memoryï¼ŒLSTM )æ¨¡å‹ï¼ŒåŸºäºGNNä¸­æå–çš„ç‰¹å¾æ¥é¢„æµ‹ç‰©è”ç½‘è®¾å¤‡ä¸Šçš„æ—¶å˜æ— äººæœºåœ°é¢ä¿¡é“å’Œä»»åŠ¡ç”Ÿæˆã€‚ å…·ä½“æ¨¡å‹æš‚å­˜ä¸€ä¸‹ç¬¦å·çš„æ„æ€","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"},{"name":"è¾¹ç¼˜è®¡ç®—","slug":"è¾¹ç¼˜è®¡ç®—","permalink":"http://gladiouszhang.github.io/tags/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97/"}]},{"title":"k8så®ç°podå†…éƒ¨çš„webshell","slug":"k8så®ç°podå†…éƒ¨çš„webshell","date":"2024-08-13T07:58:27.000Z","updated":"2024-08-13T16:32:58.000Z","comments":true,"path":"2024/08/13/k8så®ç°podå†…éƒ¨çš„webshell/","permalink":"http://gladiouszhang.github.io/2024/08/13/k8s%E5%AE%9E%E7%8E%B0pod%E5%86%85%E9%83%A8%E7%9A%84webshell/","excerpt":"","text":"èƒŒæ™¯ä»‹ç» ä»£ç ä»‹ç» handleConnections èƒŒæ™¯ä»‹ç»è¿™æ˜¯å®ä¹ çš„æ—¶å€™ï¼Œå…¬å¸è®©æˆ‘å¼€å‘çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä¸»è¦å¸Œæœ›å®ç°çš„æ˜¯å‰ç«¯ä¸k8sä¸­çš„podçš„webshellåŠŸèƒ½ï¼Œå¹¶ä¸”åŒ…å«tabä»£ç è¡¥å…¨çš„åŠŸèƒ½ã€‚åŸºäºhttps://github.com/GanonYou/k8s-webshell-ginçš„ä»£ç æ¥å®ç°çš„ã€‚ä½†æ˜¯å®ç°æµç¨‹ä¸ä¸€æ ·ï¼šæºä»£ç æ˜¯è‡ªå·±æš´éœ²å‡ºwsæ¥å£ï¼Œç­‰å¾…å‰ç«¯è¿æ¥ï¼‰ï¼Œæˆ‘çš„ä»£ç æ˜¯é›†ç¾¤å…ˆå’Œåç«¯å»ºç«‹wsï¼Œç„¶åç­‰å¾…å‰ç«¯è¿æ¥åç«¯ï¼Œç„¶åå‰ç«¯å…ˆæŠŠæ¶ˆæ¯ä¼ åˆ°åç«¯ï¼Œåç«¯ç»è¿‡é‰´æƒå†è½¬å‘ç»™é›†ç¾¤ã€‚ åœ¨æœ¬æ–‡æ¡£é‡Œï¼Œå¤§è‡´è§£é‡Šä¸€ä¸‹é›†ç¾¤ä¸Šçš„webshellï¼ˆç›¸å½“äºæ˜¯åç«¯ï¼‰çš„ç›¸å…³ä»£ç ã€‚ ä»£ç ä»‹ç»handleConnections12345678910111213sshReq = ClientSet.CoreV1().RESTClient().Post(). Resource(&quot;pods&quot;). Name(pod). Namespace(namespace). SubResource(&quot;exec&quot;). VersionedParams(&amp;v1.PodExecOptions&#123; Container: container, Command: []string&#123;&quot;bash&quot;&#125;, Stdin: true, Stdout: true, Stderr: true, TTY: true, &#125;, scheme.ParameterCodec) ä»¥ä¸Šåªæ˜¯ç”¨äºåˆ›å»ºä¸€ä¸ªè¯·æ±‚ï¼Œè¿˜æœªå‘é€ã€‚ ClientSetæ˜¯ä¸€ä¸ªæŒ‡å‘ kubernetes.Clientset ç±»å‹çš„å®ä¾‹çš„æŒ‡é’ˆï¼ŒCoreV1æä¾›äº†å¯¹ Kubernetes Core API ç»„ï¼Œä¾‹å¦‚ Podsã€Nodesã€Services ç­‰èµ„æºçš„è®¿é—®ï¼ŒRESTClient()è¿”å›ä¸€ä¸ª rest.Interface å¯¹è±¡ï¼Œå…è®¸ç›´æ¥ä½¿ç”¨ REST API è¯·æ±‚è€Œä¸é€šè¿‡é«˜å±‚æ¬¡çš„æŠ½è±¡ã€‚è¿™ä¸ªå¯¹è±¡æä¾›äº†æ›´åº•å±‚çš„ API æ“ä½œã€‚æœ€åï¼ŒPost()ç”¨äºæ„é€ ä¸€ä¸ª HTTP POST è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚ä¼šç”¨æ¥ä¸ Kubernetes API äº¤äº’ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºæˆ–æ›´æ–°èµ„æºã€‚ SubResource(&quot;exec&quot;) è¡¨ç¤ºæˆ‘ä»¬è¦æ“ä½œçš„æ˜¯ Pod çš„ exec å­èµ„æºï¼Œè¿™é€šå¸¸ç”¨äºæ‰§è¡Œå‘½ä»¤ã€‚å³ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æŒ‡å®šçš„ Pod å†…æ‰§è¡ŒæŸä¸ªå‘½ä»¤ã€‚ VersionedParams()ç”¨äºè®¾ç½®è¯·æ±‚çš„å‚æ•°ï¼Œå¹¶ä¸”æŒ‰ç…§ API ç‰ˆæœ¬å¯¹è¿™äº›å‚æ•°è¿›è¡Œç¼–ç ã€‚ v1.PodExecOptionsä¸­ï¼š Container: è¦æ‰§è¡Œå‘½ä»¤çš„å®¹å™¨åã€‚ Command: è¦åœ¨å®¹å™¨ä¸­æ‰§è¡Œçš„å‘½ä»¤æ•°ç»„ã€‚è¿™é‡Œæ˜¯ []string&#123;&quot;bash&quot;&#125;ï¼Œè¡¨ç¤ºåœ¨å®¹å™¨ä¸­å¯åŠ¨ä¸€ä¸ª Bash shellã€‚ Stdin, Stdout, Stderr: è¿™äº›å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦éœ€è¦è¿æ¥æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ã€‚ TTY: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éœ€è¦ç»ˆç«¯ 1234// åˆ›å»ºåˆ°å®¹å™¨çš„è¿æ¥ if executor, err = remotecommand.NewSPDYExecutor(restConf, &quot;POST&quot;, sshReq.URL()); err != nil &#123; goto END &#125; åˆå§‹åŒ–ä¸€ä¸ª remotecommand.Executor å¯¹è±¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿé€šè¿‡ Kubernetes API æ‰§è¡Œå‘½ä»¤ã€‚åˆ›å»º executor çš„è¿‡ç¨‹æ¶‰åŠé…ç½® API è¿æ¥ã€æŒ‡å®š HTTP æ–¹æ³•ï¼ˆPOSTï¼‰ä»¥åŠæ„é€ æ‰§è¡Œè¯·æ±‚çš„ URLã€‚ sshReq.URL(): sshReq æ˜¯ä¹‹å‰æ„å»ºçš„ *rest.Request å¯¹è±¡ï¼ŒåŒ…å«äº† Kubernetes API çš„è¯·æ±‚ä¿¡æ¯ã€‚ sshReq.URL() è¿”å›ä¸€ä¸ª *url.URL å¯¹è±¡ï¼Œè¡¨ç¤ºè¯·æ±‚çš„å®Œæ•´ URLã€‚è¿™ä¸ª URL æŒ‡å‘ Kubernetes API çš„ exec å­èµ„æºï¼Œç”¨äºæ‰§è¡Œå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¿™ä¸ª URL å¯èƒ½ç±»ä¼¼äº https://kubernetes/api/v1/namespaces/default/pods/my-pod/exec?stdin=true&amp;stdout=true&amp;stderr=trueã€‚ 123456789101112handler = &amp;streamHandler&#123;wsConn: wsConn&#125;ctx = context.Background()if err = executor.StreamWithContext(ctx, remotecommand.StreamOptions&#123; Stdin: handler, Stdout: handler, Stderr: handler, // TerminalSizeQueue: handler, Tty: true,&#125;); err != nil &#123; goto END&#125; å°†websocketç›´æ¥è¿æ¥åˆ°å®¹å™¨å†…çš„Stdinç­‰ã€‚å…¶å®æˆ‘ä¿®æ”¹åå¯ä»¥ä¸ç”¨streamHandlerï¼Œç›´æ¥ç»™æˆ‘ä»¬çš„websocketåŠ ä¸Šio.readå’Œwriteçš„æ¥å£å°±è¡Œï¼Œä½†æ˜¯ç°åœ¨è¿˜æ²¡æ”¹ã€‚","categories":[],"tags":[{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"},{"name":"å®ä¹ é¡¹ç›®","slug":"å®ä¹ é¡¹ç›®","permalink":"http://gladiouszhang.github.io/tags/%E5%AE%9E%E4%B9%A0%E9%A1%B9%E7%9B%AE/"}]},{"title":"è¾¹ç¼˜è®¡ç®—ç»¼è¿°","slug":"è¾¹ç¼˜è®¡ç®—ç»¼è¿°","date":"2024-08-02T14:39:15.000Z","updated":"2024-08-16T06:56:24.000Z","comments":true,"path":"2024/08/02/è¾¹ç¼˜è®¡ç®—ç»¼è¿°/","permalink":"http://gladiouszhang.github.io/2024/08/02/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97%E7%BB%BC%E8%BF%B0/","excerpt":"","text":"ç ”ç©¶çƒ­ç‚¹ å…³é”®æŠ€æœ¯ è®¡ç®—å¸è½½ ç§»åŠ¨ç®¡ç† æµé‡å¸è½½ ç¼“å­˜åŠ é€Ÿ ç½‘ç»œæ§åˆ¶ æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤ å››ä¸ªæŒ‘æˆ˜ ç ”ç©¶ä½“ç³» K. Cao, Y. Liu, G. Mengå’ŒQ. Sun, ã€ŠAn Overview on Edge Computing Researchã€‹, IEEE Access, å· 8, é¡µ 85714â€“85728, 2020, doi: 10.1109/ACCESS.2020.2991734. ç ”ç©¶çƒ­ç‚¹å…³é”®æŠ€æœ¯è®¡ç®—å¸è½½èµ„æºå—é™è®¾å¤‡å°†èµ„æºå¯†é›†å‹è®¡ç®—ä»ç§»åŠ¨è®¾å¤‡ä¸Šéƒ¨åˆ†æˆ–å…¨éƒ¨åœ°ç§»æ¤åˆ°èµ„æºå¯Œé›†çš„ä¸´è¿‘è®¾å¤‡ï¼š å¸è½½å†³ç­– å¦‚ä½•å¸è½½è®¡ç®—ä»»åŠ¡ï¼Œå¸è½½å¤šå°‘ï¼Œå¸è½½äº›å•¥ã€‚ åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šç¼–ç é˜¶æ®µå†³å®šè¦å¸è½½ä»€ä¹ˆï¼Œç³»ç»Ÿé˜¶æ®µç›‘æ§å˜é‡ï¼ˆå¸¦å®½ã€æ•°æ®å¤§å°ç­‰ï¼‰ï¼Œå†³ç­–å¼•æ“å†³å®šæ˜¯å¦å¸è½½ å†³ç­–ç»“æœåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼šæœ¬åœ°æ‰§è¡Œï¼ˆä¸å¸è½½ï¼‰ã€éƒ¨åˆ†å¸è½½ã€å…¨éƒ¨å¸è½½ã€‚ å†³ç­–çš„ç›®æ ‡å¯ä»¥è¢«åˆ†ä¸ºï¼ˆåˆ†åˆ«æ»¡è¶³ï¼‰ï¼šå‡å°å»¶è¿Ÿã€é™ä½èƒ½é‡å¼€é”€ã€å¹³è¡¡èƒ½é‡å¼€é”€å’Œå»¶è¿Ÿ èµ„æºåˆ†é… å¾€å“ªå¸è½½ã€‚æ¯”å¦‚æœ‰äº›éƒ¨åˆ†ä¸èƒ½æ‹†åˆ†ï¼Œæˆ–è€…æ‹†åˆ†åæœ‰è”ç³»çš„ï¼Œå°±å¿…é¡»æ”¾åœ¨åŒæ ·çš„MEC(Mobile Edge Computing)æœåŠ¡å™¨ã€‚ é€šå¸¸åˆ†é…èŠ‚ç‚¹è¢«åˆ†ä¸ºå•ç‚¹åˆ†é…å’Œå¤šç‚¹åˆ†é…ã€‚ ç§»åŠ¨ç®¡ç†ä¸€ä¸ªè¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹åªæœåŠ¡äºå…¶å‘¨å›´çš„äººã€‚ ä¸»è¦é—®é¢˜æ˜¯èµ„æºå‘ç°å’Œèµ„æºåˆ‡æ¢ã€‚ èµ„æºå‘ç° ç”¨æˆ·åœ¨ç§»åŠ¨ä¸­å¿«é€Ÿå‘ç°å‘¨å›´çš„å¯ç”¨èµ„æºï¼Œå¹¶é€‰æ‹©æœ€åˆé€‚çš„èµ„æºã€‚ èµ„æºåˆ‡æ¢ å½“ç”¨æˆ·ç§»åŠ¨æ—¶ï¼Œç§»åŠ¨åº”ç”¨æ‰€ä½¿ç”¨çš„è®¡ç®—èµ„æºå¯èƒ½ä¼šåœ¨å¤šä¸ªè®¾å¤‡ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼ŒåŒæ—¶ä¼šæ”¹å˜æœåŠ¡ç¨‹åºçš„å·¥ä½œç«™ç‚¹æ¥ä¿è¯æœåŠ¡è¿ç»­æ€§ã€‚ æµé‡å¸è½½å°†æ»¡è¶³ç‰¹å®šå¸è½½è§„åˆ™çš„æµé‡å¸è½½åˆ°ç§»åŠ¨è¾¹ç¼˜ç½‘ç»œ(å³ä¸€ä¸ªå±€éƒ¨ç‰¹å®šçš„ç½‘ç»œ,å¯ä»¥æ˜¯å†…éƒ¨ç½‘,ä¹Ÿå¯ä»¥æ˜¯å› ç‰¹ç½‘)ï¼Œä»¥èŠ‚çœå›ç¨‹å¸¦å®½ï¼Œå‡å°‘å»¶è¿Ÿï¼Œå¹¶ä¿ƒè¿›å…¶ä»–MECæœåŠ¡çš„æ‰©å±•ã€‚ å‡è®¾ä½ åœ¨ä¸€ä¸ªç¹å¿™çš„è´­ç‰©ä¸­å¿ƒä½¿ç”¨æ‰‹æœºï¼Œæ­£åœ¨è§‚çœ‹ä¸€ä¸ªé«˜æ¸…çš„å®æ—¶è§†é¢‘ã€‚ä¼ ç»Ÿæƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„æ•°æ®è¯·æ±‚éƒ½éœ€è¦é€šè¿‡èœ‚çªç½‘ç»œçš„æ ¸å¿ƒç½‘ä¼ è¾“ï¼Œç„¶åé€šè¿‡äº’è”ç½‘è®¿é—®è§†é¢‘å†…å®¹æœåŠ¡å™¨ã€‚ç”±äºè´­ç‰©ä¸­å¿ƒçš„äººæµé‡å¤§ï¼Œèœ‚çªç½‘ç»œçš„æ ¸å¿ƒç½‘å¯èƒ½ä¼šæ‰¿è½½å¤§é‡çš„æµé‡ï¼Œå¯¼è‡´ç½‘ç»œæ‹¥å¡ã€å»¶è¿Ÿå¢åŠ ã€‚ ä¸ºäº†ä¼˜åŒ–è¿™ä¸ªåœºæ™¯ï¼Œç½‘ç»œè¿è¥å•†éƒ¨ç½²äº†ä¸€ä¸ªMECï¼ˆç§»åŠ¨è¾¹ç¼˜è®¡ç®—ï¼‰èŠ‚ç‚¹ï¼Œå®ƒåŒ…å«è§†é¢‘å†…å®¹çš„æœ¬åœ°ç¼“å­˜ï¼Œå¹¶æ”¯æŒæµé‡å¸è½½ã€‚å½“ä½ åœ¨è´­ç‰©ä¸­å¿ƒè§‚çœ‹è§†é¢‘æ—¶ï¼Œè§†é¢‘æµé‡ä¼šè¢«å¸è½½åˆ°è¿™ä¸ªMECèŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè§†é¢‘æ•°æ®ç›´æ¥ä»è´­ç‰©ä¸­å¿ƒé™„è¿‘çš„MECèŠ‚ç‚¹è·å–ï¼Œè€Œä¸æ˜¯ç»è¿‡èœ‚çªç½‘ç»œçš„æ ¸å¿ƒç½‘ã€‚è¿™ä¸ä»…å‡å°‘äº†æ ¸å¿ƒç½‘çš„è´Ÿæ‹…ï¼Œè¿˜æ˜¾è‘—é™ä½äº†å»¶è¿Ÿï¼Œæé«˜äº†è§†é¢‘æµçš„è´¨é‡ã€‚ å’Œè®¡ç®—å¸è½½çš„åŒºåˆ«æ˜¯ï¼Œè®¡ç®—å¸è½½æ˜¯æŠŠæœ¬åœ°ä»»åŠ¡å¸è½½åˆ°è¾¹ç¼˜ç«¯æœåŠ¡å™¨ï¼Œæµé‡å¸è½½æ˜¯å°†æµé‡è´Ÿæ‹…è¾ƒå¤§çš„çº¿è·¯è½¬ç§»ã€‚è®¡ç®—å¸è½½é‡ç‚¹åœ¨äºâ€œä»»åŠ¡æ‰§è¡Œâ€çš„è½¬ç§»ï¼Œæµé‡å¸è½½é‡ç‚¹åœ¨äºâ€œæ•°æ®å†…å®¹ä¼ è¾“â€çš„è½¬ç§»ã€‚ ç¼“å­˜åŠ é€Ÿå†…å®¹ç¼“å­˜åˆ°ç§»åŠ¨ç½‘ç»œè¾¹ç¼˜åï¼Œç”¨æˆ·å¯ä»¥å°±è¿‘è·å–å†…å®¹ï¼Œä»è€Œé¿å…äº†å†…å®¹çš„é‡å¤ä¼ è¾“ï¼Œç¼“è§£äº†å›ç¨‹ç½‘ç»œå’Œæ ¸å¿ƒç½‘çš„å‹åŠ›ã€‚ ç¼“å­˜åŠ é€Ÿæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç‰¹å®šçš„æµé‡å¸è½½ç­–ç•¥ï¼Œå…¶ä¸­çš„é‡ç‚¹æ˜¯å¯¹å†…å®¹è¿›è¡Œæœ¬åœ°åŒ–å­˜å‚¨ï¼Œä»¥å‡å°‘ä¼ è¾“éœ€æ±‚ã€‚ æµé‡å¸è½½çš„èŒƒå›´æ›´å¹¿ï¼Œå®ƒä¸ä»…åŒ…æ‹¬ç¼“å­˜åŠ é€Ÿï¼Œè¿˜å¯èƒ½åŒ…æ‹¬å…¶ä»–å½¢å¼çš„æµé‡è½¬ç§»æˆ–é‡æ–°è·¯ç”±ï¼Œç›®çš„æ˜¯å‡è½»æ ¸å¿ƒç½‘ç»œçš„æ•´ä½“è´Ÿæ‹…ã€‚ ç½‘ç»œæ§åˆ¶è¿™ä¸€å—è®ºæ–‡æ²¡å’‹è®²ï¼Œgptå¦‚æ˜¯è¯´ï¼š ç½‘ç»œæ§åˆ¶æ˜¯æŒ‡åœ¨ç½‘ç»œåŸºç¡€è®¾æ–½ä¸­ç®¡ç†å’Œè°ƒåº¦æ•°æ®æµã€èµ„æºåˆ†é…ä»¥åŠé€šä¿¡è¡Œä¸ºçš„è¿‡ç¨‹å’Œæœºåˆ¶ã€‚å®ƒæ¶‰åŠå¦‚ä½•æ§åˆ¶ç½‘ç»œä¸­çš„æµé‡ã€ä¼˜åŒ–æ€§èƒ½ã€ç¡®ä¿å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Œå¹¶å“åº”ä¸åŒçš„ç½‘ç»œéœ€æ±‚ã€‚ç½‘ç»œæ§åˆ¶åœ¨æ•´ä¸ªç½‘ç»œä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹ã€å¤æ‚çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ¯”å¦‚åœ¨è¾¹ç¼˜ç½‘ç»œå’Œäº‘è®¡ç®—ç¯å¢ƒä¸­ã€‚ æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤è¾¹ç¼˜è®¡ç®—çš„åˆ†å¸ƒå¼ç»“æ„å¢åŠ äº†æ”»å‡»å‘é‡çš„ç»´åº¦ã€‚è¾¹ç¼˜è®¡ç®—å®¢æˆ·ç«¯è¶Šæ™ºèƒ½ï¼Œè¶Šå®¹æ˜“å—åˆ°æ¶æ„è½¯ä»¶çš„æ„ŸæŸ“å’Œå®‰å…¨æ¼æ´çš„æ”»å‡»ã€‚ç½‘ç»œè¾¹ç¼˜é«˜åº¦åŠ¨æ€çš„ç¯å¢ƒä¹Ÿä½¿å¾—ç½‘ç»œæ›´åŠ è„†å¼±ã€‚ å››ä¸ªæŒ‘æˆ˜ è½»é‡çº§çš„æ•°æ®åŠ å¯†å’Œåœ¨å¤šä¸ªæˆæƒå›¢ä½“åŸºç¡€ä¸Šçš„ç»†ç²’åº¦æ•°æ®åˆ†äº«ï¼š è®¾è®¡é’ˆå¯¹å¤šä¸ªæˆæƒä¸­å¿ƒçš„æ•°æ®åŠ å¯†æ–¹æ³•ï¼Œè€ƒè™‘å¤æ‚åº¦ã€‚ åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸‹çš„å¤šæºå¼‚æ„æ•°æ®ä¼ æ’­æ§åˆ¶ä¸å®‰å…¨ç®¡ç†ï¼š ç”¨æˆ·æˆ–æ•°æ®æ‹¥æœ‰è€…å¸Œæœ›èƒ½å¤Ÿåˆ©ç”¨æœ‰æ•ˆçš„ä¿¡æ¯å‘å¸ƒæ§åˆ¶å’Œè®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œå®ç°æ•°æ®çš„åˆ†å‘ã€æœç´¢ã€è®¿é—®ä»¥åŠå¯¹æ•°æ®æˆæƒèŒƒå›´çš„æ§åˆ¶ã€‚ è¾¹ç¼˜è®¡ç®—å¤§è§„æ¨¡äº’è”æœåŠ¡ä¸èµ„æºå—é™ç»ˆç«¯ä¹‹é—´çš„å®‰å…¨æŒ‘æˆ˜ é¢å‘ç‰©è”ç½‘çš„å¤šæ ·åŒ–æœåŠ¡å’Œè¾¹ç¼˜è®¡ç®—æ¨¡å¼å¯¹é«˜æ•ˆéšç§ä¿æŠ¤çš„æ–°è¦æ±‚ ç ”ç©¶ä½“ç³» æ•°æ®å®‰å…¨ æ•°æ®çš„åŠ å¯†åŠå¯¹å…¶çš„å®‰å…¨æ“ä½œã€‚æ€è·¯æ˜¯å°†å…¶ä»–è®¡ç®—èŒƒå¼ï¼ˆå¦‚äº‘è®¡ç®—ã€é›¾è®¡ç®—ç­‰ï¼‰å®‰å…¨è§£å†³æ–¹æ¡ˆç§»æ¤è¿‡æ¥ï¼Œå¹¶å°†è®¡ç®—æ¶æ„å¹¶è¡ŒåŒ–ï¼Œæœ€ç»ˆå®ç°ä¸€ä¸ªè½»é‡çº§çš„ã€åˆ†å¸ƒå¼çš„æ•°æ®å®‰å…¨é˜²æŠ¤ç³»ç»Ÿã€‚ æ•°æ®åŠ å¯†å’Œå®‰å…¨æ•°æ®åˆ†äº« èº«ä»½è®¤è¯ éšç§ä¿æŠ¤ è®¿é—®æ§åˆ¶","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"},{"name":"è¾¹ç¼˜è®¡ç®—","slug":"è¾¹ç¼˜è®¡ç®—","permalink":"http://gladiouszhang.github.io/tags/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97/"}]},{"title":"k8sé›†ç¾¤minioä½œpvcæŒ‚è½½ä»‹ç»åŠç¤ºä¾‹","slug":"k8sé›†ç¾¤minioä½œpvcæŒ‚è½½","date":"2024-07-31T16:33:26.000Z","updated":"2024-08-11T09:07:36.000Z","comments":true,"path":"2024/08/01/k8sé›†ç¾¤minioä½œpvcæŒ‚è½½/","permalink":"http://gladiouszhang.github.io/2024/08/01/k8s%E9%9B%86%E7%BE%A4minio%E4%BD%9Cpvc%E6%8C%82%E8%BD%BD/","excerpt":"","text":"MinIOä»‹ç» PVCæ¦‚å¿µï¼ˆPersistent Volume Claimï¼‰ MinIOä¸PVCçš„ç»“åˆ é…ç½®æ­¥éª¤ åˆ›å»ºç›¸å…³å­˜å‚¨æœåŠ¡ 1. åˆ›å»ºPersistent Volume (PV) å’Œ Persistent Volume Claim (PVC) å’Œ Persistent Volume Claim (PVC)) 2. éƒ¨ç½²MinIO 3. åº”ç”¨é…ç½®æ–‡ä»¶ ç¼–å†™ä¸Šä¼ è®°å½•çš„Goç¨‹åº 1. å®‰è£…MinIOçš„Go SDK 2. ç¼–å†™ä¸Šä¼ è®°å½•çš„Goç¨‹åº 3. è¿è¡Œç¨‹åº å°è¯•åˆ ã€æ”¹ã€æŸ¥ ä¸Šä¼ å¯¹è±¡ åˆ é™¤å¯¹è±¡ ä¸Šä¼ ï¼ˆä¿®æ”¹ï¼‰å¯¹è±¡ æ£€ç´¢ï¼ˆæŸ¥ï¼‰å¯¹è±¡ è¸©å‘ æ•°æ®å®‰å…¨ æ•°æ®åŠ å¯† è®¿é—®æ§åˆ¶ SSL/TLSæ”¯æŒ ç‰ˆæœ¬æ§åˆ¶ é”å®šæªæ–½ æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ MinIOä»‹ç» å‚è€ƒï¼šhttps://www.cnblogs.com/yuxl01/p/16226701.html MinIO æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œå¸¸ç”¨äºå­˜å‚¨å¤§é‡éç»“æ„åŒ–æ•°æ®ï¼Œä¾‹å¦‚å›¾ç‰‡ã€è§†é¢‘ã€å¤‡ä»½æ–‡ä»¶ç­‰ã€‚å®ƒä»¥åˆ†å¸ƒå¼æ–¹å¼è¿è¡Œï¼Œç¡®ä¿æ•°æ®çš„é«˜å¯ç”¨æ€§å’Œå¯é æ€§ã€‚ PVCæ¦‚å¿µï¼ˆPersistent Volume Claimï¼‰åœ¨Kubernetesä¸­ï¼ŒPersistent Volume (PV) æ˜¯é›†ç¾¤ä¸­ç”±ç®¡ç†å‘˜æä¾›çš„ä¸€å—å­˜å‚¨èµ„æºï¼Œè€ŒPersistent Volume Claim (PVC) åˆ™æ˜¯ç”¨æˆ·å¯¹å­˜å‚¨èµ„æºçš„è¯·æ±‚ã€‚PVCå…è®¸ç”¨æˆ·åŠ¨æ€åœ°ç”³è¯·å­˜å‚¨èµ„æºï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ°Podä¸­ï¼Œä»¥ä¾¿æŒä¹…å­˜å‚¨æ•°æ®ã€‚ MinIOä¸PVCçš„ç»“åˆå°†MinIOä½œä¸ºPVCæŒ‚è½½ä½¿ç”¨ï¼Œå¯ä»¥ä½¿åº”ç”¨ç¨‹åºæ–¹ä¾¿åœ°ä½¿ç”¨MinIOæä¾›çš„å­˜å‚¨èµ„æºï¼Œå¹¶ä¸”é€šè¿‡Kubernetesçš„è°ƒåº¦å’Œç®¡ç†åŠŸèƒ½ï¼Œä¿è¯å­˜å‚¨æœåŠ¡çš„é«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚ å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ· &lt;â€”&gt; MinIOï¼šç”¨æˆ·ä¸Šä¼ æˆ–ä¸‹è½½æ•°æ®ã€‚ MinIO &lt;â€”&gt; PVCï¼šMinIOçš„éƒ¨ç½²é…ç½®è¯·æ±‚å­˜å‚¨èµ„æºï¼ˆPVCï¼‰ã€‚ PVC &lt;â€”&gt; PVï¼šKuberneteså°†PVCç»‘å®šåˆ°åˆé€‚çš„PVï¼Œæä¾›å®é™…çš„å­˜å‚¨èµ„æºã€‚ PVï¼šå®é™…å­˜å‚¨æ•°æ®çš„ä½ç½®ã€‚ é…ç½®æ­¥éª¤å†™ä¸€ä¸ªç®€å•çš„demoï¼Œæ¼”ç¤ºä¸€ä¸‹ä¸Šä¼ ä¸€æ¡è®°å½•åˆ°minioçš„è¿‡ç¨‹ åˆ›å»ºç›¸å…³å­˜å‚¨æœåŠ¡1. åˆ›å»ºPersistent Volume (PV) å’Œ Persistent Volume Claim (PVC)åˆ›å»ºä¸€ä¸ªPVé…ç½®æ–‡ä»¶ minio-pv.yamlï¼Œç»™è¿™ä¸ªPVåˆ†é…10Gç©ºé—´ 12345678910111213apiVersion: v1kind: PersistentVolumemetadata: name: minio-pvspec: capacity: storage: 100Mi accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Retain storageClassName: manual hostPath: path: &quot;/mnt/data&quot; åˆ›å»ºä¸€ä¸ªPVCé…ç½®æ–‡ä»¶ minio-pvc.yamlï¼š 1234567891011apiVersion: v1kind: PersistentVolumeClaimmetadata: name: minio-pvcspec: accessModes: - ReadWriteOnce resources: requests: storage: 100Mi storageClassName: manual 2. éƒ¨ç½²MinIOåˆ›å»ºä¸€ä¸ªMinIOéƒ¨ç½²æ–‡ä»¶ minio-deployment.yamlï¼Œä½¿ç”¨å‰é¢åˆ›å»ºçš„pvc 123456789101112131415161718192021222324252627282930313233343536apiVersion: apps/v1kind: Deploymentmetadata: name: minio-deployment labels: app: miniospec: replicas: 1 selector: matchLabels: app: minio template: metadata: labels: app: minio spec: containers: - name: minio image: minio/minio:latest args: - server - /data ports: - containerPort: 9000 env: - name: MINIO_ACCESS_KEY value: &quot;minioadmin&quot; - name: MINIO_SECRET_KEY value: &quot;minioadmin&quot; volumeMounts: - name: minio-storage mountPath: /data volumes: - name: minio-storage persistentVolumeClaim: claimName: minio-pvc åˆ›å»ºä¸€ä¸ªMinIOæœåŠ¡æ–‡ä»¶ minio-service.yamlï¼Œç”¨äºæä¾›ä¸€ç§è®¿é—®æ–¹å¼ 12345678910111213apiVersion: v1kind: Servicemetadata: name: minio-service labels: app: miniospec: type: LoadBalancer ports: - port: 9000 targetPort: 9000 selector: app: minio è¸©å‘ï¼šç”±äºåœ¨æœ¬åœ°ç¯å¢ƒä¸‹ï¼ŒLoadBalancer ç±»å‹çš„æœåŠ¡ä¸ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªå¤–éƒ¨ IP åœ°å€ã€‚å³ï¼š æ‰€ä»¥æ”¹ä¸ºNodePortç±»å‹çš„æœåŠ¡ã€‚ NodePort æ˜¯ä¸€ç§æœåŠ¡ç±»å‹ï¼Œå®ƒåœ¨æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹çš„ä¸€ä¸ªé™æ€ç«¯å£ï¼ˆNodePortï¼‰ä¸Šä¸ºæœåŠ¡å¼€æ”¾ä¸€ä¸ªç«¯å£ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡ä»»ä½•èŠ‚ç‚¹çš„ IP åœ°å€åŠ ä¸Šè¿™ä¸ªç«¯å£æ¥è®¿é—®æœåŠ¡ã€‚ ä¿®æ”¹åçš„yamlæ–‡ä»¶ä¸ºï¼š 1234567891011121314apiVersion: v1kind: Servicemetadata: name: minio-service labels: app: miniospec: type: NodePort ports: - port: 9000 targetPort: 9000 nodePort: 31909 selector: app: minio 3. åº”ç”¨é…ç½®æ–‡ä»¶ä½¿ç”¨ kubectl å‘½ä»¤è¡Œå·¥å…·åº”ç”¨è¿™äº›é…ç½®æ–‡ä»¶ï¼š 1234kubectl apply -f minio-pv.yamlkubectl apply -f minio-pvc.yamlkubectl apply -f minio-deployment.yamlkubectl apply -f minio-service.yaml ç¼–å†™ä¸Šä¼ è®°å½•çš„Goç¨‹åº1. å®‰è£…MinIOçš„Go SDKé¦–å…ˆå®‰è£…MinIOçš„Go SDKï¼š 1go get github.com/minio/minio-go/v7 2. ç¼–å†™ä¸Šä¼ è®°å½•çš„Goç¨‹åºç¼–å†™ä¸€ä¸ªç®€å•çš„Goç¨‹åºæ¥ä¸Šä¼ ä¸€æ¡è®°å½•ï¼š è¿™é‡Œæœ‰ä¸€ä¸ªæ¡¶çš„æ¦‚å¿µã€‚æ¡¶ï¼ˆBucketï¼‰æ˜¯ç”¨æ¥ç»„ç»‡å’Œç®¡ç†æ•°æ®çš„ä¸»è¦å®¹å™¨ã€‚æ¯ä¸ªæ¡¶å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„å¯¹è±¡ï¼ˆæ–‡ä»¶ï¼‰ï¼Œå¯ä»¥æŠŠæ¡¶æƒ³è±¡æˆä¸€ä¸ªé¡¶çº§æ–‡ä»¶å¤¹ï¼Œå®ƒç”¨æ¥å­˜å‚¨æ•°æ®å¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package mainimport ( &quot;bytes&quot; &quot;context&quot; &quot;fmt&quot; &quot;log&quot; &quot;github.com/minio/minio-go/v7&quot; &quot;github.com/minio/minio-go/v7/pkg/credentials&quot;)func main() &#123; // åˆå§‹åŒ–MinIOå®¢æˆ·ç«¯ minioClient, err := minio.New(&quot;localhost:9000&quot;, &amp;minio.Options&#123; Creds: credentials.NewStaticV4(&quot;minioadmin&quot;, &quot;minioadmin&quot;, &quot;&quot;), Secure: false, &#125;) if err != nil &#123; log.Fatalln(err) &#125; // åˆ›å»ºä¸€ä¸ªæ¡¶ï¼ˆbucketï¼‰ bucketName := &quot;mybucket&quot; location := &quot;china&quot; err = minioClient.MakeBucket(context.Background(), bucketName, minio.MakeBucketOptions&#123;Region: location&#125;) if err != nil &#123; // æ£€æŸ¥æ¡¶æ˜¯å¦å·²ç»å­˜åœ¨ exists, errBucketExists := minioClient.BucketExists(context.Background(), bucketName) if errBucketExists == nil &amp;&amp; exists &#123; fmt.Printf(&quot;Bucket &#x27;%s&#x27; already exists.\\n&quot;, bucketName) &#125; else &#123; log.Fatalln(err) &#125; &#125; else &#123; fmt.Printf(&quot;Bucket &#x27;%s&#x27; created successfully.\\n&quot;, bucketName) &#125; // ä¸Šä¼ ä¸€æ¡è®°å½• recordContent := &quot;This is a test record.&quot; recordName := &quot;test_record.txt&quot; _, err = minioClient.PutObject(context.Background(), bucketName, recordName, bytes.NewReader([]byte(recordContent)), int64(len(recordContent)), minio.PutObjectOptions&#123;ContentType: &quot;text/plain&quot;&#125;) if err != nil &#123; log.Fatalln(err) &#125; fmt.Println(&quot;Record uploaded successfully.&quot;)&#125; 3. è¿è¡Œç¨‹åºå°†ä¸Šè¿°Goä»£ç ä¿å­˜ä¸º main.goï¼Œç„¶åè¿è¡Œå®ƒï¼š 1go run main.go å°è¯•åˆ ã€æ”¹ã€æŸ¥ä¸Šä¼ å¯¹è±¡ç›´æ¥æ‹†å‡ºæ¥ 123456789101112func uploadObject(minioClient minio.Client, bucketName string) &#123; // ä¸Šä¼ ä¸€æ¡è®°å½• recordContent := &quot;This is a test record.&quot; recordName := &quot;test_record.txt&quot; _, err := minioClient.PutObject(context.Background(), bucketName, recordName, bytes.NewReader([]byte(recordContent)), int64(len(recordContent)), minio.PutObjectOptions&#123;ContentType: &quot;text/plain&quot;&#125;) if err != nil &#123; log.Fatalln(err) &#125; fmt.Println(&quot;Record uploaded successfully.&quot;)&#125; åˆ é™¤å¯¹è±¡åˆ é™¤ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡ï¼š 12345678func removeObject(minioClient *minio.Client, bucketName, objectName string) &#123; ctx := context.Background() err := minioClient.RemoveObject(ctx, bucketName, objectName, minio.RemoveObjectOptions&#123;&#125;) if err != nil &#123; log.Fatalln(err) &#125; log.Printf(&quot;Successfully deleted %s\\n&quot;, objectName)&#125; ä¸Šä¼ ï¼ˆä¿®æ”¹ï¼‰å¯¹è±¡ä¸Šä¼ ä¸€ä¸ªæ–°çš„å¯¹è±¡æˆ–è¦†ç›–ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡å¯ä»¥è§†ä¸ºâ€œä¿®æ”¹â€æ“ä½œï¼š 1234567891011import &quot;bytes&quot;func modifyObject(minioClient *minio.Client, bucketName, objectName, objectContent string) &#123; ctx := context.Background() reader := bytes.NewReader([]byte(objectContent)) _, err := minioClient.PutObject(ctx, bucketName, objectName, reader, int64(len(objectContent)), minio.PutObjectOptions&#123;ContentType: &quot;text/plain&quot;&#125;) if err != nil &#123; log.Fatalln(err) &#125; log.Printf(&quot;Successfully uploaded %s\\n&quot;, objectName)&#125; æ£€ç´¢ï¼ˆæŸ¥ï¼‰å¯¹è±¡æ£€ç´¢ï¼ˆæŸ¥ï¼‰æ“ä½œåŒ…æ‹¬åˆ—å‡ºæ‰€æœ‰å¯¹è±¡åç§°å’Œå†…å®¹ 1234567891011121314151617181920212223242526272829303132func getObjectContent(minioClient *minio.Client, bucketName, objectName string) &#123; ctx := context.Background() // ä½¿ç”¨ GetObject è·å–å¯¹è±¡ object, err := minioClient.GetObject(ctx, bucketName, objectName, minio.GetObjectOptions&#123;&#125;) if err != nil &#123; log.Fatalln(err) &#125; defer object.Close() // è¯»å–å¯¹è±¡çš„å†…å®¹ data, err := io.ReadAll(object) if err != nil &#123; log.Fatalln(err) &#125; // è¾“å‡ºå¯¹è±¡çš„å†…å®¹ log.Printf(&quot;Content of %s: %s\\n&quot;, objectName, string(data))&#125;func listObjectsAndContents(minioClient *minio.Client, bucketName string) &#123; ctx := context.Background() objectCh := minioClient.ListObjects(ctx, bucketName, minio.ListObjectsOptions&#123;&#125;) for object := range objectCh &#123; if object.Err != nil &#123; log.Fatalln(object.Err) &#125; log.Printf(&quot;Found %s\\n&quot;, object.Key) getObjectContent(minioClient, bucketName, object.Key) &#125;&#125; è¸©å‘ç›®å‰æœ€å¤§çš„é—®é¢˜æ˜¯dockerhubè®¿é—®ä¸äº†ï¼Œæœ‰è§£å†³æ–¹å¼ï¼ŒåŒ…æ‹¬æŒ‚ä»£ç†ã€ä½¿ç”¨cloudflareæ‰˜ç®¡ç­‰ï¼Œæˆ‘åœ¨è¿™é‡Œæ‰¾åˆ°äº†ä¸€ä¸ªæš‚ä¸”è¿˜èƒ½ä½¿ç”¨çš„é•œåƒæºhttps://docker.1panel.live æ•°æ®å®‰å…¨æ•°æ®åŠ å¯†æœåŠ¡å™¨ç«¯ä¸Šä¼ åŠ å¯†ï¼Œå°†å¯¹è±¡é€šè¿‡è‡ªå®šä¹‰çš„å¯†é’¥åŠ å¯†å¹¶ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œä»¥ä¿æŠ¤æ•°æ®å®‰å…¨ã€‚ä½¿ç”¨ encrypt.NewSSEC å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ç«¯åŠ å¯†ï¼ˆSSEï¼‰å¯¹è±¡ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯†é’¥ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465package mainimport ( &quot;context&quot; &quot;log&quot; &quot;github.com/minio/minio-go/v7&quot; &quot;github.com/minio/minio-go/v7/pkg/credentials&quot; &quot;github.com/minio/minio-go/v7/pkg/encrypt&quot;)func main() &#123; // è¿æ¥åˆ°MinioæœåŠ¡å™¨ endpoint := &quot;play.min.io&quot; accessKeyID := &quot;YOUR-ACCESSKEYID&quot; secretAccessKey := &quot;YOUR-SECRETACCESSKEY&quot; useSSL := true // åˆå§‹åŒ–minio clientå¯¹è±¡ minioClient, err := minio.New(endpoint, &amp;minio.Options&#123; Creds: credentials.NewStaticV4(accessKeyID, secretAccessKey, &quot;&quot;), Secure: useSSL, &#125;) if err != nil &#123; log.Fatalln(err) &#125; // åˆ›å»ºä¸€ä¸ªåŠ å¯†çš„å­˜å‚¨æ¡¶ bucketName := &quot;encrypted-bucket&quot; location := &quot;us-east-1&quot; err = minioClient.MakeBucket(context.Background(), bucketName, minio.MakeBucketOptions&#123;Region: location&#125;) if err != nil &#123; // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ exists, errBucketExists := minioClient.BucketExists(context.Background(), bucketName) if errBucketExists == nil &amp;&amp; exists &#123; log.Printf(&quot;Bucket %s already exists\\n&quot;, bucketName) &#125; else &#123; log.Fatalln(err) &#125; &#125; else &#123; log.Printf(&quot;Bucket %s created successfully\\n&quot;, bucketName) &#125; // è®¾ç½®åŠ å¯†å¯†é’¥ encryptionKey := &quot;MY-ENCRYPTION-KEY&quot; sse := encrypt.NewSSEC([]byte(encryptionKey)) // ä¸Šä¼ æ–‡ä»¶å¹¶åŠ å¯† objectName := &quot;encrypted-file.txt&quot; filePath := &quot;file.txt&quot; contentType := &quot;application/text&quot; uploadInfo, err := minioClient.FPutObject(context.Background(), bucketName, objectName, filePath, minio.PutObjectOptions&#123; ContentType: contentType, ServerSideEncryption: sse, &#125;) if err != nil &#123; log.Fatalln(err) &#125; log.Printf(&quot;Successfully uploaded %s of size %d\\n&quot;, objectName, uploadInfo.Size)&#125; åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€œencrypted-bucketâ€çš„åŠ å¯†å­˜å‚¨æ¡¶ã€‚ç„¶åï¼Œè®¾ç½®äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„åŠ å¯†å¯†é’¥ï¼Œå¹¶ä½¿ç”¨è¯¥å¯†é’¥å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ä¸Šä¼ ã€‚ä¸Šä¼ åˆ°MinioæœåŠ¡å™¨çš„æ–‡ä»¶å°†ä»¥åŠ å¯†å½¢å¼å­˜å‚¨ï¼Œä¿æŠ¤äº†æ•°æ®çš„æœºå¯†æ€§ã€‚ è®¿é—®æ§åˆ¶é™¤äº†æ•°æ®åŠ å¯†ï¼ŒMinioè¿˜æä¾›äº†è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ§åˆ¶å¯¹å­˜å‚¨æ¡¶å’Œå¯¹è±¡çš„è®¿é—®æƒé™ã€‚é€šè¿‡è®¾ç½®é€‚å½“çš„è®¿é—®ç­–ç•¥ï¼Œç”¨æˆ·å¯ä»¥é™åˆ¶è°å¯ä»¥è¯»å–å’Œå†™å…¥å­˜å‚¨æ¡¶ä¸­çš„å¯¹è±¡ï¼Œä»è€Œæé«˜æ•°æ®çš„å®‰å…¨æ€§ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package mainimport ( &quot;context&quot; &quot;fmt&quot; &quot;log&quot; &quot;github.com/minio/minio-go/v7&quot; &quot;github.com/minio/minio-go/v7/pkg/credentials&quot;)func main() &#123; // è¿æ¥åˆ°MinioæœåŠ¡å™¨ endpoint := &quot;play.min.io&quot; accessKeyID := &quot;YOUR-ACCESSKEYID&quot; secretAccessKey := &quot;YOUR-SECRETACCESSKEY&quot; useSSL := true// åˆå§‹åŒ–minio clientå¯¹è±¡minioClient, err := minio.New(endpoint, &amp;minio.Options&#123; Creds: credentials.NewStaticV4(accessKeyID, secretAccessKey, &quot;&quot;), Secure: useSSL,&#125;)if err != nil &#123; log.Fatalln(err)&#125;// è®¾ç½®å­˜å‚¨æ¡¶çš„è®¿é—®ç­–ç•¥bucketName := &quot;encrypted-bucket&quot;username := &quot;specific-user&quot; // æ›¿æ¢ä¸ºä½ æƒ³å…è®¸å†™å…¥çš„ç‰¹å®šç”¨æˆ·çš„ç”¨æˆ·åpolicy := `&#123; &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Principal&quot;: &#123;&quot;AWS&quot;: &quot;arn:aws:iam::` + username + `&quot;&#125;, &quot;Action&quot;: [ &quot;s3:PutObject&quot;, &quot;s3:DeleteObject&quot; ], &quot;Resource&quot;: &quot;arn:aws:s3:::` + bucketName + `/*&quot; &#125;, &#123; &quot;Effect&quot;: &quot;Allow&quot;, &quot;Principal&quot;: &quot;*&quot;, &quot;Action&quot;: &quot;s3:GetObject&quot;, &quot;Resource&quot;: &quot;arn:aws:s3:::` + bucketName + `/*&quot; &#125; ]&#125;`err = minioClient.SetBucketPolicy(context.Background(), bucketName, policy)if err != nil &#123; log.Fatalln(err)&#125;fmt.Println(&quot;Bucket policy set successfully.&quot;)&#125; åˆ›å»ºä¸€ä¸ªç­–ç•¥æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå£°æ˜ï¼šç¬¬ä¸€ä¸ªå£°æ˜ï¼šå…è®¸ç‰¹å®šç”¨æˆ·ï¼ˆé€šè¿‡å…¶ARNè¡¨ç¤ºï¼‰è¿›è¡Œå†™æ“ä½œï¼ˆåŒ…æ‹¬PutObjectå’ŒDeleteObjectï¼‰ã€‚ç¬¬äºŒä¸ªå£°æ˜ï¼šå…è®¸æ‰€æœ‰ç”¨æˆ·è¿›è¡Œè¯»æ“ä½œï¼ˆGetObjectï¼‰ã€‚ SSL/TLSæ”¯æŒMinioè¿˜æ”¯æŒé€šè¿‡SSL/TLSå¯¹æ•°æ®è¿›è¡Œå®‰å…¨ä¼ è¾“ã€‚é€šè¿‡å¯ç”¨SSL/TLSï¼Œæ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½å°†è¿›è¡ŒåŠ å¯†ï¼Œä»è€Œé˜²æ­¢ä¸­é—´äººæ”»å‡»å’Œæ•°æ®æ³„éœ²ã€‚ 123456789101112131415161718192021222324252627package mainimport ( &quot;log&quot; &quot;github.com/minio/minio-go/v7&quot; &quot;github.com/minio/minio-go/v7/pkg/credentials&quot;)func main() &#123; // è¿æ¥åˆ°å¯ç”¨äº†SSL/TLSçš„MinioæœåŠ¡å™¨ endpoint := &quot;play.min.io&quot; accessKeyID := &quot;YOUR-ACCESSKEYID&quot; secretAccessKey := &quot;YOUR-SECRETACCESSKEY&quot; useSSL := true// åˆå§‹åŒ–minio clientå¯¹è±¡minioClient, err := minio.New(endpoint, &amp;minio.Options&#123; Creds: credentials.NewStaticV4(accessKeyID, secretAccessKey, &quot;&quot;), Secure: useSSL,&#125;)if err != nil &#123; log.Fatalln(err)&#125;log.Println(&quot;Successfully connected to Minio server.&quot;)&#125; ç‰ˆæœ¬æ§åˆ¶é€šè¿‡å¯ç”¨ç‰ˆæœ¬æ§åˆ¶ï¼ŒMinioå¯ä»¥ä¿å­˜å¯¹è±¡çš„å¤šä¸ªç‰ˆæœ¬ï¼Œä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±å’Œæ„å¤–åˆ é™¤ã€‚ 1234567891011121314151617181920212223242526272829303132333435package mainimport ( &quot;context&quot; &quot;log&quot; &quot;github.com/minio/minio-go/v7&quot; &quot;github.com/minio/minio-go/v7/pkg/credentials&quot;)func main() &#123; // è¿æ¥åˆ°MinioæœåŠ¡å™¨ endpoint := &quot;play.min.io&quot; accessKeyID := &quot;YOUR-ACCESSKEYID&quot; secretAccessKey := &quot;YOUR-SECRETACCESSKEY&quot; useSSL := true// åˆå§‹åŒ–minio clientå¯¹è±¡minioClient, err := minio.New(endpoint, &amp;minio.Options&#123; Creds: credentials.NewStaticV4(accessKeyID, secretAccessKey, &quot;&quot;), Secure: useSSL,&#125;)if err != nil &#123; log.Fatalln(err)&#125;// å¯ç”¨ç‰ˆæœ¬æ§åˆ¶bucketName := &quot;my-bucket&quot;err = minioClient.EnableVersioning(context.Background(), bucketName)if err != nil &#123; log.Fatalln(err)&#125;log.Println(&quot;Versioning enabled successfully.&quot;)&#125; é”å®šæªæ–½é€šè¿‡å¯ç”¨å¯¹è±¡é”å®šï¼ŒMinioå¯ä»¥ä¿æŠ¤æ•°æ®å…å—æ„å¤–åˆ é™¤æˆ–è¦†ç›–ï¼Œå¹¶å®ç°æ•°æ®ä¿ç•™å’Œåˆè§„æ€§è¦æ±‚ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package mainimport ( &quot;context&quot; &quot;log&quot; &quot;time&quot; &quot;github.com/minio/minio-go/v7&quot; &quot;github.com/minio/minio-go/v7/pkg/credentials&quot;)func main() &#123; // è¿æ¥åˆ°MinioæœåŠ¡å™¨ endpoint := &quot;play.min.io&quot; accessKeyID := &quot;YOUR-ACCESSKEYID&quot; secretAccessKey := &quot;YOUR-SECRETACCESSKEY&quot; useSSL := true// åˆå§‹åŒ–minio clientå¯¹è±¡minioClient, err := minio.New(endpoint, &amp;minio.Options&#123; Creds: credentials.NewStaticV4(accessKeyID, secretAccessKey, &quot;&quot;), Secure: useSSL,&#125;)if err != nil &#123; log.Fatalln(err)&#125;// å¯ç”¨å¯¹è±¡é”å®šbucketName := &quot;my-lock-enabled-bucket&quot;err = minioClient.MakeBucket(context.Background(), bucketName, minio.MakeBucketOptions&#123;ObjectLocking: true&#125;)if err != nil &#123; log.Fatalln(err)&#125;log.Println(&quot;Bucket with object lock enabled created successfully.&quot;)// ä¸Šä¼ å¸¦æœ‰é”å®šç­–ç•¥çš„å¯¹è±¡objectName := &quot;my-object.txt&quot;filePath := &quot;path/to/your/file.txt&quot;contentType := &quot;application/text&quot;lockMode := minio.GovernanceretainUntilDate := time.Now().Add(24 * time.Hour) // ä¿ç•™24å°æ—¶uploadInfo, err := minioClient.PutObject(context.Background(), bucketName, objectName, filePath, -1, minio.PutObjectOptions&#123; ContentType: contentType, RetainUntilDate: retainUntilDate, Mode: lockMode,&#125;)if err != nil &#123; log.Fatalln(err)&#125;log.Printf(&quot;Successfully uploaded %s with lock mode %s until %v\\n&quot;, objectName, lockMode, retainUntilDate)&#125; æ•°æ®å®Œæ•´æ€§æ£€æŸ¥é€šè¿‡è®¡ç®—æ–‡ä»¶çš„å“ˆå¸Œå€¼å¹¶åœ¨ä¸Šä¼ å’Œä¸‹è½½è¿‡ç¨‹ä¸­è¿›è¡ŒéªŒè¯ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«æŸåã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677package mainimport ( &quot;context&quot; &quot;crypto/sha256&quot; &quot;fmt&quot; &quot;io&quot; &quot;log&quot; &quot;os&quot; &quot;github.com/minio/minio-go/v7&quot; &quot;github.com/minio/minio-go/v7/pkg/credentials&quot;)func main() &#123; // è¿æ¥åˆ°MinioæœåŠ¡å™¨ endpoint := &quot;play.min.io&quot; accessKeyID := &quot;YOUR-ACCESSKEYID&quot; secretAccessKey := &quot;YOUR-SECRETACCESSKEY&quot; useSSL := true// åˆå§‹åŒ–minio clientå¯¹è±¡minioClient, err := minio.New(endpoint, &amp;minio.Options&#123; Creds: credentials.NewStaticV4(accessKeyID, secretAccessKey, &quot;&quot;), Secure: useSSL,&#125;)if err != nil &#123; log.Fatalln(err)&#125;// ä¸Šä¼ æ–‡ä»¶å¹¶è®¡ç®—å“ˆå¸Œå€¼bucketName := &quot;my-bucket&quot;objectName := &quot;my-object.txt&quot;filePath := &quot;path/to/your/file.txt&quot;file, err := os.Open(filePath)if err != nil &#123; log.Fatalln(err)&#125;defer file.Close()hash := sha256.New()tee := io.TeeReader(file, hash)uploadInfo, err := minioClient.PutObject(context.Background(), bucketName, objectName, tee, -1, minio.PutObjectOptions&#123;&#125;)if err != nil &#123; log.Fatalln(err)&#125;log.Printf(&quot;Successfully uploaded %s of size %d\\n&quot;, objectName, uploadInfo.Size)log.Printf(&quot;SHA-256 hash: %x\\n&quot;, hash.Sum(nil))// ä¸‹è½½æ–‡ä»¶å¹¶éªŒè¯å“ˆå¸Œå€¼downloadFilePath := &quot;path/to/your/downloaded_file.txt&quot;err = minioClient.FGetObject(context.Background(), bucketName, objectName, downloadFilePath, minio.GetObjectOptions&#123;&#125;)if err != nil &#123; log.Fatalln(err)&#125;downloadedFile, err := os.Open(downloadFilePath)if err != nil &#123; log.Fatalln(err)&#125;defer downloadedFile.Close()downloadHash := sha256.New()if _, err := io.Copy(downloadHash, downloadedFile); err != nil &#123; log.Fatalln(err)&#125;log.Printf(&quot;Downloaded file SHA-256 hash: %x\\n&quot;, downloadHash.Sum(nil))if hash.Sum(nil) == downloadHash.Sum(nil) &#123; log.Println(&quot;Data integrity verified successfully.&quot;)&#125; else &#123; log.Println(&quot;Data integrity verification failed.&quot;)&#125;&#125; åœ¨ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œé€šè¿‡io.TeeReaderåŒæ—¶è®¡ç®—æ–‡ä»¶çš„SHA-256å“ˆå¸Œå€¼ã€‚ä¸‹è½½æ–‡ä»¶åï¼Œé‡æ–°è®¡ç®—ä¸‹è½½æ–‡ä»¶çš„SHA-256å“ˆå¸Œå€¼ã€‚æ¯”è¾ƒä¸Šä¼ å’Œä¸‹è½½æ–‡ä»¶çš„å“ˆå¸Œå€¼ä»¥éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ã€‚","categories":[],"tags":[{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"},{"name":"å®ä¹ é¡¹ç›®","slug":"å®ä¹ é¡¹ç›®","permalink":"http://gladiouszhang.github.io/tags/%E5%AE%9E%E4%B9%A0%E9%A1%B9%E7%9B%AE/"}]},{"title":"Javaå­¦ä¹ ç¬”è®°â€”â€”List, Set, Map","slug":"Javaå­¦ä¹ ç¬”è®°â€”â€”List-Set-Map","date":"2024-04-18T11:47:16.000Z","updated":"2024-08-11T10:06:26.000Z","comments":true,"path":"2024/04/18/Javaå­¦ä¹ ç¬”è®°â€”â€”List-Set-Map/","permalink":"http://gladiouszhang.github.io/2024/04/18/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94List-Set-Map/","excerpt":"","text":"List(åŒ…å«ArrayList, Vector, LinkedList)ArrayListåº•å±‚ä½¿ç”¨æ•°ç»„å®ç°æ•°æ®å­˜å‚¨ArrayListåŸºæœ¬ç­‰åŒä¸Vectorï¼Œä½†æ˜¯Vectorçº¿ç¨‹å®‰å…¨ï¼ˆå› æ­¤ArrayListæ›´å¿«ï¼‰ArrayListæºç åˆ†æï¼šç»´æŠ¤ä¸€ä¸ªObjectç±»å‹çš„æ•°ç»„elementDataï¼Œå¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨ï¼Œåˆå§‹åŒ–æ•°ç»„å¤§å°ä¸º0ï¼Œç¬¬ä¸€æ¬¡æ·»åŠ æ‰©å®¹ä¸º10ï¼Œå†æ¬¡æ‰©å®¹æ˜¯æ¯æ¬¡æ‰©å®¹1.5å€ã€‚å¦‚æœä½¿ç”¨æŒ‡å®šå¤§å°çš„æ„é€ å™¨ï¼Œåˆ™ç›´æ¥åˆå§‹åŒ–ä¸ºæŒ‡å®šå¤§å°ï¼Œæ¯æ¬¡æ‰©å®¹1.5å€ã€‚elementDataç”¨transientä¿®é¥°ï¼Œè¡¨ç¤ºè¯¥å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚Vectoråº•å±‚ä¹Ÿæ˜¯elementDataæ•°ç»„ï¼Œå¤šçº¿ç¨‹æ“ä½œæ—¶ä½¿ç”¨Vectorã€‚æ— å‚æ„é€ æ—¶é»˜è®¤é•¿åº¦ä¸º10ï¼Œæ»¡äº†ä»¥åæ¯æ¬¡å¢åŠ 2å€ï¼Œå¦‚æœæŒ‡å®šå¤§å°ï¼Œæ»¡ååˆ™ç›´æ¥æ‰©å®¹ä¸¤å€ï¼ˆå…¶å®å¯ä»¥è®¾ç½®æ¯æ¬¡å¢é•¿é‡ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œå°±é»˜è®¤ç¿»å€ï¼‰LinkedListåº•å±‚å®ç°äº†åŒå‘é“¾è¡¨å’ŒåŒç«¯é˜Ÿåˆ—ï¼Œæ²¡æœ‰å®ç°åŒæ­¥ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚å¢åˆ è¾ƒå¤šç”¨LinkedListï¼Œæ”¹æŸ¥è¾ƒå¤šç”¨ArrayList Set(åŒ…å«HashSet, LinkedHashSet)hashsetåº•å±‚æ˜¯hashmapï¼Œhashmapåº•å±‚æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼Œhashmapåˆå§‹åŒ–é•¿åº¦ä¸º16ï¼Œæ•°æ®åˆ°ä¸€å®šé‡(JAVA8ä¸­é“¾è¡¨é•¿åº¦â‰¥8ï¼Œtableå¤§å°â‰¥64)åå˜æˆçº¢é»‘æ ‘ã€‚å¦‚æœé“¾è¡¨åˆ°äº†8ï¼Œtableæ²¡åˆ°64ï¼Œé‚£ä¹ˆtableæ‰©å®¹ä¸º2å€ã€‚æ­¤å¤–ï¼Œtableä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æ•°é‡åˆ°threshold(0.75ä¹˜ä»¥tableé•¿åº¦ï¼Œåˆå§‹æ˜¯16*0.75=12)æ—¶è¿›è¡Œæ‰©å®¹ï¼Œæ‰©å®¹ä¹Ÿæ˜¯æ‰©ä¸º2å€ã€‚æ‰©å®¹çš„åŒæ—¶ï¼ŒåŸæœ‰çš„å…ƒç´ ä¼šè¢«é‡æ–°æ”¾ç½®ï¼ˆå› ä¸ºæ•°ç»„å¤§å°æ”¹å˜ï¼‰ã€‚ LinkedHashSetåº•å±‚æ˜¯ä¸€ä¸ªLinkedHashMapï¼Œå…¶åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ªæ•°ç»„+åŒå‘é“¾è¡¨ï¼Œä½¿ç”¨hashCodeå†³å®šåœ¨tableä¸­çš„ä½ç½®ï¼ŒåŒå‘é“¾è¡¨ç»´æŠ¤æ’å…¥é¡ºåºï¼Œä½¿å¾—å…ƒç´ çœ‹èµ·æ¥æ˜¯æŒ‰é¡ºåºæ’å…¥çš„ã€‚ç›¸å½“äºåœ¨HashTableï¼ˆHashMapï¼‰çš„Nodeå¤–é¢å¥—äº†ä¸€å±‚å£³ï¼ˆEntryï¼‰ï¼ŒåŠ ä¸Šäº†beforeå’Œafterå­—æ®µã€‚å…¶ç›®çš„å°±æ˜¯ä¸ºäº†ç»´æŠ¤é¡ºåºï¼Œå¹¶ä¸”å‡å°æŸ¥è¯¢å¼€é”€ï¼ˆå¯ä»¥ç›´æ¥è®¡ç®—hashï¼‰ã€‚éå†æ—¶ä½¿ç”¨LinkedHashMapçš„headå­—æ®µè¿›è¡Œéå†ã€‚æ‰©å®¹ç­‰æœºåˆ¶å’ŒHashMapç›¸åŒã€‚ Map(åŒ…å«HashMap, LinkedHashMap, Hashtable, Priorities)HashMapåœ¨åŠ å…¥ç›¸åŒé”®æ—¶ä¼šå‘ç”Ÿæ›¿æ¢ï¼Œè€Œæ›¿æ¢æ—¶å¹¶ä¸ä¼šæ”¹å˜modCountï¼ŒmodCountæ˜¯ä¸€ä¸ªç”¨äºè®°å½•HashMapç»“æ„ä¿®æ”¹æ¬¡æ•°ï¼ˆæ”¹å˜HashMapä¸­æ˜ å°„æ•°é‡æˆ–è€…ä¿®æ”¹å†…éƒ¨ç»“æ„ï¼‰çš„å˜é‡ã€‚HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚ Hashtableåº•å±‚ç»´æŠ¤ä¸€ä¸ªtableæ•°ç»„ï¼Œæ•°ç»„å­˜å‚¨Hashtable$Entryå¯¹è±¡ï¼Œå½¢æˆé“¾è¡¨ã€‚åˆå§‹åŒ–tableå¤§å°11ï¼Œthresholdä¸ºå¤§å°ä¹˜ä»¥0.75(å‘ä¸‹å–æ•´)ã€‚æ‰©å®¹æœºåˆ¶:å·¦ç§»ä¸€ä½(ä¹˜ä»¥äºŒ)åŠ ä¸€ã€‚Hashtableçš„æ•ˆç‡æ¯”HashMapä½ã€‚HashTableçš„é”®å€¼éƒ½ä¸èƒ½ä¸ºç©ºï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ propertieså¯ä»¥è¯»å–xx.propertiesæ–‡ä»¶ï¼Œè·å–æ–‡ä»¶ä¸­çš„é…ç½®(ä¸¾ä¾‹:æ•°æ®åº“) å¦‚ä½•é€‰æ‹© æ’å…¥å•åˆ—å…ƒç´ ï¼šCollection(Listã€Set) å…è®¸é‡å¤ï¼šList ä¸ç”¨çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼š å…·æœ‰å¤§é‡å¢åˆ æ“ä½œï¼šLinkedList å…·æœ‰å¤§é‡æ”¹æŸ¥æ“ä½œï¼šArrayList çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ï¼šVector ä¸å…è®¸é‡å¤ï¼šSet æ— åºï¼šHashSetï¼ˆåº•å±‚ä½¿ç”¨HashMapï¼‰ æ’åºï¼šTreeSet æŒ‰æ’å…¥é¡ºåºï¼šLinkedHashSetï¼ˆåº•å±‚ä½¿ç”¨LinkedHashMapï¼‰ æ’å…¥åŒåˆ—å…ƒç´ ï¼šMap æ— éœ€çº¿ç¨‹å®‰å…¨ï¼š æ— åºï¼šHashMap æ’åºï¼šTreeMap æŒ‰æ’å…¥é¡ºåºï¼šLinkedHashMap çº¿ç¨‹å®‰å…¨ï¼š è¯»å–æ–‡ä»¶ï¼šProperties å…¶ä»–ï¼šHashtable","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Java","slug":"Java","permalink":"http://gladiouszhang.github.io/tags/Java/"}]},{"title":"Javaå­¦ä¹ ç¬”è®°â€”â€”åŒ…è£…ç±»","slug":"Javaå­¦ä¹ ç¬”è®°â€”â€”åŒ…è£…ç±»","date":"2024-04-13T11:46:10.000Z","updated":"2024-07-31T11:46:50.000Z","comments":true,"path":"2024/04/13/Javaå­¦ä¹ ç¬”è®°â€”â€”åŒ…è£…ç±»/","permalink":"http://gladiouszhang.github.io/2024/04/13/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%8C%85%E8%A3%85%E7%B1%BB/","excerpt":"","text":"è£…ç®±ï¼š åŸºæœ¬ç±»å‹-&gt;åŒ…è£…ç±»å‹ã€‚æ‹†ç®±ç›¸åã€‚jdk5åŠä»¥åè‡ªåŠ¨æ‹†è£…ç®±ã€‚ æ‰‹åŠ¨è£…ç®±éœ€è¦ç”¨åˆ°new Integer(n)æˆ–è€…Integer.valueOf(n)ï¼Œæ‰‹åŠ¨æ‹†ç®±éœ€è¦integer.intValue()ã€‚è‡ªåŠ¨æ‹†è£…ç®±å¯ä»¥æ— è§†æ•°æ®ç±»å‹ç›´æ¥èµ‹å€¼ï¼Œä½†åº•å±‚å®é™…ä¸Šè¿˜æ˜¯ä¸€æ ·çš„ã€‚ Integerä½¿ç”¨è‡ªåŠ¨è£…ç®±ï¼ˆæˆ–æ‰‹åŠ¨è£…ç®±çš„valueOfæ–¹æ³•ï¼‰åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¦‚æœèŒƒå›´åœ¨-128-127èŒƒå›´å†…ï¼Œè¿”å›çš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œä¸åœ¨èŒƒå›´å†…æ—¶åº•å±‚newå¯¹è±¡ã€‚","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Java","slug":"Java","permalink":"http://gladiouszhang.github.io/tags/Java/"}]},{"title":"Javaå­¦ä¹ ç¬”è®°â€”â€”å¼‚å¸¸","slug":"Javaå­¦ä¹ ç¬”è®°â€”â€”å¼‚å¸¸","date":"2024-04-12T11:44:46.000Z","updated":"2024-07-31T11:45:50.000Z","comments":true,"path":"2024/04/12/Javaå­¦ä¹ ç¬”è®°â€”â€”å¼‚å¸¸/","permalink":"http://gladiouszhang.github.io/2024/04/12/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E5%BC%82%E5%B8%B8/","excerpt":"","text":"ä¸ºäº†ç»´æŠ¤å¥å£®æ€§ã€‚Ideaæ•è·å¼‚å¸¸å¿«æ·é”®ctrl+alt+tã€‚è¯­æ³•try{è¯­å¥}catch(Exception e){å¼‚å¸¸å¤„ç†}å¼‚å¸¸äº‹ä»¶:Error:JVMæ— æ³•å¤„ç†çš„ä¸¥é‡é—®é¢˜ï¼Œå¦‚æ ˆæº¢å‡ºï¼Œå†…å­˜ä¸è¶³ã€‚Exception:ç¼–ç¨‹é”™è¯¯æˆ–å¶ç„¶å› ç´ å¯¼è‡´çš„ä¸€èˆ¬é—®é¢˜ã€‚å¦‚ç©ºæŒ‡é’ˆï¼Œæ–‡ä»¶ä¸å­˜åœ¨ã€‚Exceptionåˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸å’Œç¼–è¯‘æ—¶å¼‚å¸¸ã€‚è¿è¡Œæ—¶å¼‚å¸¸å¯ä»¥æš‚æ—¶ä¸ç”¨å¤„ç†(å¤ªå¤š)ï¼Œç¼–è¯‘æ—¶å¼‚å¸¸å¿…é¡»å¤„ç†(å¦‚æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç±»ä¸å­˜åœ¨)ã€‚ç©ºæŒ‡é’ˆå¼‚å¸¸:è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½¿ç”¨å¯¹è±¡å¯¹è±¡ä¸ºç©ºã€‚æ•°å­¦è¿ç®—å¼‚å¸¸:ä¾‹å¦‚é™¤ä»¥0ã€‚æ•°ç»„è¶Šç•Œå¼‚å¸¸ç±»å‹è½¬æ¢å¼‚å¸¸:è¯•å›¾æŠŠå¯¹è±¡å¼ºåˆ¶è½¬åŒ–ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»ã€‚æ•°å­—æ ¼å¼å¼‚å¸¸:å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œä½†æ˜¯è¯¥å­—ç¬¦ä¸²ä¸æ»¡è¶³æ—¶ã€‚å¼‚å¸¸å¤„ç†æ–¹å¼:try-catch-finally:ç¨‹åºå‘˜è‡ªè¡Œå¤„ç†å¼‚å¸¸ã€‚throws:å°†å¼‚å¸¸æŠ›å‡ºï¼Œç”±è°ƒç”¨è€…å¤„ç†ã€‚æœ€é¡¶çº§çš„è°ƒç”¨è€…æ˜¯JVM(main)try-catch-finallyè¿‡ç¨‹:å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿå°†å¼‚å¸¸å°è£…ä¸ºExceptionå¯¹è±¡eï¼Œä¼ é€’ç»™catchã€‚æœ‰æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸éƒ½æ‰§è¡Œfinallyã€‚æ•…ç»å¸¸å°†é‡Šæ”¾èµ„æºçš„ä»£ç æ”¾åœ¨finallyã€‚throwsæœºåˆ¶:å±‚å±‚å¾€ä¸Šæ‰”ã€‚throwsæ˜¯æ”¾åœ¨æ–¹æ³•çš„åè¾¹ï¼Œå¦‚æœå‡ºé”™å°±ä¼šthrowsã€‚finallyä¸€å®šä¼šæ‰§è¡Œï¼Œå°±ç®—å‰é¢æœ‰returnäº†ï¼Œfinallyä¹Ÿä¼šæ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰catchï¼Œé‚£ä¹ˆfinallyæ‰§è¡Œå®Œå°±ç»“æŸäº†(å› ä¸ºæ²¡æœ‰æ•æ‰åˆ°é”™è¯¯ï¼Œé”™è¯¯å‘ç”Ÿï¼Œç¨‹åºå´©æºƒ)","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Java","slug":"Java","permalink":"http://gladiouszhang.github.io/tags/Java/"}]},{"title":"æ‘„å½±åˆ†äº«","slug":"æ‘„å½±åˆ†äº«","date":"2024-04-11T08:31:03.000Z","updated":"2024-07-31T16:07:34.000Z","comments":true,"path":"2024/04/11/æ‘„å½±åˆ†äº«/","permalink":"http://gladiouszhang.github.io/2024/04/11/%E6%91%84%E5%BD%B1%E5%88%86%E4%BA%AB/","excerpt":"","text":"","categories":[],"tags":[{"name":"æ‘„å½±","slug":"æ‘„å½±","permalink":"http://gladiouszhang.github.io/tags/%E6%91%84%E5%BD%B1/"}]},{"title":"Javaå­¦ä¹ ç¬”è®°â€”â€”é¢å‘å¯¹è±¡ï¼Œæšä¸¾ç±»ï¼Œæ³¨è§£","slug":"Javaå­¦ä¹ ç¬”è®°â€”â€”é¢å‘å¯¹è±¡ï¼Œæšä¸¾ç±»ï¼Œæ³¨è§£","date":"2024-04-06T08:28:27.000Z","updated":"2024-07-31T08:30:08.000Z","comments":true,"path":"2024/04/06/Javaå­¦ä¹ ç¬”è®°â€”â€”é¢å‘å¯¹è±¡ï¼Œæšä¸¾ç±»ï¼Œæ³¨è§£/","permalink":"http://gladiouszhang.github.io/2024/04/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%9E%9A%E4%B8%BE%E7%B1%BB%EF%BC%8C%E6%B3%A8%E8%A7%A3/","excerpt":"","text":"é¢å‘å¯¹è±¡ç±»å˜é‡:staticã€‚æ‰€æœ‰çš„å¯¹è±¡å…±äº«ã€‚jdk7åŠä»¥å‰æ”¾åœ¨é™æ€åŸŸï¼Œjdk8åŠä»¥åæ”¾åœ¨å †ã€‚éšç€ç±»çš„åˆ›å»ºè€ŒåŠ è½½ï¼Œç±»çš„é”€æ¯è€Œé”€æ¯ã€‚ç±»æ–¹æ³•:staticã€‚ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œä¸ç”¨åˆ›å»ºå®ä¾‹ã€‚é™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œéé™æ€æ–¹æ³•éƒ½å¯ä»¥è®¿é—®ã€‚mainæ–¹æ³•:Public static void main(Stringï¼»ï¼½ args)ã€‚Publicæ˜¯ä¸ºäº†JVMè°ƒç”¨ã€‚staticæ˜¯ä¸ºäº†è°ƒç”¨æ—¶ä¸éœ€è¦åˆ›å»ºå¯¹è±¡ã€‚voidä»£è¡¨æ²¡æœ‰è¿”å›å€¼ã€‚argsæ¥æ”¶å‚æ•°ã€‚ä»£ç å—:åˆå«åˆå§‹åŒ–å—ï¼Œå±äºç±»çš„æˆå‘˜ï¼Œç±»ä¼¼äºæ–¹æ³•ï¼Œå°†é€»è¾‘è¯­å¥ç”¨{}åŒ…è£¹èµ·æ¥ã€‚åŠ è½½ç±»æˆ–åˆ›å»ºå¯¹è±¡æ—¶éšå¼è°ƒç”¨ã€‚ä¿®é¥°ç¬¦ä»…å¯é€‰staticã€‚ç›¸å½“äºå¦å¤–ä¸€ç§å½¢å¼çš„æ„é€ å™¨ã€‚å¦‚æœå¤šä¸ªæ„é€ å™¨æœ‰ç›¸åŒå†…å®¹å¯ä»¥æŠ½å–å‡ºæ¥æ”¾åœ¨ä»£ç å—ä¸­ï¼Œå®ç°ä»£ç é‡ç”¨ã€‚å•ä¾‹è®¾è®¡æ¨¡å¼:ä¿è¯åœ¨æ•´ä¸ªè½¯ä»¶å‘¨æœŸä¸­æŸä¸ªç±»åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œå¹¶ä¸”åªæä¾›ä¸€ä¸ªå–å¾—å…¶å¯¹è±¡å®ä¾‹çš„æ–¹æ³•ã€‚æ„é€ å™¨ç§æœ‰åŒ–(é˜²æ­¢ç›´æ¥new)ï¼Œç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡ï¼Œå‘å¤–æš´éœ²ä¸€ä¸ªPublic staticæ–¹æ³•getInstanceã€‚åˆ†ä¸ºé¥¿æ±‰å¼å’Œæ‡’æ±‰å¼ã€‚é¥¿æ±‰å¼æ˜¯ç›´æ¥åˆ›å»ºä¸€ä¸ªç§æœ‰é™æ€å¯¹è±¡(æ„é€ å™¨ä¸ºç§æœ‰)ï¼Œæä¾›ä¸€ä¸ªå…¬å…±çš„staticæ–¹æ³•è¿”å›å¯¹è±¡ã€‚æ‡’æ±‰å¼æ˜¯å…ˆåœ¨ç±»ä¸­å£°æ˜ä¸€ä¸ªPrivate staticçš„å¯¹è±¡ï¼Œåœ¨getInstanceçš„æ—¶å€™åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºæ‰åˆ›å»ºå¯¹è±¡ã€‚final:ä¿®é¥°ç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿;ä¿®é¥°å±æ€§ï¼Œä¸èƒ½è¢«ä¿®æ”¹;ä¿®é¥°å˜é‡ï¼Œä¸èƒ½è¢«ä¿®æ”¹ã€‚æŠ½è±¡ç±»:çˆ¶ç±»æ–¹æ³•ä¸­å«æœ‰abstractæ–¹æ³•ï¼Œè¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»ä¸ä¸€å®šæœ‰abstractæ–¹æ³•ï¼Œä½†ä¸€æ—¦æœ‰abstractæ–¹æ³•ä¸€å®šæ˜¯æŠ½è±¡ç±»ã€‚abstractåªèƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ã€‚æŠ½è±¡æ–¹æ³•ä¸èƒ½æœ‰ä¸»ä½“ã€‚æŠ½è±¡ç±»ä¹Ÿå¯ä»¥è¢«æŠ½è±¡ç±»ç»§æ‰¿ï¼Œå­ç±»å¦‚æœä¸æ˜¯æŠ½è±¡ç±»ï¼Œéœ€è¦å®ç°æŠ½è±¡ç±»çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ã€‚æŠ½è±¡ç±»çš„æœ€ä½³æ—¶æœº:æ¨¡æ¿è®¾è®¡æ¨¡å¼ã€‚ç›¸å½“äºç»™å­ç±»å®šä¸‹æ¥äº†ä¸€äº›æ¨¡æ¿ã€‚æ¥å£interface:æ›´æŠ½è±¡çš„æŠ½è±¡ç±»ï¼Œjdk7åŠä»¥å‰æ‰€æœ‰æ–¹æ³•éƒ½æ²¡æœ‰æ–¹æ³•ä½“ï¼Œjdk8åŠä»¥åæ¥å£å†…å¯ä»¥æœ‰é™æ€æ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ–¹æ³•çš„å…·ä½“å®ç°ã€‚æ¥å£ç±»å‹å¯ä»¥æ¥å—å®ç°äº†è¯¥æ¥å£çš„å¯¹è±¡(å¤šæ€)ã€‚æ¥å£å­˜åœ¨å¤šæ€ä¼ é€’ï¼Œå³Aå®ç°Bæ¥å£ï¼ŒCç»§æ‰¿Aï¼Œåˆ™Cè€¶å®ç°äº†Bæ¥å£ã€‚å†…éƒ¨ç±»:åœ¨å…¶ä»–ç±»çš„å†…éƒ¨åµŒå¥—çš„ç±»ã€‚ç±»çš„äº”å¤§æˆå‘˜:å±æ€§ï¼Œæ–¹æ³•ï¼Œæ„é€ å™¨ï¼Œä»£ç å—ï¼Œå†…éƒ¨ç±»ã€‚å†…éƒ¨ç±»å¯è®¿é—®å¤–éƒ¨ç±»çš„ç§æœ‰å±æ€§ã€‚å®šä¹‰åœ¨ç±»çš„å±€éƒ¨ä½ç½®(æ–¹æ³•ï¼Œä»£ç å—)çš„æœ‰å±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»ï¼Œå®šä¹‰åœ¨æˆå‘˜ä½ç½®çš„æœ‰æˆå‘˜å†…éƒ¨ç±»å’Œé™æ€å†…éƒ¨ç±»ã€‚åŒ¿åå†…éƒ¨ç±»ç›¸å¯¹æ¯”è¾ƒé‡è¦ï¼Œå³åœ¨newä¸€ä¸ªç±»(æˆ–æ¥å£)çš„æ—¶å€™å®šä¹‰å‚æ•°ä¸ç±»ä½“ï¼Œæ²¡æœ‰å…·ä½“çš„åå­—:new class(å‚æ•°åˆ—è¡¨){ç±»ä½“}ã€‚ æšä¸¾ç±»æšä¸¾å°±æ˜¯äº‹å…ˆåœ¨ç±»é‡Œé¢å®šä¹‰å¥½å¯¹è±¡ã€‚enum ç±»å{åœ¨æœ€å¼€å§‹åˆå§‹åŒ–æšä¸¾å¯¹è±¡} æ³¨è§£æ³¨è§£:@Override:é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œ@Deprecated:å·²è¿‡æ—¶ï¼Œ@SupressWarning:æŠ‘åˆ¶è­¦å‘Šã€‚å…ƒæ³¨è§£:æ³¨è§£çš„æ³¨è§£ã€‚Retention:æ³¨è§£çš„ä½œç”¨èŒƒå›´ï¼ŒåŒ…æ‹¬SOURCE(åªåœ¨æºç )ï¼ŒCLASS(ä¿ç•™åˆ°CLASSæ–‡ä»¶ä¸­)ï¼ŒRUNTIME(ä¿å­˜åˆ°è¿è¡Œæ—¶)ã€‚Target:æ³¨è§£çš„ä½œç”¨å¯¹è±¡ã€‚Documented:æ³¨è§£æ˜¯å¦åœ¨javadocä½“ç°ã€‚Inherited:å­ç±»æ˜¯å¦ç»§æ‰¿çˆ¶ç±»æ³¨è§£ã€‚","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Java","slug":"Java","permalink":"http://gladiouszhang.github.io/tags/Java/"}]},{"title":"mit6.824ç¬”è®°","slug":"mit6-824ç¬”è®°","date":"2024-03-31T08:20:53.000Z","updated":"2024-12-13T02:01:51.162Z","comments":true,"path":"2024/03/31/mit6-824ç¬”è®°/","permalink":"http://gladiouszhang.github.io/2024/03/31/mit6-824%E7%AC%94%E8%AE%B0/","excerpt":"","text":"ç¯å¢ƒé…ç½® lab1 é˜…è¯»mrsequential.go é˜…è¯»wc.go ä»»åŠ¡ é˜…è¯» mrcoordinator.go mrworker.go coordinator.go rpc.go worker.go æ€è·¯ æ–°workeråŠ å…¥ masteræ‰§è¡Œé€»è¾‘ workeræ‰§è¡Œé€»è¾‘ ç¯å¢ƒé…ç½®ç¯å¢ƒï¼šUbuntu 20.04 é…ç½®goè¯­è¨€ç¯å¢ƒ 1apt install golang åœ¨vscodeé‡Œé¢å®‰è£…goçš„æ’ä»¶ lab1.soæ–‡ä»¶æ˜¯goé‡Œé¢çš„æ’ä»¶ã€‚åœ¨æœ¬labä¸­mrsequential.goæ˜¯ä¸»ç¨‹åºã€‚æ¯æ¬¡è¿è¡Œä¸»ç¨‹åºçš„æ—¶å€™é€‰æ‹©ä¸€ä¸ªæ’ä»¶ï¼Œå³å…·ä½“çš„map-reduceè¿‡ç¨‹ã€‚ go build -buildmode=plugin ../mrapps/wc.goæ˜¯å§wc.goç¼–è¯‘æˆæ’ä»¶ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰ é˜…è¯»mrsequential.goos.Args æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ŒåŒ…å«äº†ç¨‹åºè¿è¡Œæ—¶çš„æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°ï¼ŒåŒ…æ‹¬ç¨‹åºåæœ¬èº«ã€‚ç¨‹åºéœ€è¦è‡³å°‘ä¸¤ä¸ªå‚æ•°ï¼šxxx.so æ’ä»¶æ–‡ä»¶å’Œè‡³å°‘ä¸€ä¸ªè¾“å…¥æ–‡ä»¶ã€‚ å¦‚æœåˆæ³•ï¼Œåˆ™åŠ è½½æ’ä»¶ä¸­çš„mapå’Œreduceæ–¹æ³•ã€‚ åˆ›å»ºä¸€ä¸ªä¸­é—´è¾“å‡ºçš„é”®å€¼å¯¹åˆ‡ç‰‡ã€‚ å¯¹äºæ‰€æœ‰è¾“å…¥çš„æ–‡ä»¶ï¼Œå°†å…¶åˆ†åˆ«æ‰“å¼€å¹¶å…¨éƒ¨è¯»å…¥ï¼Œè°ƒç”¨æ’ä»¶ä¸­çš„mapå‡½æ•°ï¼Œç”Ÿæˆä¸­é—´é”®å€¼å¯¹ï¼Œå¹¶å°†é”®å€¼å¯¹çš„å†…å®¹å…¨éƒ¨åŠ å…¥å…ˆå‰åˆ›å»ºçš„ä¸­é—´è¾“å‡ºåˆ‡ç‰‡ã€‚ å¦‚æœè¦å°†ä¸€ä¸ªåˆ‡ç‰‡çš„æ‰€æœ‰å…ƒç´ è¿½åŠ åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ ... æ“ä½œç¬¦ã€‚è¿™ä¸ªæ“ä½œç¬¦å‘Šè¯‰ç¼–è¯‘å™¨å°†åˆ‡ç‰‡å±•å¼€ä¸ºä¸€ä¸ªä¸ªçš„å…ƒç´ ã€‚å¦‚æœä¸ä½¿ç”¨ ...ï¼Œåˆ™ä¼šå°è¯•å°†æ•´ä¸ªåˆ‡ç‰‡ä½œä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°ç›®æ ‡åˆ‡ç‰‡ä¸­ã€‚ ä¸çœŸå®çš„MapReduceä¸åŒï¼Œè¿™é‡Œçš„mrsequential.goå°†æ‰€æœ‰çš„ä¸­é—´æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­ï¼Œè€Œä¸æ˜¯è¢«åˆ‡åˆ†æˆN*Mä¸ªã€‚ å¯¹keyè¿›è¡Œæ’åºã€‚ å¯¹äºæ¯ä¸€ä¸ªä¸­é—´è¾“å‡ºçš„é”®å€¼å¯¹ï¼Œæ£€æŸ¥æœ‰å¤šå°‘ä¸ªkeyç›¸åŒï¼ŒæŠŠç›¸åŒçš„keyæ•°é‡ç»Ÿè®¡ä¸ºjï¼Œå¹¶å°†è¿™jä¸ªç›¸åŒkeyçš„é”®å€¼å¯¹çš„valueå­˜å…¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œå°†è¿™ä¸ªç›¸åŒçš„keyå’Œå­—ç¬¦ä¸²åˆ‡ç‰‡ä¼ å…¥è‡ªå®šä¹‰çš„reduceæ–¹æ³•ä¸­ï¼Œæœ€åé”®å€¼å¯¹ç»“æœä¿å­˜åˆ°mr-out-0ä¸­ã€‚ å…·ä½“çš„loadPluginå‡½æ•°ï¼ˆå³åŠ è½½mapå’Œreduceæ–¹æ³•çš„å‡½æ•°ï¼‰ï¼Œç”¨Lookupæ¥å¯»æ‰¾æ–‡ä»¶ä¸­çš„æ–¹æ³•ï¼Œè¿”å›è¯¥æ–¹æ³•çš„å¼•ç”¨ã€‚ 1mapf := xmapf.(func(string, string) []mr.KeyValue) è¿™è¡Œä»£ç é€šè¿‡ç±»å‹æ–­è¨€å°† xmapf å˜é‡è½¬æ¢æˆå…·ä½“çš„å‡½æ•°ç±»å‹ func(string, string) []mr.KeyValueã€‚è¿™æ„å‘³ç€ç¨‹åºé¢„æœŸæ‰¾åˆ°çš„ &quot;Map&quot; å‡½æ•°åº”è¯¥æ¥å—ä¸¤ä¸ª string ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª mr.KeyValue ç±»å‹çš„åˆ‡ç‰‡ã€‚ Lookupè¿”å›ä¸€ä¸ªç©ºæ¥å£ç±»å‹ interface&#123;&#125; ã€‚å¯ä»¥ç†è§£ç©ºæ¥å£ç±»å‹å°±åƒjavaä¸­çš„objectï¼Œæ‰€æœ‰ç±»éƒ½ç»§æ‰¿ä»–ï¼Œä½†æ˜¯å…·ä½“æ˜¯å•¥éœ€è¦è‡ªè¡Œè§£é‡Šï¼ˆæ–­è¨€ï¼‰ï¼Œæ˜¯ä¸€ç§å¤šæ€çš„ä½“ç°ã€‚å¦‚æœæ–­è¨€é”™è¯¯å°±ä¼šå‡ºç°ææ…Œï¼ˆpanicï¼‰ã€‚ é˜…è¯»wc.goå®ç°äº†mapå’Œreduceæ–¹æ³•ã€‚mapè¯»å…¥æ–‡ä»¶åå’Œä»¥å­—ç¬¦ä¸²å½¢å¼ä¼ å…¥çš„æ–‡ä»¶å†…å®¹ï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰ç”¨åˆ°æ–‡ä»¶åã€‚ åœ¨mapæ–¹æ³•ä¸­ï¼Œé¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªåˆ¤æ–­åˆ†éš”ç¬¦çš„å‡½æ•°ï¼Œå°†å…¶ä½œä¸ºå›è°ƒå‡½æ•°æ¥åˆ†å‰²æ–‡ä»¶å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªä¸ªç´¢å¼•å’Œå•è¯ç»„æˆçš„åˆ‡ç‰‡ã€‚éå†åˆ‡ç‰‡ï¼Œå°†æ‰€æœ‰çš„å•è¯ç”¨â€œå•è¯: 1â€çš„é”®å€¼å¯¹å­˜å‚¨åœ¨åˆ‡ç‰‡ä¸­ã€‚è¿”å›åˆ‡ç‰‡ã€‚ reduceæ–¹æ³•ç›´æ¥è¿”å›äº†valuesçš„é•¿åº¦ã€‚ ä»»åŠ¡å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼ MapReduceï¼Œå®ƒç”±ä¸¤ä¸ªç¨‹åºï¼ˆcoordinatorå’Œworkerï¼‰ç»„æˆã€‚åªæœ‰ä¸€ä¸ªåè°ƒç¨‹åºå’Œä¸€ä¸ªæˆ–å¤šä¸ªå¹¶è¡Œæ‰§è¡Œçš„å·¥ä½œç¨‹åºã€‚åœ¨çœŸå®ç³»ç»Ÿä¸­ï¼Œworkerä¼šè¿è¡Œåœ¨å¤šå°ä¸åŒçš„æœºå™¨ä¸Šï¼Œä½†åœ¨æœ¬labä¸­ï¼Œä½ å°†åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œæ‰€æœ‰workerã€‚workerå°†é€šè¿‡ RPC ä¸åè°ƒç¨‹åºå¯¹è¯ã€‚æ¯ä¸ª worker è¿›ç¨‹å°†å¾ªç¯å‘coordinatorè¯·æ±‚ä»»åŠ¡ï¼Œä»ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸­è¯»å–ä»»åŠ¡è¾“å…¥ï¼Œæ‰§è¡Œä»»åŠ¡ï¼Œå°†ä»»åŠ¡è¾“å‡ºå†™å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œç„¶åå†æ¬¡å‘coordinatorè¯·æ±‚æ–°ä»»åŠ¡ã€‚coordinatoråº”è¯¥æ³¨æ„åˆ°ï¼Œå¦‚æœæŸä¸ª worker åœ¨åˆç†çš„æ—¶é—´å†…ï¼ˆæœ¬labä½¿ç”¨ 10 ç§’ï¼‰æ²¡æœ‰å®Œæˆä»»åŠ¡ï¼Œå°±ä¼šå°†ç›¸åŒçš„ä»»åŠ¡äº¤ç»™ä¸åŒçš„ worker ã€‚ æä¾›çš„ä»£ç ä½äºmain/mrcoordinator.go å’Œmain/mrworker.goï¼Œæœ€åå®ç°çš„ä»£ç æ”¾åœ¨ mr/coordinator.go, mr/worker.goå’Œ mr/rpc.goã€‚ é˜…è¯»é¦–å…ˆé˜…è¯»ä¸€ä¸‹æºç ã€‚å…¶ä¸­main/mrcoordinator.go å’Œmain/mrworker.goæ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œmrcoordinator.goç”¨äºè°ƒç”¨è‡ªå·±ç¼–å†™çš„ mr/coordinator.goï¼Œmrworker.goç”¨äºå¼€å¯ä¸€ä¸ªworkerè¿›ç¨‹ï¼Œå…·ä½“å®ç°åœ¨mr/rpc.goã€‚ mrcoordinator.goè°ƒç”¨äº†mr/coordinator.goï¼Œå°†æ‰€æœ‰æ–‡ä»¶åç§°ä¼ å…¥MakeCoordinatoræ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥10ï¼Œä»£è¡¨10ä¸ªreduceä»»åŠ¡ã€‚å½“Doneè¿”å›trueçš„æ—¶å€™ç»“æŸã€‚ mrworker.goåŠ è½½æ’ä»¶ï¼Œç”Ÿæˆmapå’Œreduceæ–¹æ³•ï¼Œä¼ ç»™è‡ªå·±åˆ›å»ºçš„workerã€‚ coordinator.goåˆ›å»ºäº†ä¸€ä¸ªCoordinatorç±»ï¼Œä¸»è¦åŒ…å«serverï¼ŒDoneæ–¹æ³•ã€‚serveræ–¹æ³•ç”¨äºå¼€å¯ä¸€ä¸ªæ¥å—RPCè¯·æ±‚çš„çº¿ç¨‹ã€‚Doneæ–¹æ³•ç”¨äºåˆ¤æ–­å·¥ä½œæ˜¯å¦ç»“æŸã€‚MakeCoordinatorå‡½æ•°è¢«mrcoordinator.goè°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªCoordinator&#123;&#125;çš„å®ä¾‹ã€‚ rpc.goRPCç›¸å…³çš„ä¸€äº›å®šä¹‰ï¼Œè‡ªå®šä¹‰æ—¶éœ€è¦é¦–å­—æ¯å¤§å†™ã€‚åŒ…å«ä¸€ä¸ªcoordinatorSock()å‡½æ•°ï¼Œç”¨äºåœ¨/var/tmp/ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—æ–‡ä»¶ï¼Œåä¸º5840-mr-UserIdã€‚è¿™ä¸ªå‡½æ•°å¹¶ä¸ç›´æ¥åˆ›å»ºï¼Œè€Œæ˜¯è¿”å›è¿™æ ·ä¸€ä¸ªè·¯å¾„ä¸‹å‘½åçš„å­—ç¬¦ä¸²ã€‚ worker.goåœ¨å…¶ä¸­å®šä¹‰äº†é”®å€¼å¯¹çš„ç»“æ„ä½“ã€‚ åˆ›å»ºäº†ä¸€ä¸ªå°†ä¸åŒé”®é€šè¿‡å¯¹å…¶å“ˆå¸Œå€¼å–æ¨¡åˆ†é…åˆ°Nä¸ªreduceä»»åŠ¡çš„æ–¹æ³•ã€‚ æœ€ä¸»è¦çš„æ˜¯main/mrworker.goä¼šè°ƒç”¨çš„Workeræ–¹æ³•ï¼Œä¼ å…¥mapå’Œreduceæ–¹æ³•ï¼Œä¸»è¦æ˜¯åœ¨è¿™é‡Œå†™ä»£ç ã€‚ æ€è·¯æŒ‰ç…§åŸè®ºæ–‡çš„ä¹ æƒ¯ï¼Œæˆ‘å°±ç§°ä¸ºworkerå’Œmasteräº† æ–°workeråŠ å…¥å¯¹äºwokeræ¥è¯´ï¼Œå¯ä»¥æ¯æ¬¡ä¸€ä¸Šçº¿å°±æ³¨å†Œåˆ°masterå½“ä¸­ï¼Œè°ƒç”¨masterçš„joinæ–¹æ³•ï¼ˆå¾…ç¼–å†™ï¼‰ 1234567891011121314151617181920func (w *workerTask) CallMasterStart() &#123; args := ArgsToMaster&#123;&#125; args.Id = os.Getuid() fmt.Printf(&quot;id %v\\n&quot;, args.Id) //args.msgType = join reply := ArgsFromMaster&#123;&#125; ok := call(&quot;Coordinator.WorkerJoin&quot;, &amp;args, &amp;reply) if ok &#123; // åº”è¯¥ä¼šè¿”å›masterç»™è¿”å›workerçš„ä»»åŠ¡ï¼Œå¾…è¯¦ç»†è®¾è®¡ //fmt.Printf(&quot;reply.msg %v\\n&quot;, reply.Msg) splits := strings.Split(reply.Msg, &quot;=&quot;) w.nReduce, _ = strconv.Atoi(splits[1]) w.filename = splits[0] w.taskType, _ = strconv.Atoi(splits[2]) //fmt.Printf(&quot;reply.msg %v, nReduce %v\\n&quot;, w.filename, w.nReduce) &#125; else &#123; fmt.Printf(&quot;call failed!\\n&quot;) &#125;&#125; joinæ–¹æ³•é‡Œé¢æœ€å¥½æ˜¯èƒ½å»ºç«‹ä¸€ä¸ªsocketåˆ°workerï¼Œä¸çŸ¥é“å¯ä¸å¯ä»¥ï¼Œå¦‚æœä¸å¯ä»¥çš„è¯ï¼Œmasteræ€ä¹ˆç»™wokeræ´¾ä»»åŠ¡ï¼Ÿï¼ˆç”¨replyçš„å€¼è¿”å›å°±è¡Œï¼Œsocketå¼€é”€å¤ªå¤§ï¼‰æ‰€ä»¥åœ¨workerä¸­ï¼š1234567891011121314151617181920func (c *Coordinator) WorkerJoin(args *ArgsToMaster, reply *ArgsFromMaster) error &#123; // ç”±äºæ˜¯å¹¶å‘çš„ï¼Œæ‰€ä»¥éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨ c.mu.Lock() c.workerList = append(c.workerList, args.Id) // å›ä¼ ä¸€ä¸ªä»»åŠ¡åœ°å€å›å» for i, taskItem := range c.taskList &#123; //fmt.Println(taskItem) if taskItem.taskStatus == ready &#123; reply.Msg = taskItem.taskAddr + &quot;=&quot; + strconv.Itoa(c.nReducer) + &quot;=&quot; + strconv.Itoa(int(taskItem.taskType)) c.taskList[i].taskStatus = assign c.taskList[i].taskWorker = args.Id // å¦‚æœæ‰¾åˆ°äº†å°±è¦è§£é”ï¼Œä¸ç„¶å…¶ä»–çº¿ç¨‹è·å–ä¸åˆ°é” c.mu.Unlock() return nil &#125; &#125; c.mu.Unlock() reply.Msg = &quot;&quot; return nil&#125; masterç»´æŠ¤ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨ï¼Œæ¯ä¸ªä»»åŠ¡åŒ…å«ä»»åŠ¡ç±»å‹ï¼Œæ–‡ä»¶åœ°å€ï¼Œä»»åŠ¡çŠ¶æ€ï¼Œåˆ†é…åˆ°çš„wokerid 123456type task struct &#123; taskType TaskType //ä»»åŠ¡ç±»å‹ taskAddr string //æ–‡ä»¶åœ°å€ taskStatus TaskStatus //ä»»åŠ¡çŠ¶æ€ taskWorker int //åˆ†é…ç»™çš„workerç¼–å·&#125; workeræ”¶åˆ°replyä¹‹åï¼Œåº”è¯¥åœ¨æœ¬åœ°è¯»å–ä»»åŠ¡å¹¶è¿è¡Œ æŠ¥é”™ï¼š 1gob: type mismatch: no fields matched compiling decoder for ArgsToMaster æœäº†ä¸€ä¸‹è¯´å®¢æˆ·ç«¯æ‰€ä¼ çš„å‚æ•°ç±»å‹å’ŒæœåŠ¡ç«¯ä¸ä¸€è‡´ åŸæ¥æ˜¯å› ä¸ºä¹‹å‰ä¿®æ”¹äº†ç»“æ„ä½“åç§°åæ²¡æœ‰é‡æ–°è¿è¡Œmasterã€‚ã€‚ã€‚ã€‚ã€‚ masteræ‰§è¡Œé€»è¾‘æŒ‰ç†è¯´masterç»™workeråˆ†äº†ä»»åŠ¡å°±å·²ç»å¯ä»¥äº†ï¼Œä½†æ˜¯ï¼Œmasteræœ‰è¦æ±‚å¦‚ä¸‹ï¼š å¦‚æœå·¥ä½œè€…åœ¨åˆç†çš„æ—¶é—´å†…ï¼ˆåœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œä½¿ç”¨åç§’ï¼‰æ²¡æœ‰å®Œæˆå…¶ä»»åŠ¡ï¼Œåè°ƒè€…åº”è¯¥æ³¨æ„åˆ°ï¼Œå¹¶å°†ç›¸åŒçš„ä»»åŠ¡åˆ†é…ç»™ä¸åŒçš„å·¥ä½œè€…ã€‚ æ‰€ä»¥masteråº”å½“ç»™æ¯ä¸ªä»»åŠ¡ç»´æŠ¤ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œåªè¦10såˆ°äº†ä»»åŠ¡è¿˜æ²¡æœ‰endï¼Œé‚£è¿™ä¸ªä»»åŠ¡å°±åº”è¯¥æŠŠçŠ¶æ€æ”¹ä¸ºreadyã€‚ä»»åŠ¡æ–°å¢è®¡æ—¶å™¨çš„å­—æ®µï¼Œå¹¶ä¸”æ¯åˆ†é…ä¸€æ¬¡ä»»åŠ¡å°±è¦åˆå§‹åŒ–ä¸€æ¬¡è®¡æ—¶å™¨ åœ¨masterçš„ä»»åŠ¡åˆ—è¡¨åˆå§‹åŒ–ç»“æŸåï¼Œå¼€å¯ä¸€ä¸ªæ–°çš„æºç¨‹ï¼Œä¸“é—¨ç”¨äºæ£€æŸ¥æ˜¯å¦è¶…æ—¶ã€‚æ­¤åæ¯æ¬¡ä»»åŠ¡å®Œæˆå›ç»™masterçš„æ—¶å€™ï¼Œmasteréƒ½åº”è¯¥æ£€æŸ¥idæ˜¯ä¸æ˜¯å’Œåˆ—è¡¨ä¸­çš„ç›¸åŒã€‚ åŸæœ¬ä¿®æ”¹çš„ä»£ç ï¼š1234567891011121314// ç”¨æ¥æ£€æŸ¥æœ‰æ²¡æœ‰ä»»åŠ¡è¶…æ—¶äº†func (c *Coordinator) testTimeOut() &#123; for !c.Done() &#123; for i, taskItem := range c.taskList &#123; //fmt.Println(&quot;æ­£åœ¨æ£€æŸ¥ï¼š&quot;, c.taskList[i]) if c.taskList[i].taskStatus == assign &amp;&amp; time.Since(c.taskList[i].taskStart) &gt;= 10*time.Second &#123; //fmt.Println(&quot;å·²åˆ°è¾¾&quot;) fmt.Println(&quot;åˆ é™¤äº†ï¼š&quot;, taskItem.taskAddr, time.Since(taskItem.taskStart), &quot;ç°åœ¨æ—¶é—´ï¼š&quot;, time.Now(), &quot;ä»»åŠ¡å¼€å§‹æ—¶é—´&quot;, c.taskList[i].taskStart) c.taskList[i].taskStatus = ready c.taskList[i].taskWorker = -1 &#125; &#125; &#125;&#125; ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼å°±æ˜¯åœ¨é”çš„æœºåˆ¶ä¸Šã€‚ç®€å•åœ°è¯´ï¼Œcé‡Œé¢çš„æ•°æ®åœ¨å¤šçº¿ç¨‹ä¸­æ˜¯ä¸å®‰å…¨çš„ï¼Œæ¯ä¸€ä¸ªè®¿é—®å’Œä¿®æ”¹éƒ½åº”è¯¥è¦åŠ é”æ‰å¯¹ã€‚ å› æ­¤ï¼Œåœ¨æ¯ä¸€ä¸ªifåˆ¤æ–­å‰åï¼Œéƒ½åº”è¯¥åŠ ä¸Šä¸€ä¸ªé”ã€‚ä½†æ˜¯è¿™æ ·æ˜¯å¦å°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæ‰€æœ‰çš„æ­¥éª¤éƒ½å¡åœ¨è¿™ä¸ªé”ä¸Šï¼Œé™ä½äº†å¹¶è¡Œçš„æ•ˆç‡ï¼Œæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚è™½ç„¶åœ¨masterä¸Šï¼Œè¿™ä¸ªé”å¹¶ä¸ä¸€å®šä¼šå¤ªå½±å“ï¼Œä½†æ˜¯è¯¸å¦‚æ£€æŸ¥ä»»åŠ¡æ˜¯å¦è¶…æ—¶çš„åœºæ™¯ä¼šç»å¸¸è¯·æ±‚è®¿é—®ã€‚ æ‰€ä»¥æˆ‘è€ƒè™‘ä¸ç”¨ä¹‹å‰å®šä¹‰çš„sync.Mutexï¼Œè€Œæ˜¯ç”¨è¯»å†™é”RWMutexï¼Œè¿™æ ·è‡³å°‘å¯ä»¥å¤šä¸ªåŒæ—¶è¯»ã€‚æœ€åå†™å‡ºæ¥åƒè¿™æ ·ï¼š1234567891011121314151617181920// ç”¨æ¥æ£€æŸ¥æœ‰æ²¡æœ‰ä»»åŠ¡è¶…æ—¶äº†func (c *Coordinator) testTimeOut() &#123; for !c.Done() &#123; for i := range c.taskList &#123; //fmt.Println(&quot;æ­£åœ¨æ£€æŸ¥ï¼š&quot;, c.taskList[i]) c.mu.RLock() if c.taskList[i].taskStatus == assign &amp;&amp; time.Since(c.taskList[i].taskStart) &gt;= 10*time.Second &#123; fmt.Println(&quot;å·²åˆ°è¾¾&quot;) c.mu.RUnlock() c.mu.Lock() fmt.Println(&quot;åˆ é™¤äº†ï¼š&quot;, c.taskList[i].taskAddr, time.Since(c.taskList[i].taskStart), &quot;ç°åœ¨æ—¶é—´ï¼š&quot;, time.Now(), &quot;ä»»åŠ¡å¼€å§‹æ—¶é—´&quot;, c.taskList[i].taskStart) c.taskList[i].taskStatus = ready c.taskList[i].taskWorker = -1 c.mu.Unlock() c.mu.RLock() // ä¸ºäº†å’Œæœ€åçš„c.mu.RUnlock()é…å¯¹ï¼Œä¸ç„¶ä¼šå‡ºé”™ &#125; c.mu.RUnlock() &#125; &#125;&#125; gpt ç»™äº†ä¸€ç‰ˆæ›´å¥½çš„ï¼Œæˆ‘ä¹Ÿè§‰å¾—æ›´å¥½çœ‹ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰ç”¨ï¼š12345678910111213141516171819202122func (c *Coordinator) testTimeOut() &#123; for !c.Done() &#123; for i := range c.taskList &#123; c.mu.RLock() task := c.taskList[i] // è·å–ä»»åŠ¡ taskStatus := task.taskStatus taskStart := task.taskStart c.mu.RUnlock() if taskStatus == assign &amp;&amp; time.Since(taskStart) &gt;= 10*time.Second &#123; // è¶…æ—¶å¤„ç†é€»è¾‘ c.mu.Lock() if c.taskList[i].taskStatus == assign &#123; // åŒé‡æ£€æŸ¥é¿å…ç«æ€æ¡ä»¶ fmt.Println(&quot;è¶…æ—¶ä»»åŠ¡ï¼š&quot;, c.taskList[i].taskAddr, time.Since(taskStart)) c.taskList[i].taskStatus = ready c.taskList[i].taskWorker = -1 &#125; c.mu.Unlock() &#125; &#125; &#125;&#125; åœ¨Doneé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„æŠŠä»»åŠ¡é˜Ÿåˆ—è¿‡ä¸€éï¼Œå¦‚æœæ‰€æœ‰çš„ä»»åŠ¡éƒ½å·²ç»å˜æˆfinishï¼Œé‚£ä¹ˆdoneè¿”å›true 123456789101112131415161718// main/mrcoordinator.go calls Done() periodically to find out// if the entire job has finished.func (c *Coordinator) Done() bool &#123; ret := true // Your code here. // éå†ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœå­˜åœ¨ä¸ºfinishçš„ï¼Œå°±è¿”å›false c.mu.RLock() for _, task := range c.taskList &#123; if task.taskStatus != finish &#123; ret = false &#125; &#125; c.mu.RUnlock() return ret&#125; workeræ‰§è¡Œé€»è¾‘ç°åœ¨workerçŸ¥é“äº†ä»»åŠ¡ç±»å‹å’Œæ–‡ä»¶åœ°å€ï¼Œåº”è¯¥ä½¿ç”¨mapæˆ–è€…reduceå‡½æ•°è¿›è¡Œæ“ä½œï¼Œå¹¶å°†ç»“æœå­˜åˆ°æ–‡ä»¶ä¸­ã€‚ä½†ä»ç„¶å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬å¹¶ä¸æ˜¯è°ƒå®Œä¸€æ¬¡mapæˆ–è€…reduceä»»åŠ¡ï¼Œworkerå°±æŒ‚äº†ï¼Œè€Œæ˜¯æŒç»­å­˜åœ¨ã€‚å› æ­¤ï¼Œéœ€è¦æ¯æ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡ï¼Œå°±å»æ‰¾masterè¦ä»»åŠ¡ã€‚","categories":[],"tags":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"}]}],"categories":[],"tags":[{"name":"AI Infra","slug":"AI-Infra","permalink":"http://gladiouszhang.github.io/tags/AI-Infra/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"http://gladiouszhang.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"å¼ºåŒ–å­¦ä¹ ","slug":"å¼ºåŒ–å­¦ä¹ ","permalink":"http://gladiouszhang.github.io/tags/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/"},{"name":"åˆ†å¸ƒå¼ç³»ç»Ÿ","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","permalink":"http://gladiouszhang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"},{"name":"è¾¹ç¼˜è®¡ç®—","slug":"è¾¹ç¼˜è®¡ç®—","permalink":"http://gladiouszhang.github.io/tags/%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97/"},{"name":"å®ä¹ é¡¹ç›®","slug":"å®ä¹ é¡¹ç›®","permalink":"http://gladiouszhang.github.io/tags/%E5%AE%9E%E4%B9%A0%E9%A1%B9%E7%9B%AE/"},{"name":"Java","slug":"Java","permalink":"http://gladiouszhang.github.io/tags/Java/"},{"name":"æ‘„å½±","slug":"æ‘„å½±","permalink":"http://gladiouszhang.github.io/tags/%E6%91%84%E5%BD%B1/"}]}